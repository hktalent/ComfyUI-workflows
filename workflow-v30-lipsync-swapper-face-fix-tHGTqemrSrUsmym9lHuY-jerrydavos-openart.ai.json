{"last_node_id":294,"last_link_id":463,"nodes":[{"id":4,"type":"GetNode","pos":[143.13133693816928,145.08343768381792],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":0,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[2],"slot_index":0}],"title":"Get_Skip_Frames","properties":{},"widgets_values":["Skip_Frames"],"color":"#222","bgcolor":"#000"},{"id":5,"type":"GetNode","pos":[313.13133693816934,145.08343768381792],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":1,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[1],"slot_index":0}],"title":"Get_Batch_Range","properties":{},"widgets_values":["Batch_Range"],"color":"#222","bgcolor":"#000"},{"id":148,"type":"VHS_SplitImages","pos":[3810,1740],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":110,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":280}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[266],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":146,"type":"VHS_SplitImages","pos":[3390,1740],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":102,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":278}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[264],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":133,"type":"VHS_SplitImages","pos":[2950,1740],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":85,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":276}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[242],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":152,"type":"ImageListToImageBatch","pos":[3900,1740],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":100,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":279}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[280],"shape":3,"slot_index":0}],"title":".","properties":{"Node name for S&R":"ImageListToImageBatch"},"color":"#222","bgcolor":"#000"},{"id":150,"type":"ImageListToImageBatch","pos":[3050,1740],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":69,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":275}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[276],"shape":3,"slot_index":0}],"title":".","properties":{"Node name for S&R":"ImageListToImageBatch"},"color":"#222","bgcolor":"#000"},{"id":149,"type":"ImageListToImageBatch","pos":[2373.7778494787713,566.5149814019367],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":73,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":273}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[274],"shape":3,"slot_index":0}],"title":".","properties":{"Node name for S&R":"ImageListToImageBatch"},"color":"#222","bgcolor":"#000"},{"id":173,"type":"GetNode","pos":[513.1313369381692,145.08343768381792],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":2,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[429],"slot_index":0}],"title":"Get_Batch_Range","properties":{},"widgets_values":["Batch_Range"],"color":"#222","bgcolor":"#000"},{"id":172,"type":"GetNode","pos":[693.1313369381685,145.08343768381792],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":3,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[430],"slot_index":0}],"title":"Get_Skip_Frames","properties":{},"widgets_values":["Skip_Frames"],"color":"#222","bgcolor":"#000"},{"id":33,"type":"ImageCompositeMasked","pos":[2880,1270],"size":{"0":315,"1":146},"flags":{},"order":50,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":33,"slot_index":0},{"name":"source","type":"IMAGE","link":247},{"name":"mask","type":"MASK","link":261,"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[275,309,337],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,true]},{"id":27,"type":"RebatchImages","pos":[143.13133693816928,365.0834376838166],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":65,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":235}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[236],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1],"color":"#222","bgcolor":"#000"},{"id":96,"type":"SetNode","pos":[313.13133693816934,365.0834376838166],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":82,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":236}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Original_Image","properties":{"previousName":"Original_Image"},"widgets_values":["Original_Image"],"color":"#222","bgcolor":"#000"},{"id":182,"type":"PreviewImage","pos":[573.1313369381685,465.0834376838172],"size":{"0":220,"1":250},"flags":{},"order":83,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":338}],"title":"Preview","properties":{"Node name for S&R":"PreviewImage"}},{"id":7,"type":"PreviewImage","pos":[203.13133693816923,465.0834376838172],"size":{"0":220,"1":250},"flags":{},"order":81,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3}],"title":"Preview","properties":{"Node name for S&R":"PreviewImage"}},{"id":8,"type":"VHS_SplitImages","pos":[283.1313369381694,415.083437683817],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":64,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":4}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[3],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":183,"type":"VHS_SplitImages","pos":[663.1313369381685,415.083437683817],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":66,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":428}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[338],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":35,"type":"ImpactGaussianBlurMask","pos":[2270,1560],"size":{"0":315,"1":82},"flags":{},"order":77,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":37}],"outputs":[{"name":"MASK","type":"MASK","links":[42,305,366],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactGaussianBlurMask"},"widgets_values":[20,10],"color":"#19671f","bgcolor":"#2d7b33"},{"id":134,"type":"VHS_SplitMasks","pos":[2340,1750],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":104,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":268}],"outputs":[{"name":"MASK_A","type":"MASK","links":[245],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"MASK_B","type":"MASK","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitMasks"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":217,"type":"MaskToImage","pos":[2275.6065555664763,1121.0177307786046],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":4,"mode":2,"inputs":[{"name":"mask","type":"MASK","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"},"color":"#222","bgcolor":"#000"},{"id":219,"type":"Text Concatenate","pos":[2285.6065555664763,1081.0177307786046],"size":{"0":315,"1":178},"flags":{"collapsed":true},"order":74,"mode":2,"inputs":[{"name":"text_a","type":"STRING","link":384,"widget":{"name":"text_a"}},{"name":"text_b","type":"STRING","link":385,"widget":{"name":"text_b"}},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"}},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"}}],"outputs":[{"name":"STRING","type":"STRING","links":[382],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":["","true","","","",""],"color":"#222","bgcolor":"#000"},{"id":193,"type":"Text Concatenate","pos":[2975.837627959375,2350.3145476937502],"size":{"0":315,"1":178},"flags":{"collapsed":true},"order":76,"mode":0,"inputs":[{"name":"text_a","type":"STRING","link":355,"widget":{"name":"text_a"}},{"name":"text_b","type":"STRING","link":356,"widget":{"name":"text_b"}},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"}},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"}}],"outputs":[{"name":"STRING","type":"STRING","links":[358],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":["","true","","","",""],"color":"#222","bgcolor":"#000"},{"id":106,"type":"GetNode","pos":[3820,2020],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":5,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[387],"slot_index":0}],"title":"Get_Output_path","properties":{},"widgets_values":["Output_path"],"color":"#222","bgcolor":"#000"},{"id":38,"type":"GetNode","pos":[2870,1490],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":6,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[33],"slot_index":0}],"title":"Get_Input_Refined","properties":{},"widgets_values":["Input_Refined"],"color":"#222","bgcolor":"#000"},{"id":137,"type":"GetNode","pos":[2870,1450],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":7,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[247],"slot_index":0}],"title":"Get_ReActor_Out","properties":{},"widgets_values":["ReActor_Out"],"color":"#222","bgcolor":"#000"},{"id":143,"type":"GetNode","pos":[2880,1230],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":8,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[261]}],"title":"Get_Mask","properties":{},"widgets_values":["Mask"],"color":"#222","bgcolor":"#000"},{"id":144,"type":"GetNode","pos":[3710,1450],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":9,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[263],"slot_index":0}],"title":"Get_Mask","properties":{},"widgets_values":["Mask"],"color":"#222","bgcolor":"#000"},{"id":141,"type":"GetNode","pos":[3710,1490],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":10,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[259],"slot_index":0}],"title":"Get_Input_Refined","properties":{},"widgets_values":["Input_Refined"],"color":"#222","bgcolor":"#000"},{"id":251,"type":"VHS_SplitImages","pos":[6125.2933246831235,625.2927627226746],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":130,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":418}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[417],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":130,"type":"RebatchImages","pos":[533.1313369381688,375.0834376838166],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":67,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":431}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[237],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1],"color":"#222","bgcolor":"#000"},{"id":64,"type":"SetNode","pos":[703.1313369381684,375.0834376838166],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":84,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":237,"slot_index":0}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Input_Refined","properties":{"previousName":""},"widgets_values":["Input_Refined"],"color":"#222","bgcolor":"#000"},{"id":233,"type":"UltralyticsDetectorProvider","pos":[2801.4726223409566,211.06176946915983],"size":{"0":315,"1":78},"flags":{},"order":11,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[398],"shape":3,"slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":232,"type":"BboxDetectorSEGS","pos":[3301.4726223409566,391.0617694691607],"size":{"0":400,"1":212},"flags":{},"order":79,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":398},{"name":"image","type":"IMAGE","link":399},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[400],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BboxDetectorSEGS"},"widgets_values":[0.5,10,3,10,"all"]},{"id":247,"type":"MaskListToMaskBatch","pos":[3811.472622340954,491.06176946916077],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":109,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":414}],"outputs":[{"name":"MASK","type":"MASK","links":[412],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskListToMaskBatch"},"color":"#222","bgcolor":"#000"},{"id":243,"type":"VHS_SplitMasks","pos":[3861.472622340953,561.0617694691609],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":115,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":412}],"outputs":[{"name":"MASK_A","type":"MASK","links":[415],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"MASK_B","type":"MASK","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitMasks"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":260,"type":"GetNode","pos":[4115.293324683123,425.2927627226744],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":12,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[427],"slot_index":0}],"title":"Get_ReActor_Out","properties":{},"widgets_values":["ReActor_Out"],"color":"#222","bgcolor":"#000"},{"id":242,"type":"VHS_SplitImages","pos":[4575.2933246831235,555.2927627226746],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":123,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":411}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[408],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":249,"type":"ImageListToImageBatch","pos":[4515.2933246831235,605.2927627226746],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":121,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":416}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[411],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageListToImageBatch"},"color":"#222","bgcolor":"#000"},{"id":236,"type":"Cut By Mask","pos":[4445.2933246831235,395.2927627226743],"size":{"0":300,"1":122},"flags":{"collapsed":false},"order":118,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":427},{"name":"mask","type":"IMAGE","link":436},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":null,"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[396,416],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Cut By Mask"},"widgets_values":[0,0]},{"id":230,"type":"MediaPipe-FaceMeshPreprocessor","pos":[4795.2933246831235,395.2927627226743],"size":{"0":315,"1":82},"flags":{},"order":120,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":396}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[395],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MediaPipe-FaceMeshPreprocessor"},"widgets_values":[4,0.1],"color":"#772db4","bgcolor":"#8b41c8"},{"id":231,"type":"SegsToCombinedMask","pos":[5555.2933246831235,425.2927627226744],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":124,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":397}],"outputs":[{"name":"MASK","type":"MASK","links":[410],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"},"color":"#222","bgcolor":"#000"},{"id":241,"type":"MaskToImage","pos":[5585.2933246831235,485.2927627226744],"size":{"0":160,"1":30},"flags":{"collapsed":true},"order":126,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":410}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[402],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"},"color":"#222","bgcolor":"#000"},{"id":254,"type":"GetImageSize+","pos":[5645.2933246831235,205.29276272267427],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":51,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":426}],"outputs":[{"name":"width","type":"INT","links":[420],"shape":3,"slot_index":0},{"name":"height","type":"INT","links":[421],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GetImageSize+"},"color":"#222","bgcolor":"#000"},{"id":259,"type":"GetNode","pos":[5645.2933246831235,165.29276272267427],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":13,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[426],"slot_index":0}],"title":"Get_ReActor_Out","properties":{},"widgets_values":["ReActor_Out"],"color":"#222","bgcolor":"#000"},{"id":235,"type":"Paste By Mask","pos":[5975.2933246831235,405.29276272267435],"size":{"0":342.5999755859375,"1":118},"flags":{},"order":127,"mode":0,"inputs":[{"name":"image_base","type":"IMAGE","link":401},{"name":"image_to_paste","type":"IMAGE","link":402},{"name":"mask","type":"IMAGE","link":437,"slot_index":2},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[419,424],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Paste By Mask"},"widgets_values":["source_size_unmasked"]},{"id":240,"type":"Reroute","pos":[5855.2933246831235,355.29276272267424],"size":[75,26],"flags":{},"order":88,"mode":0,"inputs":[{"name":"","type":"*","link":409}],"outputs":[{"name":"","type":"IMAGE","links":[401],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#1577c2","bgcolor":"#298bd6"},{"id":253,"type":"Image Blank","pos":[5655.2933246831235,245.2927627226743],"size":{"0":320,"1":150},"flags":{"collapsed":true},"order":71,"mode":0,"inputs":[{"name":"width","type":"INT","link":420,"widget":{"name":"width"}},{"name":"height","type":"INT","link":421,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[409],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Blank"},"widgets_values":[512,512,0,0,0],"color":"#222","bgcolor":"#000"},{"id":258,"type":"ImageToMask","pos":[6425.2933246831235,435.2927627226744],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":129,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":424}],"outputs":[{"name":"MASK","type":"MASK","links":[425],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"],"color":"#222","bgcolor":"#000"},{"id":256,"type":"SetNode","pos":[6445.2933246831235,485.2927627226744],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":131,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":425}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Face_Mask","properties":{"previousName":"Face_Mask"},"widgets_values":["Face_Mask"],"color":"#222","bgcolor":"#000"},{"id":12,"type":"ReActorFaceSwap","pos":[2203.7778494787713,146.51498140193627],"size":{"0":315,"1":338},"flags":{},"order":52,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":308,"label":"Base_Images"},{"name":"source_image","type":"IMAGE","link":208,"label":"Input_Face"},{"name":"face_model","type":"FACE_MODEL","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[158,273,386],"shape":3,"slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer.pth",1,0.5,"no","no","0","0",1]},{"id":97,"type":"GetNode","pos":[1943.777849478764,176.5149814019363],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":14,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[308],"slot_index":0}],"title":"Get_Original_Image","properties":{},"widgets_values":["Original_Image"],"color":"#6d3700","bgcolor":"#814b0e"},{"id":99,"type":"GetNode","pos":[1943.777849478764,216.51498140193644],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":15,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[208],"slot_index":0}],"title":"Get_Input_Face","properties":{},"widgets_values":["Input_Face"],"color":"#006676","bgcolor":"#007a8a"},{"id":40,"type":"MaskListToMaskBatch","pos":[2430,1750],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":92,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":42}],"outputs":[{"name":"MASK","type":"MASK","links":[268],"shape":3,"slot_index":0}],"title":" ","properties":{"Node name for S&R":"MaskListToMaskBatch"},"color":"#222","bgcolor":"#000"},{"id":147,"type":"PreviewImage","pos":[3780,1780],"size":{"0":210,"1":250},"flags":{},"order":116,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":266}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":128,"type":"ImageCompositeMasked","pos":[3710,1270],"size":{"0":315,"1":146},"flags":{},"order":86,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":259,"slot_index":0},{"name":"source","type":"IMAGE","link":252},{"name":"mask","type":"MASK","link":263}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[279,311],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,true]},{"id":239,"type":"PreviewImage","pos":[4485.2933246831235,665.2927627226746],"size":{"0":210,"1":250},"flags":{},"order":125,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":408}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":248,"type":"MaskPreview+","pos":[3781.472622340954,621.0617694691604],"size":{"0":210,"1":250},"flags":{"collapsed":false},"order":119,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":415,"slot_index":0}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":218,"type":"Text String","pos":[2305.6065555664763,1051.0177307786046],"size":{"0":315,"1":190},"flags":{"collapsed":true},"order":53,"mode":2,"inputs":[{"name":"text","type":"STRING","link":383,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":[384],"shape":3,"slot_index":0},{"name":"STRING","type":"STRING","links":[385],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":[],"shape":3,"slot_index":2},{"name":"STRING","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"Text String"},"widgets_values":["F:\\#Projects\\1) SD Animation\\12) GTR","\\1_Original_Swapped","",""],"color":"#222","bgcolor":"#000"},{"id":145,"type":"PreviewImage","pos":[3350,1780],"size":{"0":210,"1":250},"flags":{},"order":111,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":264}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":151,"type":"ImageListToImageBatch","pos":[3470,1740],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":87,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":277}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[278],"shape":3,"slot_index":0}],"title":".","properties":{"Node name for S&R":"ImageListToImageBatch"},"color":"#222","bgcolor":"#000"},{"id":216,"type":"SaveImageCustomNode","pos":[2285.6065555664763,1191.0177307786046],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":90,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":386},{"name":"subfolder_dir","type":"STRING","link":382,"widget":{"name":"subfolder_dir"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":3,"slot_index":0}],"title":"Swapped Original","properties":{"Node name for S&R":"SaveImageCustomNode"},"widgets_values":["Swapped",""],"color":"#371774","bgcolor":"#4b2b88"},{"id":220,"type":"GetNode","pos":[2285.6065555664763,1011.0177307786046],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":16,"mode":2,"outputs":[{"name":"STRING","type":"STRING","links":[383],"slot_index":0}],"title":"Get_Output_path","properties":{},"widgets_values":["Output_path"],"color":"#222","bgcolor":"#000"},{"id":200,"type":"GetNode","pos":[2350,2300],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":17,"mode":2,"outputs":[{"name":"STRING","type":"STRING","links":[362],"slot_index":0}],"title":"Get_Output_path","properties":{},"widgets_values":["Output_path"],"color":"#222","bgcolor":"#000"},{"id":194,"type":"GetNode","pos":[2965.837627959375,2270.3145476937502],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":18,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[357],"slot_index":0}],"title":"Get_Output_path","properties":{},"widgets_values":["Output_path"],"color":"#222","bgcolor":"#000"},{"id":250,"type":"PreviewImage","pos":[6045.2933246831235,685.2927627226746],"size":{"0":250,"1":250},"flags":{},"order":132,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":417}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":101,"type":"SetNode","pos":[2546.479678625629,261.36050181233895],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":72,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":158}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_ReActor_Out","properties":{"previousName":"ReActor_Out"},"widgets_values":["ReActor_Out"],"color":"#222","bgcolor":"#000"},{"id":252,"type":"ImageListToImageBatch","pos":[6055.2933246831235,585.2927627226746],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":128,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":419}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[418],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageListToImageBatch"},"color":"#222","bgcolor":"#000"},{"id":227,"type":"GetNode","pos":[2270,1380],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":19,"mode":0,"outputs":[{"name":"MASK","type":"MASK","links":[394],"slot_index":0}],"title":"Get_Face_Mask","properties":{},"widgets_values":["Face_Mask"],"color":"#222","bgcolor":"#000"},{"id":105,"type":"SetNode","pos":[1528.058845791562,287.51810717778534],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":63,"mode":0,"inputs":[{"name":"STRING","type":"STRING","link":164}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Output_path","properties":{"previousName":"Output_path"},"widgets_values":["Output_path"],"color":"#222","bgcolor":"#000"},{"id":234,"type":"SegsToCombinedMask","pos":[3795.2933246831203,425.2927627226744],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":97,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":400}],"outputs":[{"name":"MASK","type":"MASK","links":[407,414],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"},"color":"#222","bgcolor":"#000"},{"id":238,"type":"MaskToImage","pos":[4115.293324683123,475.2927627226744],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":108,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":407}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[435],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"},"color":"#222","bgcolor":"#000"},{"id":265,"type":"SetNode","pos":[4115.293324683123,525.2927627226746],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":114,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":435}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[436],"slot_index":0}],"title":"Set_Cropped_Region_Mask","properties":{"previousName":"Cropped_Region_Mask"},"widgets_values":["Cropped_Region_Mask"],"color":"#222","bgcolor":"#000"},{"id":132,"type":"PreviewImage","pos":[2930,1800],"size":{"0":220,"1":250},"flags":{},"order":99,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":242}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":10,"type":"LoadImage","pos":[938.0588457915622,187.51810717778568],"size":[370,310],"flags":{},"order":20,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[155],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"title":"3) Input Any Refined Image with Face Visible","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["Refined_Batch_1_0078.png","image"],"color":"#006676","bgcolor":"#007a8a"},{"id":131,"type":"VHS_SplitImages","pos":[2286.479678625629,571.360501812339],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":89,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":274}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[241],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":2},"color":"#222","bgcolor":"#000"},{"id":268,"type":"Note","pos":[-670,60],"size":{"0":560,"1":60},"flags":{},"order":21,"mode":0,"title":"File Name + Special Feature","properties":{"text":""},"widgets_values":["#4_0 - LipSync - Swapper - ReActor"],"color":"#84116b","bgcolor":"#98257f","shape":4},{"id":189,"type":"MathExpression|pysssss","pos":[467.5187438964845,979.3341142578131],"size":{"0":400,"1":200},"flags":{"collapsed":true},"order":78,"mode":0,"inputs":[{"name":"a","type":"INT,FLOAT,IMAGE,LATENT","link":350},{"name":"b","type":"INT,FLOAT,IMAGE,LATENT","link":347},{"name":"c","type":"INT,FLOAT,IMAGE,LATENT","link":348}],"outputs":[{"name":"INT","type":"INT","links":[351,376],"shape":3,"slot_index":0},{"name":"FLOAT","type":"FLOAT","links":null,"shape":3,"slot_index":1}],"title":"Math","properties":{"Node name for S&R":"MathExpression|pysssss"},"widgets_values":["(((c/b)*a)*b) "],"color":"#222","bgcolor":"#000"},{"id":213,"type":"ConvertAny2String","pos":[477.51874389648447,1139.3341142578136],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":96,"mode":0,"inputs":[{"name":"input1","type":"*","link":376}],"outputs":[{"name":"STRING","type":"STRING","links":[455],"shape":3,"slot_index":0}],"title":" ","properties":{"Node name for S&R":"ConvertAny2String"},"color":"#222","bgcolor":"#000"},{"id":60,"type":"SetNode","pos":[1017.8237968750009,950.164276855469],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":98,"mode":0,"inputs":[{"name":"INT","type":"INT","link":461}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Batch_Range","properties":{"previousName":""},"widgets_values":["Batch_Range"],"color":"#222","bgcolor":"#000"},{"id":274,"type":"Reroute","pos":[601.5701010119625,1386.6555904296883],"size":[75,26],"flags":{},"order":60,"mode":2,"inputs":[{"name":"","type":"*","link":451}],"outputs":[{"name":"","type":"INT","links":null}],"properties":{"showOutputText":false,"horizontal":false},"color":"#046d0b","bgcolor":"#18811f"},{"id":276,"type":"Reroute","pos":[606.3075720202631,1492.5806148437512],"size":[75,26],"flags":{},"order":61,"mode":2,"inputs":[{"name":"","type":"*","link":453}],"outputs":[{"name":"","type":"INT","links":null,"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#630000","bgcolor":"#770e0e"},{"id":187,"type":"GetNode","pos":[477.51874389648447,1099.3341142578136],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":22,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[345],"slot_index":0}],"title":" ","properties":{},"widgets_values":["Batch_Range"],"color":"#222","bgcolor":"#000"},{"id":58,"type":"Int Literal","pos":[477.51874389648447,1019.3341142578136],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":95,"mode":0,"inputs":[{"name":"int","type":"INT","link":351,"widget":{"name":"int"}}],"outputs":[{"name":"INT","type":"INT","links":[442],"shape":3,"slot_index":0}],"title":" ","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[0],"color":"#222","bgcolor":"#000"},{"id":188,"type":"ConvertAny2Int","pos":[477.51874389648447,1059.3341142578136],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":58,"mode":0,"inputs":[{"name":"input1","type":"*","link":345}],"outputs":[{"name":"INT","type":"INT","links":[347,348],"shape":3,"slot_index":0}],"title":" ","properties":{"Node name for S&R":"ConvertAny2Int"},"color":"#222","bgcolor":"#000"},{"id":278,"type":"ShowText|pysssss","pos":[97.51874389648432,1079.3341142578136],"size":{"0":270,"1":80},"flags":{},"order":107,"mode":0,"inputs":[{"name":"text","type":"STRING","link":455,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Automatic Skip Frames Display","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","0"],"color":"#591212","bgcolor":"#6d2626"},{"id":98,"type":"SetNode","pos":[1160,550],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":57,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":155}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Input_Face","properties":{"previousName":"Input_Face"},"widgets_values":["Input_Face"],"color":"#222","bgcolor":"#000"},{"id":266,"type":"Note","pos":[1020,90],"size":{"0":210,"1":58},"flags":{},"order":23,"mode":0,"title":"Input Image Note","properties":{"text":""},"widgets_values":["Closed mouth reference."],"color":"#171717","bgcolor":"#2b2b2b"},{"id":279,"type":"Note","pos":[4810,110],"size":{"0":290,"1":190},"flags":{},"order":24,"mode":0,"title":"Crashing Error","properties":{"text":""},"widgets_values":["If your workflow is crashing here, then MediaPipe is not able to detect a face here. \n\nThis error can also happen when there is a body turn around, or overlapping. \n \nManually skip this portion... It can't be swapped.\n\nCopy the refined images in place of these skipped ones.  \n\n"],"color":"#542222","bgcolor":"#683636"},{"id":280,"type":"Note","pos":[5150,800],"size":{"0":320,"1":310},"flags":{},"order":25,"mode":0,"title":"Facial Detection","properties":{"text":""},"widgets_values":["1) Eyes, Mouth, Pupil, Eyebrows Buttons: \n\nEnable them if you want to swap them too. Mouth is enable by default. \n\n\n2) Face: Do Not Enable this, it makes a line around the face borders. And also gives incomplete fill, which will look flickering after swap.  \n\n\n\n*Crop Factor - Crops the Face Area, Leave it at 20.\n\n*Bbbox fill - It will make a box around the Face, Do not enable this, it will look ugly after swapping. \n\n*Dilation - Expands the mask borders. (10 - 20 is fine)\n\n\n \n"],"color":"#6615a8","bgcolor":"#7a29bc"},{"id":36,"type":"GrowMask","pos":[2270,1420],"size":{"0":315,"1":82},"flags":{"collapsed":false},"order":56,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":394}],"outputs":[{"name":"MASK","type":"MASK","links":[37],"shape":3,"slot_index":0}],"title":"Expand Mask","properties":{"Node name for S&R":"GrowMask"},"widgets_values":[0,true],"color":"#19671f","bgcolor":"#2d7b33"},{"id":281,"type":"Note","pos":[1960,1460],"size":[290,130],"flags":{},"order":26,"mode":0,"title":"Mask Grow and Blur","properties":{"text":""},"widgets_values":["1) You can additionally Expand with this, although the dilations from above has already did the expansion.\n\n2) Blurring the mask give soft blending between the edges. (20 is default, blurring is controlled by \"kernel size\")  \n "],"color":"#19671f","bgcolor":"#2d7b33"},{"id":142,"type":"SetNode","pos":[2470,1690],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":93,"mode":0,"inputs":[{"name":"MASK","type":"MASK","link":305}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Mask","properties":{"previousName":"Mask"},"widgets_values":["Mask"],"color":"#222","bgcolor":"#000"},{"id":136,"type":"MaskPreview+","pos":[2330,1800],"size":{"0":200,"1":250},"flags":{"collapsed":false},"order":112,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":245}],"properties":{"Node name for S&R":"MaskPreview+"}},{"id":177,"type":"SaveImageCustomNode","pos":[2380,2460],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":105,"mode":2,"inputs":[{"name":"images","type":"IMAGE","link":334},{"name":"subfolder_dir","type":"STRING","link":365,"widget":{"name":"subfolder_dir"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":3,"slot_index":0}],"title":"Mask Save","properties":{"Node name for S&R":"SaveImageCustomNode"},"widgets_values":["Mask",""],"color":"#237729","bgcolor":"#378b3d"},{"id":179,"type":"MaskToImage","pos":[2340,2420],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":94,"mode":2,"inputs":[{"name":"mask","type":"MASK","link":366}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[334],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"},"color":"#222","bgcolor":"#000"},{"id":199,"type":"Text Concatenate","pos":[2350,2380],"size":{"0":315,"1":178},"flags":{"collapsed":true},"order":75,"mode":2,"inputs":[{"name":"text_a","type":"STRING","link":363,"widget":{"name":"text_a"}},{"name":"text_b","type":"STRING","link":364,"widget":{"name":"text_b"}},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"}},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"}}],"outputs":[{"name":"STRING","type":"STRING","links":[365],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":["","true","","","",""],"color":"#222","bgcolor":"#000"},{"id":198,"type":"Text String","pos":[2370,2340],"size":{"0":315,"1":190},"flags":{"collapsed":true},"order":54,"mode":2,"inputs":[{"name":"text","type":"STRING","link":362,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":[363],"shape":3,"slot_index":0},{"name":"STRING","type":"STRING","links":[364],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":[],"shape":3,"slot_index":2},{"name":"STRING","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"Text String"},"widgets_values":["F:\\#Projects\\1) SD Animation\\12) GTR","\\2_Masks","",""],"color":"#222","bgcolor":"#000"},{"id":282,"type":"Note","pos":[1940,2350],"size":[260,70],"flags":{},"order":27,"mode":0,"title":"Optional Mask Saving","properties":{"text":""},"widgets_values":["Unmute this Group, and it will also export a mask folder, if you want to color correct in post."],"color":"#19671f","bgcolor":"#2d7b33"},{"id":192,"type":"Text String","pos":[2990,2310],"size":{"0":315,"1":190},"flags":{"collapsed":true},"order":55,"mode":0,"inputs":[{"name":"text","type":"STRING","link":357,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":[355],"shape":3,"slot_index":0},{"name":"STRING","type":"STRING","links":[356],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":[],"shape":3,"slot_index":2},{"name":"STRING","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"Text String"},"widgets_values":["F:\\#Projects\\1) SD Animation\\12) GTR","\\3_Swapped_A","",""],"color":"#222","bgcolor":"#000"},{"id":180,"type":"SaveImageCustomNode","pos":[2990,2400],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":91,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":337},{"name":"subfolder_dir","type":"STRING","link":358,"widget":{"name":"subfolder_dir"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":3}],"title":"Swapped_A","properties":{"Node name for S&R":"SaveImageCustomNode"},"widgets_values":["Swapped_A",""],"color":"#0a549a","bgcolor":"#1e68ae"},{"id":165,"type":"SaveImageCustomNode","pos":[3795.136785333806,2382.6817294034095],"size":{"0":220,"1":290},"flags":{"collapsed":true},"order":101,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":311},{"name":"subfolder_dir","type":"STRING","link":390,"widget":{"name":"subfolder_dir"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":3}],"title":"Swapped_B","properties":{"Node name for S&R":"SaveImageCustomNode"},"widgets_values":["Swapped_B",""],"color":"#2147a2","bgcolor":"#355bb6"},{"id":222,"type":"Text Concatenate","pos":[3785.136785333806,2342.6817294034095],"size":{"0":315,"1":178},"flags":{"collapsed":true},"order":68,"mode":0,"inputs":[{"name":"text_a","type":"STRING","link":388,"widget":{"name":"text_a"}},{"name":"text_b","type":"STRING","link":389,"widget":{"name":"text_b"}},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"}},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"}}],"outputs":[{"name":"STRING","type":"STRING","links":[390],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":["","true","","","",""],"color":"#222","bgcolor":"#000"},{"id":221,"type":"Text String","pos":[3805.136785333806,2302.6817294034095],"size":{"0":315,"1":190},"flags":{"collapsed":true},"order":49,"mode":0,"inputs":[{"name":"text","type":"STRING","link":387,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":[388],"shape":3,"slot_index":0},{"name":"STRING","type":"STRING","links":[389],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":[],"shape":3,"slot_index":2},{"name":"STRING","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"Text String"},"widgets_values":["F:\\#Projects\\1) SD Animation\\12) GTR","\\4_Swapped_B","",""],"color":"#222","bgcolor":"#000"},{"id":283,"type":"Note","pos":[2860,2520],"size":[370,200],"flags":{},"order":28,"mode":0,"title":"Swapped_A","properties":{"text":""},"widgets_values":["*This has more accurate mouth capture, but no color matching.\n\n*You can use masks to color match in after effects and then export those color corrected frames and then Finally render in face fix file for more harmony.    \n\n\n\n \n\n*You can manually color match the Original Frames with the Refined rendered frames to Get both Sync and Color Accuracy which will be then rendered in the #4_1_Face Fix workflow."],"color":"#106b48","bgcolor":"#247f5c"},{"id":284,"type":"Note","pos":[3670,2520],"size":{"0":370,"1":200},"flags":{},"order":29,"mode":0,"title":"Swapped_B","properties":{"text":""},"widgets_values":["*This has less accurate mouth capture, but good color matching.\n\nUse this, if you do not need accuracy. Then Finally render them in face fix for getting harmony/Blending. \n\nThe swapped edges will be blended more better in the face fix workflow.  \n\n  \n\n"],"color":"#106b48","bgcolor":"#247f5c"},{"id":245,"type":"GetNode","pos":[5670,550],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":30,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[437],"slot_index":0}],"title":"Get_Cropped_Region_Mask","properties":{},"widgets_values":["Cropped_Region_Mask"],"color":"#222","bgcolor":"#000"},{"id":287,"type":"Note","pos":[6380,690],"size":{"0":210,"1":90},"flags":{},"order":31,"mode":0,"title":"3) Process","properties":{"text":""},"widgets_values":["Here, for example only masks of mouth are procced and placed back to the original cropped out area."],"color":"#000000","bgcolor":"#0a0a0a"},{"id":286,"type":"Note","pos":[4110,690],"size":{"0":210,"1":90},"flags":{},"order":32,"mode":0,"title":"2) Process","properties":{"text":""},"widgets_values":["Here, Face is detected for MediaPipe Processor, \n\nit can't handle far away faces, so cropping is done first.  "],"color":"#000000","bgcolor":"#0a0a0a"},{"id":288,"type":"Note","pos":[1960,1880],"size":[210,60],"flags":{},"order":33,"mode":0,"title":"4) Process","properties":{"text":""},"widgets_values":["Masking is manipulated here. "],"color":"#000000","bgcolor":"#0a0a0a"},{"id":285,"type":"Note","pos":[1970,640],"size":[210,90],"flags":{},"order":34,"mode":0,"title":"1) Process","properties":{"text":""},"widgets_values":["The Original Frames are being swapped by a refined frame, by this stylized face is swapped with the original\n*Preserving the LipSync"],"color":"#000000","bgcolor":"#0a0a0a"},{"id":237,"type":"Reroute","pos":[3190,500],"size":[75,26],"flags":{},"order":59,"mode":0,"inputs":[{"name":"","type":"*","link":423}],"outputs":[{"name":"","type":"IMAGE","links":[399]}],"properties":{"showOutputText":false,"horizontal":false},"color":"#1577c2","bgcolor":"#298bd6"},{"id":255,"type":"GetNode","pos":[2960,600],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":35,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[423],"slot_index":0}],"title":"Get_ReActor_Out","properties":{},"widgets_values":["ReActor_Out"],"color":"#222","bgcolor":"#000"},{"id":289,"type":"Note","pos":[2930,1540],"size":[220,100],"flags":{},"order":36,"mode":0,"title":"5) Process","properties":{"text":""},"widgets_values":["Now Every Stylized Face with Preserved Lip Sync from #1 is Masked out and Put on Refined images. \n\nThis is before color matching. "],"color":"#000000","bgcolor":"#0a0a0a"},{"id":138,"type":"GetNode","pos":[3300,1650],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":37,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[310],"slot_index":0}],"title":"Get_Input_Refined","properties":{},"widgets_values":["Input_Refined"],"color":"#222","bgcolor":"#000"},{"id":273,"type":"Int Literal","pos":[151.57010101196298,1326.6555904296883],"size":{"0":240,"1":60},"flags":{"collapsed":false},"order":38,"mode":2,"outputs":[{"name":"INT","type":"INT","links":[451],"shape":3,"slot_index":0}],"title":"Batch Range","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[10],"color":"#1e5822","bgcolor":"#326c36"},{"id":275,"type":"Int Literal","pos":[156.30757202026376,1522.5806148437512],"size":{"0":240,"1":60},"flags":{"collapsed":false},"order":39,"mode":2,"outputs":[{"name":"INT","type":"INT","links":[453],"shape":3,"slot_index":0}],"title":"Skip Frames","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[0],"color":"#5c1a1a","bgcolor":"#702e2e"},{"id":59,"type":"SetNode","pos":[1020,1020],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":117,"mode":0,"inputs":[{"name":"INT","type":"INT","link":463}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Skip_Frames","properties":{"previousName":""},"widgets_values":["Skip_Frames"],"color":"#222","bgcolor":"#000"},{"id":271,"type":"Reroute","pos":[627.5187438964844,1049.3341142578136],"size":[75,26],"flags":{},"order":106,"mode":0,"inputs":[{"name":"","type":"*","link":442,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[462],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#630000","bgcolor":"#770e0e"},{"id":272,"type":"Reroute","pos":[617.5187438964844,859.3341142578131],"size":[75,26],"flags":{},"order":62,"mode":0,"inputs":[{"name":"","type":"*","link":449,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[460],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#046d0b","bgcolor":"#18811f"},{"id":292,"type":"Int Literal","pos":[870,930],"size":[270,60],"flags":{"collapsed":true},"order":80,"mode":0,"inputs":[{"name":"int","type":"INT","link":460,"widget":{"name":"int"}}],"outputs":[{"name":"INT","type":"INT","links":[461],"shape":3,"slot_index":0}],"title":" ","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[10],"color":"#046d0b","bgcolor":"#18811f"},{"id":293,"type":"Int Literal","pos":[870,1030],"size":{"0":270,"1":60},"flags":{"collapsed":true},"order":113,"mode":0,"inputs":[{"name":"int","type":"INT","link":462,"widget":{"name":"int"}}],"outputs":[{"name":"INT","type":"INT","links":[463],"shape":3,"slot_index":0}],"title":" ","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[10],"color":"#630000","bgcolor":"#770e0e"},{"id":126,"type":"ReActorFaceSwap","pos":[3300,1270],"size":{"0":315,"1":338},"flags":{"collapsed":false},"order":70,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":309,"slot_index":0,"label":"Base_Images"},{"name":"source_image","type":"IMAGE","link":310,"slot_index":1,"label":"Input_Face"},{"name":"face_model","type":"FACE_MODEL","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[252,277],"shape":3,"slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer.pth",1,0.5,"no","no","0","0",1]},{"id":291,"type":"Note","pos":[3750,1540],"size":[260,120],"flags":{},"order":40,"mode":0,"title":"6) Process","properties":{"text":""},"widgets_values":["Now Every Images from #5 is color matched by the reactor node while preserving the lip sync to some extent. \n\nTry decreasing the Codeformer weight if it helps or not. but it will introduce flickering.  \n"],"color":"#000000","bgcolor":"#0a0a0a"},{"id":229,"type":"MediaPipeFaceMeshToSEGS","pos":[5155.2933246831235,395.2927627226743],"size":{"0":315,"1":346},"flags":{},"order":122,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":395}],"outputs":[{"name":"SEGS","type":"SEGS","links":[397],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MediaPipeFaceMeshToSEGS"},"widgets_values":[20,false,50,1,15,false,true,false,false,false,false,false,false],"color":"#772db4","bgcolor":"#8b41c8"},{"id":123,"type":"PreviewImage","pos":[2250,610],"size":{"0":210,"1":250},"flags":{},"order":103,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":241}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":168,"type":"Seed Generator","pos":[97.51874389648432,949.3341142578133],"size":{"0":270,"1":82},"flags":{"pinned":false},"order":41,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[350],"shape":3,"slot_index":0}],"title":"Lap Counter","properties":{"Node name for S&R":"Seed Generator"},"widgets_values":[0,"fixed"],"color":"#8e0101","bgcolor":"#a21515"},{"id":267,"type":"Note","pos":[-670,170],"size":[560,230],"flags":{},"order":42,"mode":0,"title":"#4 LipSync Swapper v1.0","properties":{"text":""},"widgets_values":["How to Use: \n\n1) Input Original and Refined Images in the 1 and 2 Directory Nodes.\n\n2) Input 1 Single image from the Refined images, which has closed mouth for better results.  \n\n3) Enter Output folder location. \n\n5) Enter Batch Range (10 - 20 is fine)\n\n6) Lap Counter skip frames automatically when set to \"increment\" for final rendering. Use Manual when needed. \n\n7) [Optional] Change settings if you want, default is good for close up and medium shots.  \n\n\n\n"],"color":"#8c4913","bgcolor":"#a05d27","shape":4},{"id":294,"type":"Note","pos":[-670,450],"size":[560,260],"flags":{},"order":43,"mode":0,"title":"CONS","properties":{"text":""},"widgets_values":["1) This workflow will only work for Realistic or Semi realistic Renders only; it will fail on cartoon or 2d anime faces.\n\n2) Far Shots may sometimes fail or produce bad results.\n\n3) If face is not there/blurred or hidden by hands or a body turnaround is happening, it will give error, manually skip those frames after error.  \n\n4) If the Original Images have very different colorskin, Harsh lighting change then it will be also visible in Final Output, Color Match approximately the original frames to the refined then use.\n\n\nFor Example, you have realistic hulk face in refined but original frames are human skin, then Output will have Hulk face with human lips. To fix this you have 2 options: \n A - Color Match the original to green or near green then use this workflow. \n B - By Unmuting the Masks saving option and using these masks to color correct after the final output \n\nThen the final Output is harmonized by rendering through the #4_0 Face Fix workflow"],"color":"#561515","bgcolor":"#6a2929","shape":4},{"id":290,"type":"Note","pos":[2210,-250],"size":[310,190],"flags":{},"order":44,"mode":0,"title":"ReActor Github + Codeformer","properties":{"text":""},"widgets_values":["Github: https://github.com/Gourieff/comfyui-reactor-node\n\nCodeFormer Model: \n\nhttps://github.com/sczhou/CodeFormer/releases/download/v0.1.0/codeformer.pth\n\n\n\nCodeFormer Weight Default is 0.5 Which is good for realistic Renders. "],"color":"#361b56","bgcolor":"#4a2f6a"},{"id":57,"type":"Int Literal","pos":[97.51874389648432,839.3341142578129],"size":{"0":270,"1":60},"flags":{"collapsed":false},"order":45,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[449],"shape":3,"slot_index":0}],"title":"Batch Range","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[10],"color":"#1e5822","bgcolor":"#326c36"},{"id":3,"type":"LoadImagesFromDirectory","pos":[140,190],"size":{"0":340,"1":140},"flags":{},"order":47,"mode":0,"inputs":[{"name":"image_load_cap","type":"INT","link":1,"widget":{"name":"image_load_cap"},"slot_index":0},{"name":"start_index","type":"INT","link":2,"widget":{"name":"start_index"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[4,235],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3},{"name":"INT","type":"INT","links":null,"shape":3}],"title":"1) Original Images","properties":{"Node name for S&R":"LoadImagesFromDirectory"},"widgets_values":["F:\\#Projects\\1) SD Animation\\29) Face - love me\\1) Frames",50,0],"color":"#6d3700","bgcolor":"#814b0e"},{"id":261,"type":"LoadImagesFromDirectory","pos":[523.1313369381689,185.08343768381786],"size":{"0":320,"1":150},"flags":{},"order":48,"mode":0,"inputs":[{"name":"image_load_cap","type":"INT","link":429,"widget":{"name":"image_load_cap"},"slot_index":0},{"name":"start_index","type":"INT","link":430,"widget":{"name":"start_index"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[428,431],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3},{"name":"INT","type":"INT","links":null,"shape":3}],"title":"2) Refined Images","properties":{"Node name for S&R":"LoadImagesFromDirectory"},"widgets_values":["F:\\#Projects\\1) SD Animation\\29) Face - love me\\Renders\\2) Refined",0,0],"color":"#074384","bgcolor":"#1b5798"},{"id":62,"type":"String to Text","pos":[1348.058845791562,187.51810717778568],"size":{"0":340,"1":60},"flags":{},"order":46,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[164],"shape":3,"slot_index":0}],"title":"4) Output Images Folder","properties":{"Node name for S&R":"String to Text"},"widgets_values":["F:\\#Projects\\1) SD Animation\\29) Face - love me\\Renders\\4) Test Lips"],"color":"#450075","bgcolor":"#590189"}],"links":[[1,5,0,3,0,"INT"],[2,4,0,3,1,"INT"],[3,8,0,7,0,"IMAGE"],[4,3,0,8,0,"IMAGE"],[33,38,0,33,0,"IMAGE"],[37,36,0,35,0,"MASK"],[42,35,0,40,0,"MASK"],[155,10,0,98,0,"*"],[158,12,0,101,0,"*"],[164,62,0,105,0,"*"],[208,99,0,12,1,"IMAGE"],[235,3,0,27,0,"IMAGE"],[236,27,0,96,0,"IMAGE"],[237,130,0,64,0,"IMAGE"],[241,131,0,123,0,"IMAGE"],[242,133,0,132,0,"IMAGE"],[245,134,0,136,0,"MASK"],[247,137,0,33,1,"IMAGE"],[252,126,0,128,1,"IMAGE"],[259,141,0,128,0,"IMAGE"],[261,143,0,33,2,"MASK"],[263,144,0,128,2,"MASK"],[264,146,0,145,0,"IMAGE"],[266,148,0,147,0,"IMAGE"],[268,40,0,134,0,"MASK"],[273,12,0,149,0,"IMAGE"],[274,149,0,131,0,"IMAGE"],[275,33,0,150,0,"IMAGE"],[276,150,0,133,0,"IMAGE"],[277,126,0,151,0,"IMAGE"],[278,151,0,146,0,"IMAGE"],[279,128,0,152,0,"IMAGE"],[280,152,0,148,0,"IMAGE"],[305,35,0,142,0,"MASK"],[308,97,0,12,0,"IMAGE"],[309,33,0,126,0,"IMAGE"],[310,138,0,126,1,"IMAGE"],[311,128,0,165,0,"IMAGE"],[334,179,0,177,0,"IMAGE"],[337,33,0,180,0,"IMAGE"],[338,183,0,182,0,"IMAGE"],[345,187,0,188,0,"*"],[347,188,0,189,1,"INT,FLOAT,IMAGE,LATENT"],[348,188,0,189,2,"INT,FLOAT,IMAGE,LATENT"],[350,168,0,189,0,"INT,FLOAT,IMAGE,LATENT"],[351,189,0,58,0,"INT"],[355,192,0,193,0,"STRING"],[356,192,1,193,1,"STRING"],[357,194,0,192,0,"STRING"],[358,193,0,180,1,"STRING"],[362,200,0,198,0,"STRING"],[363,198,0,199,0,"STRING"],[364,198,1,199,1,"STRING"],[365,199,0,177,1,"STRING"],[366,35,0,179,0,"MASK"],[376,189,0,213,0,"*"],[382,219,0,216,1,"STRING"],[383,220,0,218,0,"STRING"],[384,218,0,219,0,"STRING"],[385,218,1,219,1,"STRING"],[386,12,0,216,0,"IMAGE"],[387,106,0,221,0,"STRING"],[388,221,0,222,0,"STRING"],[389,221,1,222,1,"STRING"],[390,222,0,165,1,"STRING"],[394,227,0,36,0,"MASK"],[395,230,0,229,0,"IMAGE"],[396,236,0,230,0,"IMAGE"],[397,229,0,231,0,"SEGS"],[398,233,0,232,0,"BBOX_DETECTOR"],[399,237,0,232,1,"IMAGE"],[400,232,0,234,0,"SEGS"],[401,240,0,235,0,"IMAGE"],[402,241,0,235,1,"IMAGE"],[407,234,0,238,0,"MASK"],[408,242,0,239,0,"IMAGE"],[409,253,0,240,0,"*"],[410,231,0,241,0,"MASK"],[411,249,0,242,0,"IMAGE"],[412,247,0,243,0,"MASK"],[414,234,0,247,0,"MASK"],[415,243,0,248,0,"MASK"],[416,236,0,249,0,"IMAGE"],[417,251,0,250,0,"IMAGE"],[418,252,0,251,0,"IMAGE"],[419,235,0,252,0,"IMAGE"],[420,254,0,253,0,"INT"],[421,254,1,253,1,"INT"],[423,255,0,237,0,"*"],[424,235,0,258,0,"IMAGE"],[425,258,0,256,0,"*"],[426,259,0,254,0,"IMAGE"],[427,260,0,236,0,"IMAGE"],[428,261,0,183,0,"IMAGE"],[429,173,0,261,0,"INT"],[430,172,0,261,1,"INT"],[431,261,0,130,0,"IMAGE"],[435,238,0,265,0,"*"],[436,265,0,236,1,"IMAGE"],[437,245,0,235,2,"IMAGE"],[442,58,0,271,0,"*"],[449,57,0,272,0,"*"],[451,273,0,274,0,"*"],[453,275,0,276,0,"*"],[455,213,0,278,0,"STRING"],[460,272,0,292,0,"INT"],[461,292,0,60,0,"INT"],[462,271,0,293,0,"INT"],[463,293,0,59,0,"INT"]],"groups":[{"title":"2) Masking Face","bounding":[2746,21,3919,1106],"color":"#32417d","font_size":24,"locked":false},{"title":"0) Inputs","bounding":[11,16,1743,719],"color":"#64551c","font_size":24,"locked":false},{"title":"1) Swapping Original","bounding":[1908,16,821,1243],"color":"#3f2b64","font_size":24,"locked":false},{"title":"3) Masking Controls","bounding":[1904,1279,828,1468],"color":"#2f7054","font_size":24,"locked":false},{"title":"4) Swapping with Refined and Saving","bounding":[2749,1152,1383,1594],"color":"#095c9b","font_size":24,"locked":false},{"title":"0) Automatic ","bounding":[11,751,766,444],"color":"#3b3b3b","font_size":24,"locked":false},{"title":"Optional Saving - Unmute to Save","bounding":[2128,930,488,295],"color":"#3f789e","font_size":24,"locked":false},{"title":"Optional Saving - Unmute to Save","bounding":[2231,2228,399,280],"color":"#007c18","font_size":24,"locked":false},{"title":"Saving - Swapped A","bounding":[2857,2188,373,275],"color":"#0e8732","font_size":24,"locked":false},{"title":"0) Manual","bounding":[20,1214,717,435],"color":"#575757","font_size":24,"locked":false},{"title":"Plug Values","bounding":[838,829,383,260],"color":"#3b3b3b","font_size":24,"locked":false},{"title":"Saving Swapped_B","bounding":[3674,2179,369,295],"color":"#307327","font_size":24,"locked":false}],"config":{},"extra":{"groupNodes":{}},"version":0.4}