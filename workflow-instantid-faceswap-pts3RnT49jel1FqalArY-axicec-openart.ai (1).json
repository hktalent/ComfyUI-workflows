{"last_node_id":50,"last_link_id":97,"nodes":[{"id":4,"type":"LoadImage","pos":[0,-390],"size":{"0":390,"1":330},"flags":{},"order":0,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[89],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"title":"Face reference 1","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["1617766857753.jpg (JPEG Image, 2239 Ã— 1738 pixels) - 1617766857753.jpeg","image"],"color":"#006691"},{"id":42,"type":"Load RetinaFace","pos":[180,-30],"size":{"0":210,"1":26},"flags":{},"order":1,"mode":0,"outputs":[{"name":"MODEL","type":"RETINAFACE","links":[88],"shape":3}],"properties":{"Node name for S&R":"Load RetinaFace"},"color":"#006691"},{"id":5,"type":"FaceEmbed","pos":[150,180],"size":{"0":240,"1":90},"flags":{},"order":11,"mode":0,"inputs":[{"name":"insightface","type":"INSIGHTFACE_APP","link":null},{"name":"face_image","type":"IMAGE","link":90},{"name":"face_embeds","type":"FACE_EMBED","link":null}],"outputs":[{"name":"face embeds","type":"FACE_EMBED","links":[87],"shape":3,"slot_index":0}],"title":"Face embed 1","properties":{"Node name for S&R":"FaceEmbed"},"color":"#006691"},{"id":43,"type":"Anything Everywhere","pos":[180,540],"size":{"0":210,"1":26},"flags":{},"order":13,"mode":0,"inputs":[{"name":"INSIGHTFACE_APP","type":"*","link":91,"color_on":""}],"properties":{"Node name for S&R":"Anything Everywhere","group_restricted":false,"color_restricted":false},"color":"rgba(0,0,0,.8)"},{"id":44,"type":"PreviewImage","pos":[-120,30],"size":[210,246],"flags":{},"order":12,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":92}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":41,"type":"Crop Face","pos":[120,30],"size":[270,120],"flags":{},"order":8,"mode":0,"inputs":[{"name":"model","type":"RETINAFACE","link":88,"slot_index":0},{"name":"image","type":"IMAGE","link":89}],"outputs":[{"name":"face_image","type":"IMAGE","links":[90,92],"shape":3,"slot_index":0},{"name":"preview","type":"IMAGE","links":null,"shape":3},{"name":"bbox","type":"BBOX","links":null,"shape":3}],"properties":{"Node name for S&R":"Crop Face"},"widgets_values":[0.8,96],"color":"#006691"},{"id":37,"type":"Seed Everywhere","pos":[-270,420],"size":[300,90],"flags":{},"order":2,"mode":0,"outputs":[{"name":"INT","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"Seed Everywhere","group_restricted":false,"color_restricted":false},"widgets_values":[315709824509319,"randomize"],"color":"rgba(0,0,0,.8)"},{"id":38,"type":"LCMLora","pos":[-270,330],"size":[300,60],"flags":{},"order":3,"mode":4,"outputs":[{"name":"LCM Lora","type":"LCM_LORA","links":[79],"shape":3}],"title":"LCM Load","properties":{"Node name for S&R":"LCMLora"},"widgets_values":["LCM_pytorch_lora_weights.safetensors"],"color":"rgba(0,0,0,.8)"},{"id":39,"type":"LoadImage","pos":[780,-390],"size":[330,450],"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[81,97],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[82],"shape":3}],"title":"Image Mask","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["clipspace/clipspace-mask-1513580.png [input]","image"],"color":"#c09430"},{"id":13,"type":"PreviewImage","pos":[780,120],"size":[330,450],"flags":{},"order":10,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":81}],"title":"Original Image","properties":{"Node name for S&R":"PreviewImage"},"color":"#c09430"},{"id":1,"type":"FaceSwapSetupPipeline","pos":[30,330],"size":[360,180],"flags":{},"order":9,"mode":0,"inputs":[{"name":"LCM_lora","type":"LCM_LORA","link":79,"slot_index":0}],"outputs":[{"name":"inpaint pipe","type":"FACESWAP_PIPE","links":[58],"shape":3,"slot_index":0},{"name":"insightface","type":"INSIGHTFACE_APP","links":[91],"shape":3,"slot_index":1}],"title":"Loader","properties":{"Node name for S&R":"SetupPipeline"},"widgets_values":["__XL__\\juggernautXL_version6Rundiffusion.safetensors","E:\\comfy\\models\\controlnet","\\controlnetmodel","ipadapter.bin"],"color":"rgba(0,0,0,.8)"},{"id":48,"type":"Note","pos":[33,603],"size":[360,300],"flags":{},"order":5,"mode":0,"properties":{"text":""},"widgets_values":["Loader, Remember SDXL only at the moment:\n\ncontrolnet = will be your comfyui controlnet location\n\ncontrolnet_name = will be the continuation of the directory to where the model is located, for my setup (\\controlnetmodel\\diffusion_pytorch_model.safetensors) but for this option we just add (\\controlnetmodel)\n\nipadapter = the model downloaded during setup of instantid nodes"],"color":"#c09430"},{"id":14,"type":"PreviewImage","pos":[1110,120],"size":[330,450],"flags":{},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":60}],"title":"Result","properties":{"Node name for S&R":"PreviewImage"},"color":"#346434"},{"id":36,"type":"FaceSwapGenerationInpaint","pos":[420,-390],"size":[330,712],"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":97},{"name":"mask","type":"MASK","link":82},{"name":"face_embeds","type":"FACE_EMBED","link":87},{"name":"inpaint_pipe","type":"FACESWAP_PIPE","link":58},{"name":"insightface","type":"INSIGHTFACE_APP","link":null},{"name":"seed","type":"INT","link":null,"widget":{"name":"seed"},"slot_index":5}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[60],"shape":3,"slot_index":0}],"title":"Instantid Faceswap","properties":{"Node name for S&R":"GenerationInpaint"},"widgets_values":[70,3,0.5,5.5,30,0.15,10,true,1024,200508190976898,"randomize","white background, bright lighting, pale blonde hair","",""],"color":"#346434"},{"id":49,"type":"Note","pos":[1121,-390],"size":[300,150],"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["For the node to the left. This is where we make the mask. Load your pose image the image you want to add the face to, then to mask it, Right Click > Open In Maskeditor.\n\nOnce you have drawn the mask, then you can save."],"color":"#c09430"},{"id":50,"type":"Note","pos":[-360,-150],"size":[353.5896093560616,147.96626759588463],"flags":{},"order":7,"mode":0,"properties":{"text":""},"widgets_values":["For this side of the workflow I have added a face crop pass to eliminate any other things from the source image that is passed into the Faceswap node."],"color":"#c09430"}],"links":[[58,1,0,36,3,"FACESWAP_PIPE"],[60,36,0,14,0,"IMAGE"],[79,38,0,1,0,"LCM_LORA"],[81,39,0,13,0,"IMAGE"],[82,39,1,36,1,"MASK"],[87,5,0,36,2,"FACE_EMBED"],[88,42,0,41,0,"RETINAFACE"],[89,4,0,41,1,"IMAGE"],[90,41,0,5,1,"IMAGE"],[91,1,1,43,0,"*"],[92,41,0,44,0,"IMAGE"],[97,39,0,36,0,"IMAGE"]],"groups":[],"config":{},"extra":{"groupNodes":{"faceref1":{"nodes":[{"type":"LoadImage","pos":[119,152],"size":{"0":390,"1":330},"flags":{},"order":2,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"title":"Face reference 1","properties":{"Node name for S&R":"LoadImage"},"widgets_values":["261862701_3085933545017228_1661106236983357508_n.jpg","image"],"color":"#223","bgcolor":"#335","index":0},{"type":"FaceEmbed","pos":[570,150],"size":{"0":240,"1":90},"flags":{},"order":6,"mode":0,"inputs":[{"name":"insightface","type":"INSIGHTFACE_APP","link":null},{"name":"face_image","type":"IMAGE","link":null},{"name":"face_embeds","type":"FACE_EMBED","link":null}],"outputs":[{"name":"face embeds","type":"FACE_EMBED","links":[],"shape":3,"slot_index":0}],"title":"Face embed 1","properties":{"Node name for S&R":"FaceEmbed"},"color":"#223","bgcolor":"#335","index":1}],"links":[[null,1,1,0,1,"INSIGHTFACE_APP"],[0,0,1,1,4,"IMAGE"]],"external":[[1,0,"FACE_EMBED"]]}}},"version":0.4}