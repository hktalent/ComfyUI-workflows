{"last_node_id":168,"last_link_id":278,"nodes":[{"id":23,"type":"Reroute","pos":[4070,1810],"size":[75,26],"flags":{},"order":52,"mode":0,"inputs":[{"name":"","type":"*","link":23}],"outputs":[{"name":"","type":"VAE","links":[24,29],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":67,"type":"CR Integer To String","pos":[3730,-70],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":39,"mode":0,"inputs":[{"name":"int_","type":"INT","link":101,"widget":{"name":"int_"},"slot_index":0}],"outputs":[{"name":"STRING","type":"STRING","links":[99],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR Integer To String"},"widgets_values":[0]},{"id":74,"type":"Reroute","pos":[3530,90],"size":[75,26],"flags":{},"order":60,"mode":0,"inputs":[{"name":"","type":"*","link":111}],"outputs":[{"name":"","type":"IMAGE","links":[112],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":90,"type":"VHS_SplitImages","pos":[7150,890],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":91,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":145}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[146],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":"Preview Only 5 Images","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":65,"type":"Reroute","pos":[3880,-230],"size":[75,26],"flags":{},"order":42,"mode":0,"inputs":[{"name":"","type":"*","link":154,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"STRING","links":[96],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":26,"type":"PreviewImage","pos":[7370,930],"size":{"0":210,"1":246},"flags":{},"order":101,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":134}],"title":"Output","properties":{"Node name for S&R":"PreviewImage"}},{"id":62,"type":"VHS_SplitImages","pos":[7380,890],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":97,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":133}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[134],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":"Preview Only 5 Images","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":36,"type":"ImageScaleBy","pos":[3880,120],"size":{"0":257.40069580078125,"1":82},"flags":{"collapsed":true},"order":67,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":112,"slot_index":0},{"name":"scale_by","type":"FLOAT","link":114,"widget":{"name":"scale_by"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[57,88,130],"shape":3,"slot_index":0}],"title":"Downscale Image","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.35000000000000003],"color":"#223","bgcolor":"#335"},{"id":75,"type":"Reroute","pos":[3530,210],"size":[75,26],"flags":{},"order":46,"mode":0,"inputs":[{"name":"","type":"*","link":113,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"FLOAT","links":[114],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":61,"type":"VHS_SplitImages","pos":[6920,890],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":73,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":88}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[89],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":"Preview Only 5 Images","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":68,"type":"Text String","pos":[7220,40],"size":{"0":315,"1":190},"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[100],"shape":3,"slot_index":0},{"name":"STRING","type":"STRING","links":[],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":null,"shape":3},{"name":"STRING","type":"STRING","links":null,"shape":3}],"title":"Name","properties":{"Node name for S&R":"Text String"},"widgets_values":["Refined_Batch_","","",""]},{"id":6,"type":"smZ CLIPTextEncode","pos":[2550,930],"size":{"0":220,"1":160},"flags":{"collapsed":true},"order":76,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":77},{"name":"text","type":"STRING","link":2,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[256],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"smZ CLIPTextEncode"},"widgets_values":["","comfy",true,false,false,false,6,1024,1024,0,0,1024,1024,"","",1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":106,"type":"Reroute","pos":[2930,650],"size":[75,26],"flags":{},"order":49,"mode":0,"inputs":[{"name":"","type":"*","link":167,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"FLOAT","links":[166]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":112,"type":"Reroute","pos":[5000,640],"size":[75,26],"flags":{},"order":82,"mode":0,"inputs":[{"name":"","type":"*","link":172}],"outputs":[{"name":"","type":"MODEL","links":[180,191],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":113,"type":"Reroute","pos":[5000,670],"size":[75,26],"flags":{},"order":84,"mode":0,"inputs":[{"name":"","type":"*","link":247}],"outputs":[{"name":"","type":"CONDITIONING","links":[184,192],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":114,"type":"Reroute","pos":[5000,700],"size":[75,26],"flags":{},"order":85,"mode":0,"inputs":[{"name":"","type":"*","link":248}],"outputs":[{"name":"","type":"CONDITIONING","links":[183,193],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":115,"type":"Reroute","pos":[5000,730],"size":[75,26],"flags":{},"order":81,"mode":0,"inputs":[{"name":"","type":"*","link":175}],"outputs":[{"name":"","type":"LATENT","links":[185],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":116,"type":"Reroute","pos":[5000,820],"size":[75,26],"flags":{},"order":40,"mode":0,"inputs":[{"name":"","type":"*","link":176,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[186,196],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":118,"type":"Reroute","pos":[5000,790],"size":[75,26],"flags":{},"order":41,"mode":0,"inputs":[{"name":"","type":"*","link":178,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[187,195],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":119,"type":"Reroute","pos":[5000,760],"size":[75,26],"flags":{},"order":47,"mode":0,"inputs":[{"name":"","type":"*","link":179,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"FLOAT","links":[189,194],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":108,"type":"KSamplerAdvanced","pos":[5390,880],"size":{"0":320,"1":540},"flags":{},"order":86,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":180},{"name":"positive","type":"CONDITIONING","link":184},{"name":"negative","type":"CONDITIONING","link":183},{"name":"latent_image","type":"LATENT","link":185},{"name":"cfg","type":"FLOAT","link":189,"widget":{"name":"cfg"}},{"name":"steps","type":"INT","link":187,"widget":{"name":"steps"}},{"name":"noise_seed","type":"INT","link":186,"widget":{"name":"noise_seed"}},{"name":"end_at_step","type":"INT","link":228,"widget":{"name":"end_at_step"}},{"name":"start_at_step","type":"INT","link":229,"widget":{"name":"start_at_step"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[205],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",539728296665797,"fixed",20,8,"lcm","normal",6,6,"disable"]},{"id":5,"type":"Text Multiline","pos":[170,1150],"size":{"0":416.5102844238281,"1":191.8752899169922},"flags":{},"order":1,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2],"shape":3,"slot_index":0}],"title":"Negative","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["ugly, buildings, deformed, bad lighting, blurry, text, clouds, watermark, extra hands, bad quality, deformed hands, deformed fingers, nostalgic, drawing, painting, bad anatomy, worst quality, blurry, blurred, normal quality, bad focus, tripod, three legs, weird legs, short legs, bag, handbag, 3 hands, 4 hands, three hands\n\n(embedding:BadDream:1) boy, man, male,\n(embedding:ng_deepnegative_v1_75t:1), \n(embedding:epiCNegative:1), \n(embedding:bad-picture-chill-75v:1), \n(embedding:AS-YoungV2-neg:1), \n(embedding:ERA09NEGV2:1) "],"color":"#4d0000","bgcolor":"#610000"},{"id":66,"type":"Int Literal","pos":[170,60],"size":{"0":210,"1":80},"flags":{},"order":2,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[101],"shape":3,"slot_index":0}],"title":"Batch Number Naming","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[1],"color":"#232","bgcolor":"#353"},{"id":111,"type":"BNK_InjectNoise","pos":[5830,830],"size":{"0":315,"1":98},"flags":{"collapsed":true},"order":87,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":205},{"name":"noise","type":"LATENT","link":null},{"name":"mask","type":"MASK","link":null}],"outputs":[{"name":"LATENT","type":"LATENT","links":[169],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BNK_InjectNoise"},"widgets_values":[1]},{"id":105,"type":"BNK_InjectNoise","pos":[4670,900],"size":{"0":320,"1":100},"flags":{"collapsed":true},"order":77,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":164},{"name":"noise","type":"LATENT","link":null},{"name":"mask","type":"MASK","link":null},{"name":"strength","type":"FLOAT","link":166,"widget":{"name":"strength"},"slot_index":3}],"outputs":[{"name":"LATENT","type":"LATENT","links":[175],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"BNK_InjectNoise"},"widgets_values":[1]},{"id":11,"type":"VAEEncode","pos":[4310,630],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":72,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":57},{"name":"vae","type":"VAE","link":24,"slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[164],"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"},"color":"#2a363b","bgcolor":"#3f5159"},{"id":33,"type":"Reroute","pos":[4500,1190],"size":[75,26],"flags":{},"order":79,"mode":0,"inputs":[{"name":"","type":"*","link":276}],"outputs":[{"name":"","type":"MODEL","links":[172],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":138,"type":"FloatConstant","pos":[1940,-300],"size":{"0":210,"1":60},"flags":{},"order":3,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[245],"shape":3,"slot_index":0}],"title":"CN 2 Start Percent","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0],"color":"#232","bgcolor":"#353"},{"id":19,"type":"ControlNetLoaderAdvanced","pos":[1560,-200],"size":{"0":360,"1":60},"flags":{"collapsed":false},"order":4,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[251],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_softedge.pth"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":135,"type":"FloatConstant","pos":[1940,70],"size":{"0":210,"1":60},"flags":{},"order":5,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[260],"shape":3,"slot_index":0}],"title":"CN 1 Start Percent","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0],"color":"#232","bgcolor":"#353"},{"id":99,"type":"VHS_SplitImages","pos":[1500,-70],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":59,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":159}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[160],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":15,"type":"ControlNetLoaderAdvanced","pos":[1560,170],"size":{"0":360,"1":60},"flags":{"collapsed":false},"order":6,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[257],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_openpose.pth"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":98,"type":"PreviewImage","pos":[1290,-30],"size":{"0":220,"1":260},"flags":{},"order":66,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":160}],"title":"CN 1 Preview","properties":{"Node name for S&R":"PreviewImage"}},{"id":97,"type":"VHS_SplitImages","pos":[1500,-460],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":58,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":157}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[155],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":96,"type":"PreviewImage","pos":[1290,-400],"size":{"0":220,"1":250},"flags":{},"order":65,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":155}],"title":"CN 2 Preview","properties":{"Node name for S&R":"PreviewImage"}},{"id":133,"type":"Note","pos":[2210,-150],"size":{"0":430,"1":140},"flags":{},"order":7,"mode":0,"title":"ControlNet Important Note","properties":{"text":""},"widgets_values":["* Lower Strength and End Percent can lead to creative results which will reduce the original image look (Applicable in Softedge, Canny, Depth, and LineArt Pass)\n\n* Greater Start percent around 0.3-0.5 tends to create a still image from the main prompt first and then an artifact character overlayed on it.  This Can be used for Abstract creation.\n\n"],"color":"#822bda","bgcolor":"#963fee"},{"id":109,"type":"KSamplerAdvanced","pos":[6100,870],"size":{"0":320,"1":540},"flags":{},"order":88,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":191},{"name":"positive","type":"CONDITIONING","link":192},{"name":"negative","type":"CONDITIONING","link":193},{"name":"latent_image","type":"LATENT","link":169},{"name":"cfg","type":"FLOAT","link":194,"widget":{"name":"cfg"}},{"name":"steps","type":"INT","link":195,"widget":{"name":"steps"}},{"name":"noise_seed","type":"INT","link":196,"widget":{"name":"noise_seed"}},{"name":"start_at_step","type":"INT","link":230,"widget":{"name":"start_at_step"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[190],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",539728296665945,"fixed",10,8,"lcm","normal",6,999,"disable"]},{"id":141,"type":"Reroute","pos":[5010,1070],"size":[75,26],"flags":{},"order":48,"mode":0,"inputs":[{"name":"","type":"*","link":227,"widget":{"name":"value"}}],"outputs":[{"name":"","type":"INT","links":[228,229,230],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":80,"type":"FloatConstant","pos":[170,840],"size":{"0":210,"1":60},"flags":{},"order":8,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[125],"shape":3,"slot_index":0}],"title":"LCM Lora Strength","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0.65],"color":"#007c8f","bgcolor":"#0090a3"},{"id":45,"type":"PreviewImage","pos":[6910,930],"size":{"0":210,"1":250},"flags":{},"order":78,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":89}],"title":"Raw Images","properties":{"Node name for S&R":"PreviewImage"}},{"id":55,"type":"Seed Generator","pos":[170,190],"size":{"0":210,"1":83.90059661865234},"flags":{},"order":9,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[176],"shape":3}],"title":"Seed","properties":{"Node name for S&R":"Seed Generator"},"widgets_values":[1069195821123675,"fixed"],"color":"#121212","bgcolor":"#262626"},{"id":79,"type":"Int Literal","pos":[170,640],"size":{"0":210,"1":60},"flags":{},"order":10,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[178],"shape":3,"slot_index":0}],"title":"Sampler Steps","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[10],"color":"#007c8f","bgcolor":"#0090a3"},{"id":89,"type":"PreviewImage","pos":[7140,930],"size":{"0":210,"1":250},"flags":{},"order":94,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":146}],"title":"Before Color Correct","properties":{"Node name for S&R":"PreviewImage"}},{"id":142,"type":"Note","pos":[-490,660],"size":{"0":520,"1":230},"flags":{},"order":11,"mode":0,"title":"LCM Sampler Step and CFG","properties":{"text":""},"widgets_values":[" Sampler Steps: Total Number of steps for ksampler. (Default value - 10) \n\nSampler CFG - Use Between 2 - 9, Higher values causes artifacts, color noise, and weird backgrounds. Default value is 3. \nUse Lower 1-5 for Realistic Models and 3-7 for anime/cartoon.\n\nLCM Lora Strength - 0.65 seems good, you can experiment with higher values, also balance CFG and steps.\n\n\n\n\n-------------------------------\n\n*When Background gets messy, use low cfg for good backgrounds.\n\n*Value of cfg below 4 causes some faded look. You can experiment with \n\n1) LCM Lora Strength \n2) Sampler Steps\n3) Sampler CFG \n\nAll three are dependent on each other.\n"],"color":"#007c8f","bgcolor":"#0090a3"},{"id":147,"type":"Note","pos":[-500,1110],"size":{"0":530,"1":60},"flags":{},"order":12,"mode":0,"title":"Prompt Note","properties":{"text":""},"widgets_values":["Copy the same prompts, models, and loras from Raw Animation file."],"color":"#1a571a","bgcolor":"#2e6b2e"},{"id":69,"type":"Text Concatenate","pos":[7415,97],"size":{"0":315,"1":178},"flags":{"collapsed":true},"order":51,"mode":0,"inputs":[{"name":"text_a","type":"STRING","link":100,"widget":{"name":"text_a"}},{"name":"text_b","type":"STRING","link":99,"widget":{"name":"text_b"}},{"name":"text_c","type":"STRING","link":null,"widget":{"name":"text_c"}},{"name":"text_d","type":"STRING","link":null,"widget":{"name":"text_d"}}],"outputs":[{"name":"STRING","type":"STRING","links":[102],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Text Concatenate"},"widgets_values":["","true","false","","",""]},{"id":82,"type":"ColorMatch","pos":[7177,849],"size":{"0":315,"1":78},"flags":{"collapsed":true},"order":93,"mode":0,"inputs":[{"name":"image_ref","type":"IMAGE","link":130},{"name":"image_target","type":"IMAGE","link":129}],"outputs":[{"name":"image","type":"IMAGE","links":[133,233],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ColorMatch"},"widgets_values":["mkl"],"color":"#007aa7","bgcolor":"#078ebb"},{"id":29,"type":"Image Save","pos":[7770,110],"size":{"0":320,"1":560},"flags":{},"order":102,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":232},{"name":"output_path","type":"STRING","link":96,"widget":{"name":"output_path"},"slot_index":1},{"name":"filename_prefix","type":"STRING","link":102,"widget":{"name":"filename_prefix"}}],"properties":{"Node name for S&R":"Image Save"},"widgets_values":["F:\\#Projects\\1) SD Animation\\14) Golden Dress\\Frame_Out\\Refined","Refined","_",4,"false","png",100,"false","false","false","true","true","true"]},{"id":149,"type":"Reroute","pos":[7394,380],"size":[75,26],"flags":{},"order":98,"mode":0,"inputs":[{"name":"","type":"*","link":233}],"outputs":[{"name":"","type":"IMAGE","links":[232],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":146,"type":"Note","pos":[7104,493],"size":{"0":280,"1":110},"flags":{},"order":13,"mode":0,"title":"Color Match","properties":{"text":""},"widgets_values":["Save the Images from the above Reroute Node if you don't want color matched images, \n\nBypassing the ColorMatch won't work, it will save raw images again. "],"color":"#005d80","bgcolor":"#0a7194"},{"id":70,"type":"Reroute","pos":[7048,375],"size":[75,26],"flags":{},"order":90,"mode":0,"inputs":[{"name":"","type":"*","link":109}],"outputs":[{"name":"","type":"IMAGE","links":[129],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":102,"type":"PreviewImage","pos":[775,-11],"size":{"0":230,"1":250},"flags":{},"order":68,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":162}],"title":"Raw Images","properties":{"Node name for S&R":"PreviewImage"}},{"id":95,"type":"String to Text","pos":[170,-460],"size":{"0":320,"1":60},"flags":{},"order":14,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[154],"shape":3,"slot_index":0}],"title":"Output Folder Path","properties":{"Node name for S&R":"String to Text"},"widgets_values":["F:\\#Projects\\1) SD Animation\\26) Bad Devil\\Renders\\2) Refined"],"color":"#004d8a","bgcolor":"#00619e"},{"id":20,"type":"LoadImagesFromDirectory","pos":[1560,-400],"size":{"0":360,"1":140},"flags":{},"order":53,"mode":0,"inputs":[{"name":"image_load_cap","type":"INT","link":235,"widget":{"name":"image_load_cap"},"slot_index":0},{"name":"start_index","type":"INT","link":41,"widget":{"name":"start_index"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[157,252],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3},{"name":"INT","type":"INT","links":null,"shape":3}],"title":"ControlNet 2","properties":{"Node name for S&R":"LoadImagesFromDirectory"},"widgets_values":["F:\\#Projects\\1) SD Animation\\26) Bad Devil\\11) SoftEdgePlus_C",50,0],"color":"#323","bgcolor":"#535"},{"id":17,"type":"LoadImagesFromDirectory","pos":[1560,-30],"size":{"0":360,"1":130},"flags":{},"order":54,"mode":0,"inputs":[{"name":"image_load_cap","type":"INT","link":236,"widget":{"name":"image_load_cap"},"slot_index":0},{"name":"start_index","type":"INT","link":40,"widget":{"name":"start_index"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[159,258],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3},{"name":"INT","type":"INT","links":null,"shape":3}],"title":"ControlNet 1","properties":{"Node name for S&R":"LoadImagesFromDirectory"},"widgets_values":["F:\\#Projects\\1) SD Animation\\26) Bad Devil\\5) OpenPose_C",50,0],"color":"#323","bgcolor":"#535"},{"id":128,"type":"Int Literal","pos":[730,460],"size":{"0":210,"1":60},"flags":{},"order":15,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[216],"shape":3,"slot_index":0}],"title":"AD - Macro Motion","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[1],"color":"#5c1010","bgcolor":"#702424"},{"id":81,"type":"VAELoader","pos":[180,1640],"size":{"0":320,"1":64},"flags":{},"order":16,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[161],"shape":3,"slot_index":0}],"title":"Optional VAE","properties":{"Node name for S&R":"VAELoader"},"widgets_values":["klF8Anime2_klF8Anime2VAE.pt"]},{"id":153,"type":"Int Literal","pos":[170,-330],"size":{"0":210,"1":60},"flags":{},"order":17,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[234],"shape":3,"slot_index":0}],"title":"Batch Range","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[10],"color":"#232","bgcolor":"#353"},{"id":154,"type":"Int Literal","pos":[170,-200],"size":{"0":210,"1":60},"flags":{},"order":18,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[238],"shape":3,"slot_index":0}],"title":"Overlapping Frames","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[0],"color":"#232","bgcolor":"#353"},{"id":151,"type":"MathExpression|pysssss","pos":[490,-300],"size":{"0":400,"1":200},"flags":{"collapsed":true},"order":45,"mode":0,"inputs":[{"name":"a","type":"INT,FLOAT,IMAGE,LATENT","link":234,"slot_index":0},{"name":"b","type":"INT,FLOAT,IMAGE,LATENT","link":238},{"name":"c","type":"INT,FLOAT,IMAGE,LATENT","link":null}],"outputs":[{"name":"INT","type":"INT","links":[235,236,237,242],"shape":3,"slot_index":0},{"name":"FLOAT","type":"FLOAT","links":null,"shape":3}],"title":"A+B","properties":{"Node name for S&R":"MathExpression|pysssss"},"widgets_values":["a+b"]},{"id":39,"type":"FloatConstant","pos":[170,360],"size":{"0":260,"1":60},"flags":{},"order":19,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[113],"shape":3,"slot_index":0}],"title":"Refiner Upscale","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[1],"color":"#5c1010","bgcolor":"#702424"},{"id":31,"type":"PrimitiveNode","pos":[170,-60],"size":{"0":210,"1":80},"flags":{},"order":20,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[40,41,68,243],"slot_index":0,"widget":{"name":"start_index"}}],"title":"Skip Frames","properties":{"Run widget replace on values":false},"widgets_values":[0,"fixed"],"color":"#232","bgcolor":"#353"},{"id":78,"type":"Cfg Literal","pos":[170,740],"size":{"0":210,"1":60},"flags":{},"order":21,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[179],"shape":3,"slot_index":0}],"title":"Sampler Cfg ","properties":{"Node name for S&R":"Cfg Literal"},"widgets_values":[3],"color":"#007c8f","bgcolor":"#0090a3"},{"id":127,"type":"Cfg Literal","pos":[440,460],"size":{"0":280,"1":60},"flags":{},"order":22,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[213],"shape":3,"slot_index":0}],"title":"Details Enhancer","properties":{"Node name for S&R":"Cfg Literal"},"widgets_values":[1],"color":"#5c1010","bgcolor":"#702424"},{"id":137,"type":"FloatConstant","pos":[1940,-400],"size":{"0":210,"1":60},"flags":{},"order":23,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[246],"shape":3,"slot_index":0}],"title":"CN 2 Strength","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0.8],"color":"#232","bgcolor":"#353"},{"id":139,"type":"FloatConstant","pos":[1940,-200],"size":{"0":210,"1":60},"flags":{},"order":24,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[244],"shape":3,"slot_index":0}],"title":"CN 2 End Percent","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0.8],"color":"#232","bgcolor":"#353"},{"id":134,"type":"FloatConstant","pos":[1940,-30],"size":{"0":210,"1":60},"flags":{},"order":25,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[259],"shape":3,"slot_index":0}],"title":"CN 1 Strength","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0.8],"color":"#232","bgcolor":"#353"},{"id":136,"type":"FloatConstant","pos":[1940,170],"size":{"0":210,"1":60},"flags":{},"order":26,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[261],"shape":3,"slot_index":0}],"title":"CN 1 End Percent","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[0.8],"color":"#232","bgcolor":"#353"},{"id":21,"type":"LoadImagesFromDirectory","pos":[730,-200],"size":{"0":315,"1":146},"flags":{},"order":55,"mode":0,"inputs":[{"name":"image_load_cap","type":"INT","link":237,"widget":{"name":"image_load_cap"},"slot_index":0},{"name":"start_index","type":"INT","link":68,"widget":{"name":"start_index"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[111,163],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3},{"name":"INT","type":"INT","links":null,"shape":3}],"title":"Raw Images","properties":{"Node name for S&R":"LoadImagesFromDirectory"},"widgets_values":["F:\\#Projects\\1) SD Animation\\26) Bad Devil\\Renders\\1) Raw",50,0],"color":"#33009f","bgcolor":"#4700b3"},{"id":4,"type":"Text Multiline","pos":[170,990],"size":{"0":414.5828552246094,"1":115.55594635009766},"flags":{},"order":27,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[1],"shape":3,"slot_index":0}],"title":"Positive","properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["(masterpiece, top quality, best quality, official art, beautiful and aesthetic:1.2) background is abstract, particles, diamonds, lots of crystals, floating crystals, rage anime, r1ge, background is pure black, black background, "],"color":"#006900","bgcolor":"#087d0a"},{"id":140,"type":"Int Literal","pos":[170,460],"size":{"0":260,"1":60},"flags":{},"order":28,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[227],"shape":3,"slot_index":0}],"title":"Start Refiner from nth Step","properties":{"Node name for S&R":"Int Literal"},"widgets_values":[6],"color":"#5c1010","bgcolor":"#702424"},{"id":1,"type":"CheckpointLoaderSimple","pos":[180,1490],"size":{"0":320,"1":100},"flags":{"collapsed":false},"order":29,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","links":[8],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[9],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[],"shape":3,"slot_index":2}],"title":"Load AD Checkpoint","properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["imp_v10.safetensors"],"color":"#002a85","bgcolor":"#053e99"},{"id":161,"type":"ACN_AdvancedControlNetApply","pos":[3290,860],"size":{"0":310,"1":250},"flags":{},"order":83,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":253,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":254,"slot_index":1},{"name":"control_net","type":"CONTROL_NET","link":251},{"name":"image","type":"IMAGE","link":252},{"name":"mask_optional","type":"MASK","link":264,"slot_index":4},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"strength","type":"FLOAT","link":246,"widget":{"name":"strength"},"slot_index":8},{"name":"start_percent","type":"FLOAT","link":245,"widget":{"name":"start_percent"}},{"name":"end_percent","type":"FLOAT","link":244,"widget":{"name":"end_percent"}}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[247],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[248],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.25,0.2,0.4],"color":"#060606","bgcolor":"#1a1a1a"},{"id":160,"type":"ACN_AdvancedControlNetApply","pos":[2850,860],"size":{"0":310,"1":250},"flags":{},"order":80,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":255,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":256,"slot_index":1},{"name":"control_net","type":"CONTROL_NET","link":257},{"name":"image","type":"IMAGE","link":258},{"name":"mask_optional","type":"MASK","link":263,"slot_index":4},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null},{"name":"strength","type":"FLOAT","link":259,"widget":{"name":"strength"},"slot_index":8},{"name":"start_percent","type":"FLOAT","link":260,"widget":{"name":"start_percent"}},{"name":"end_percent","type":"FLOAT","link":261,"widget":{"name":"end_percent"}}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[253],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[254],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.25,0.2,0.4],"color":"#060606","bgcolor":"#1a1a1a"},{"id":162,"type":"ImageToMask","pos":[2040,-650],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":62,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":262}],"outputs":[{"name":"MASK","type":"MASK","links":[263,264],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":164,"type":"VHS_SplitImages","pos":[1420,-840],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":63,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":266}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[265],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":163,"type":"PreviewImage","pos":[1290,-790],"size":{"0":220,"1":250},"flags":{},"order":69,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":265}],"title":"Mask Preview","properties":{"Node name for S&R":"PreviewImage"}},{"id":159,"type":"LoadImagesFromDirectory","pos":[1560,-790],"size":{"0":370,"1":140},"flags":{},"order":56,"mode":0,"inputs":[{"name":"image_load_cap","type":"INT","link":242,"widget":{"name":"image_load_cap"},"slot_index":0},{"name":"start_index","type":"INT","link":243,"widget":{"name":"start_index"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[262,266],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"slot_index":1},{"name":"INT","type":"INT","links":null,"shape":3}],"title":"ContorlNet Mask","properties":{"Node name for S&R":"LoadImagesFromDirectory"},"widgets_values":["F:\\#Projects\\1) SD Animation\\26) Bad Devil\\8) Mask_C",10,0],"color":"#006599","bgcolor":"#0079ad"},{"id":13,"type":"VAEDecode","pos":[6560,1070],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":89,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":190},{"name":"vae","type":"VAE","link":29,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[109,145,267],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"color":"#2a363b","bgcolor":"#3f5159"},{"id":43,"type":"CR Integer To String","pos":[6520,470],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":95,"mode":0,"inputs":[{"name":"int_","type":"INT","link":55,"widget":{"name":"int_"}}],"outputs":[{"name":"STRING","type":"STRING","links":[65],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"title":".","properties":{"Node name for S&R":"CR Integer To String"},"widgets_values":[0]},{"id":40,"type":"CR Integer To String","pos":[6650,470],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":96,"mode":0,"inputs":[{"name":"int_","type":"INT","link":56,"widget":{"name":"int_"}}],"outputs":[{"name":"STRING","type":"STRING","links":[66],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"title":".","properties":{"Node name for S&R":"CR Integer To String"},"widgets_values":[0]},{"id":49,"type":"ShowText|pysssss","pos":[6510,350],"size":{"0":210,"1":80},"flags":{"collapsed":false},"order":100,"mode":0,"inputs":[{"name":"text","type":"STRING","link":66,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Output Height Check","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["1024","1024"]},{"id":48,"type":"ShowText|pysssss","pos":[6510,510],"size":{"0":210,"1":80},"flags":{},"order":99,"mode":0,"inputs":[{"name":"text","type":"STRING","link":65,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Output Width Check","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["576","576"]},{"id":42,"type":"GetImageSize","pos":[6550,630],"size":{"0":188.71080017089844,"1":46},"flags":{"collapsed":true},"order":92,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":267}],"outputs":[{"name":"width","type":"INT","links":[55],"shape":3,"slot_index":0},{"name":"height","type":"INT","links":[56],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GetImageSize"}},{"id":148,"type":"Note","pos":[2040,1690],"size":{"0":320,"1":160},"flags":{},"order":30,"mode":0,"title":"LCM Model","properties":{"text":""},"widgets_values":["Download it from here:\n\nhuggingface.co/latent-consistency/lcm-lora-sdv1-5/tree/main \n\nor \n\nhttps://civitai.com/models/195519?modelVersionId=225222"],"color":"#323","bgcolor":"#535"},{"id":131,"type":"ADE_AnimateDiffModelSettingsSimple","pos":[1000,1830],"size":{"0":344.3999938964844,"1":110},"flags":{"collapsed":true},"order":43,"mode":0,"inputs":[{"name":"mask_motion_scale","type":"MASK","link":null},{"name":"motion_pe_stretch","type":"INT","link":216,"widget":{"name":"motion_pe_stretch"},"slot_index":1}],"outputs":[{"name":"MOTION_MODEL_SETTINGS","type":"MOTION_MODEL_SETTINGS","links":[215],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffModelSettingsSimple"},"widgets_values":[3,100,100]},{"id":101,"type":"Note","pos":[1420,1950],"size":{"0":420,"1":200},"flags":{},"order":31,"mode":0,"title":"AnimateDiff","properties":{"text":""},"widgets_values":["Model - motionModel_v01 and Temporaldiff-v1-animatediff was seen to produce best results.\n\nContext Length to 16\n----------------------------\n\nmotionModel_v01 - https://civitai.com/models/139237?modelVersionId=154097\n\nTemporaldiff - https://huggingface.co/CiaraRowles/TemporalDiff/tree/main\n* Temporal Diff can sometime give yellow tint to the final image, which can be fixed in post using curves>playing with the blue channel or use 2.5 - 4 cfg.\n\n\nFeel free to test out other motion models. \n"],"color":"#233","bgcolor":"#355"},{"id":103,"type":"VHS_SplitImages","pos":[870,270],"size":{"0":315,"1":118},"flags":{"collapsed":true},"order":61,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":163}],"outputs":[{"name":"IMAGE_A","type":"IMAGE","links":[162],"shape":3,"slot_index":0},{"name":"A_count","type":"INT","links":null,"shape":3},{"name":"IMAGE_B","type":"IMAGE","links":null,"shape":3},{"name":"B_count","type":"INT","links":null,"shape":3}],"title":" ","properties":{"Node name for S&R":"VHS_SplitImages"},"widgets_values":{"split_index":5}},{"id":50,"type":"ADE_AnimateDiffUniformContextOptions","pos":[1000,1770],"size":{"0":315,"1":154},"flags":{"collapsed":true},"order":32,"mode":0,"outputs":[{"name":"CONTEXT_OPTIONS","type":"CONTEXT_OPTIONS","links":[69],"shape":3}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,1,4,"uniform",true]},{"id":104,"type":"FloatConstant","pos":[440,360],"size":{"0":280,"1":60},"flags":{},"order":33,"mode":0,"outputs":[{"name":"value","type":"FLOAT","links":[167],"shape":3,"slot_index":0}],"title":"Inject Additional Refiner Noise","properties":{"Node name for S&R":"FloatConstant"},"widgets_values":[1],"color":"#5c1010","bgcolor":"#702424"},{"id":77,"type":"ModelSamplingDiscrete","pos":[3060,1310],"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":70,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":269}],"outputs":[{"name":"MODEL","type":"MODEL","links":[211],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ModelSamplingDiscrete"},"widgets_values":["lcm",false]},{"id":14,"type":"CR Apply LoRA Stack","pos":[750,1560],"size":{"0":210,"1":66},"flags":{"collapsed":true},"order":50,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":8},{"name":"clip","type":"CLIP","link":9},{"name":"lora_stack","type":"LORA_STACK","link":210}],"outputs":[{"name":"MODEL","type":"MODEL","links":[274],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[116],"shape":3,"slot_index":1},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR Apply LoRA Stack"}},{"id":51,"type":"ADE_AnimateDiffLoaderWithContext","pos":[1420,1710],"size":{"0":420,"1":190},"flags":{"collapsed":false},"order":57,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":274},{"name":"context_options","type":"CONTEXT_OPTIONS","link":69,"slot_index":1},{"name":"motion_lora","type":"MOTION_LORA","link":null},{"name":"motion_model_settings","type":"MOTION_MODEL_SETTINGS","link":215,"slot_index":3}],"outputs":[{"name":"MODEL","type":"MODEL","links":[275],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["motionModel_v01.ckpt","sqrt_linear (AnimateDiff)",1,false]},{"id":76,"type":"LoraLoader","pos":[2030,1510],"size":{"0":320,"1":130},"flags":{"collapsed":false},"order":64,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":275},{"name":"clip","type":"CLIP","link":116},{"name":"strength_model","type":"FLOAT","link":125,"widget":{"name":"strength_model"}}],"outputs":[{"name":"MODEL","type":"MODEL","links":[269],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[277],"shape":3,"slot_index":1}],"title":"Load LCM LoRA","properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["lcm_pytorch_lora_weights.safetensors",0.65,1],"color":"#521aeb","bgcolor":"#662eff"},{"id":3,"type":"smZ CLIPTextEncode","pos":[2550,890],"size":{"0":220,"1":160},"flags":{"collapsed":true},"order":75,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":76},{"name":"text","type":"STRING","link":1,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[255],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"smZ CLIPTextEncode"},"widgets_values":["","comfy",true,true,false,false,6,1024,1024,0,0,1024,1024,"","",1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":56,"type":"Reroute","pos":[2360,880],"size":[75,26],"flags":{},"order":71,"mode":0,"inputs":[{"name":"","type":"*","link":277}],"outputs":[{"name":"","type":"CLIP","links":[76,77],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":126,"type":"TonemapNoiseWithRescaleCFG","pos":[3690,1310],"size":{"0":320,"1":80},"flags":{"collapsed":true},"order":74,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":211},{"name":"tonemap_multiplier","type":"FLOAT","link":213,"widget":{"name":"tonemap_multiplier"},"slot_index":1}],"outputs":[{"name":"MODEL","type":"MODEL","links":[276],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"TonemapNoiseWithRescaleCFG"},"widgets_values":[100,1]},{"id":22,"type":"Reroute","pos":[760,1640],"size":[75,26],"flags":{},"order":44,"mode":0,"inputs":[{"name":"","type":"*","link":161,"slot_index":0}],"outputs":[{"name":"","type":"VAE","links":[23],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":167,"type":"Note","pos":[-540,-440],"size":{"0":610,"1":60},"flags":{},"order":34,"mode":0,"title":"Tutorial Link","properties":{"text":""},"widgets_values":["Collection of Documented v3.0 Tutorials: https://www.patreon.com/collection/321458"],"color":"#934000","bgcolor":"#a75406","shape":4},{"id":168,"type":"Note","pos":[-540,-540],"size":{"0":610,"1":60},"flags":{},"order":35,"mode":0,"title":"File Name + Special Feature","properties":{"text":""},"widgets_values":["#3_1 - Refiner - Masked CN"],"color":"#84116b","bgcolor":"#98257f","shape":4},{"id":166,"type":"Note","pos":[-540,-340],"size":{"0":610,"1":610},"flags":{},"order":36,"mode":0,"title":"#3 AnimateDiff Refiner LCM v3.0","properties":{"text":""},"widgets_values":["HOW TO USE: \n\nAfter you have rendered the raw Images from #2 Main Animation Raw file, \n\n1) Enter the Paths in Purple Directory Nodes of the Raw Images from #2 and Enter Masks Directory in Mask directory node.\n\n2) Enter the Output path for saving the refined images.\n3) Enter Batch Range \n4) Overlapping Frames - 0 is Default (Put 5 or 10 for overlapping cross fade technique between batches)\n5) Skip Frame is 0 by default (Increase it after every batch) \n6) Batch Number Naming, increase it by 1 after every batch for organizing.\n7) Refiner Upscale - Upscale value is 1.2 by default (Use 1.2 - 1.8 for best result for SD models) \n8) See the Red note below for changing the refiner settings.\n9) Enter Prompts for more accuracy.  \n10) Choose Model checkpoint you want to use for refiner.\n11) Loras work as usual (Some of not compatible with animatediff, test it first with 10 frames)\n*Caution: Don't Use Lora on same or full strength, which was already used for making Raw Animation, it will double up.\n\n12) After Rendering all the frames then Open the #4 AnimateDIff Face Fix if your faces are not looking good. \n\nYou can skip 12th step If faces are looking good or does not have faces in the video. \n\n\nTip - Overlapping workflow can be applied here in refiner pass, Example how to use:\n\nTotal Input Image: 350\n\nBatch 1:  Range - 100 | Overlapping : 10 | Skip - 0\nBatch 2:  Range - 100 | Overlapping : 10 | Skip - 100\nBatch 3:  Range - 100 | Overlapping : 10 | Skip - 200\nBatch 4:  Range - 50  | Overlapping : 0  | Skip - 300 ( Overlap is 0 for the last batch to avoid extra repetition)\n\nTotal Output Images: 380 (350 images + (10 x 3 images for each batch))\nIn Post fade the extra overlapping frames for smooth transition.\n\n\n\nTip 2 : You can use this refine workflow again and again till you get your desired details, with same upscaling value or higher, just don't use overlapping frames technique in refiner phases else it will mess up the controlnet images, \nYou can use overlapping technique in the last refiner phase.\nEg -\n \nRaw phase > Refined Phase 1 > Refined Phase 2 > (Refined Phase 3 + Overlapping) \nlike this\nJust update the Input Raw Images directory to Refined phase x directory and Output Node every time.  \n\nTip 3: This Workflow Can also be used as vid2vid style conversion, Just Input the Original Source Frames as Raw Input and Denoise upto 0.6 - 0.7. \nAnd you can also the use these images for refiner again :D in Tip 2\n\n\n\n________________________________________\n\nMain Download Folder Link : https://drive.google.com/drive/folders/1HoZxKUX7WAg7ObqP00R4oIv48sXCEryQ?usp=sharing\n_________________________________________\n\n\nVideo Tutorials On my Channel - AnimateDiff ControlNet Animation\nhttps://www.youtube.com/channel/UCUoTFmdvUaNQe3P2Rgwx0yQ\n\n\nNode Workflow By \nJerry Davos"],"color":"#80430a","bgcolor":"#94571e","shape":4},{"id":143,"type":"Note","pos":[-490,330],"size":{"0":530,"1":230},"flags":{},"order":37,"mode":0,"title":"HigheRes Fix | Detail Enhancer | AD Macro Motion","properties":{"text":""},"widgets_values":["Inject Additional Refiner Noise - Use value 0 - 1 (It enhances the minute details, use with add details lora)\n\nRefiner Upscale - It upscales the image - (value around 1.2 - 1.6 is good, above 1.6 no change is observed)\n(Default Value - 1.2 which is good)\n--------------------------------------------\n*Start Refiner from nth step: It's an alternative to Denoising Technique, which mimics the denoiser. Default is 5. \n\nRefiner from nth Step Theory:\n \nFor Total Sampler Steps of 10 - \n\nValue 1 will mean denoise value 1.0\nValue 5 will mean denoise value 0.5\nValue 10 will mean denoise value 0\n\nand like so, it is dependent on sampler steps.\n----------------------------------------------\n\n\nDetail Enhancer - It injects noise in the model, use up to max value of 20 - Higer values cause micro details into morphing/sliding. (Default value is 2) \n\nAD Macro Motion - AnimateDiff motion of Background Elements is controlled by this value. Use up to max value of 10. Higer values cause jittering/Choppy motion. Min value 1 is for normal motion (Default Value - 3 for stable elements, almost no motion)\n\n*Higer value above 10 till 1000 in AD Macro Motion gives ghosting like Echo images, can be cool for some abstract effects. Sometimes it becomes like deforum img2img animation with consistent jittering background. Try different values for fun. \n\n*Higer Values than 10 till 200 in macro motion can sometimes experimentally give perfectly still background with good details and good character consistency, you need to find your x value. \n\n\n"],"color":"#8f0000","bgcolor":"#a30000"},{"id":124,"type":"CR LoRA Stack","pos":[180,1750],"size":{"0":315,"1":342},"flags":{"collapsed":false},"order":38,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[210],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"title":"[Optional] CR LoRA Stack","properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["On","None",1,1,"On","None",1,1,"On","None",1,1],"color":"#002a85","bgcolor":"#053e99"}],"links":[[1,4,0,3,1,"STRING"],[2,5,0,6,1,"STRING"],[8,1,0,14,0,"MODEL"],[9,1,1,14,1,"CLIP"],[23,22,0,23,0,"*"],[24,23,0,11,1,"VAE"],[29,23,0,13,1,"VAE"],[40,31,0,17,1,"INT"],[41,31,0,20,1,"INT"],[55,42,0,43,0,"INT"],[56,42,1,40,0,"INT"],[57,36,0,11,0,"IMAGE"],[65,43,0,48,0,"STRING"],[66,40,0,49,0,"STRING"],[68,31,0,21,1,"INT"],[69,50,0,51,1,"CONTEXT_OPTIONS"],[76,56,0,3,0,"CLIP"],[77,56,0,6,0,"CLIP"],[88,36,0,61,0,"IMAGE"],[89,61,0,45,0,"IMAGE"],[96,65,0,29,1,"STRING"],[99,67,0,69,1,"STRING"],[100,68,0,69,0,"STRING"],[101,66,0,67,0,"INT"],[102,69,0,29,2,"STRING"],[109,13,0,70,0,"*"],[111,21,0,74,0,"*"],[112,74,0,36,0,"IMAGE"],[113,39,0,75,0,"*"],[114,75,0,36,1,"FLOAT"],[116,14,1,76,1,"CLIP"],[125,80,0,76,2,"FLOAT"],[129,70,0,82,1,"IMAGE"],[130,36,0,82,0,"IMAGE"],[133,82,0,62,0,"IMAGE"],[134,62,0,26,0,"IMAGE"],[145,13,0,90,0,"IMAGE"],[146,90,0,89,0,"IMAGE"],[154,95,0,65,0,"*"],[155,97,0,96,0,"IMAGE"],[157,20,0,97,0,"IMAGE"],[159,17,0,99,0,"IMAGE"],[160,99,0,98,0,"IMAGE"],[161,81,0,22,0,"*"],[162,103,0,102,0,"IMAGE"],[163,21,0,103,0,"IMAGE"],[164,11,0,105,0,"LATENT"],[166,106,0,105,3,"FLOAT"],[167,104,0,106,0,"*"],[169,111,0,109,3,"LATENT"],[172,33,0,112,0,"*"],[175,105,0,115,0,"*"],[176,55,0,116,0,"*"],[178,79,0,118,0,"*"],[179,78,0,119,0,"*"],[180,112,0,108,0,"MODEL"],[183,114,0,108,2,"CONDITIONING"],[184,113,0,108,1,"CONDITIONING"],[185,115,0,108,3,"LATENT"],[186,116,0,108,6,"INT"],[187,118,0,108,5,"INT"],[189,119,0,108,4,"FLOAT"],[190,109,0,13,0,"LATENT"],[191,112,0,109,0,"MODEL"],[192,113,0,109,1,"CONDITIONING"],[193,114,0,109,2,"CONDITIONING"],[194,119,0,109,4,"FLOAT"],[195,118,0,109,5,"INT"],[196,116,0,109,6,"INT"],[205,108,0,111,0,"LATENT"],[210,124,0,14,2,"LORA_STACK"],[211,77,0,126,0,"MODEL"],[213,127,0,126,1,"FLOAT"],[215,131,0,51,3,"MOTION_MODEL_SETTINGS"],[216,128,0,131,1,"INT"],[227,140,0,141,0,"*"],[228,141,0,108,7,"INT"],[229,141,0,108,8,"INT"],[230,141,0,109,7,"INT"],[232,149,0,29,0,"IMAGE"],[233,82,0,149,0,"*"],[234,153,0,151,0,"INT,FLOAT,IMAGE,LATENT"],[235,151,0,20,0,"INT"],[236,151,0,17,0,"INT"],[237,151,0,21,0,"INT"],[238,154,0,151,1,"INT,FLOAT,IMAGE,LATENT"],[242,151,0,159,0,"INT"],[243,31,0,159,1,"INT"],[244,139,0,161,10,"FLOAT"],[245,138,0,161,9,"FLOAT"],[246,137,0,161,8,"FLOAT"],[247,161,0,113,0,"*"],[248,161,1,114,0,"*"],[251,19,0,161,2,"CONTROL_NET"],[252,20,0,161,3,"IMAGE"],[253,160,0,161,0,"CONDITIONING"],[254,160,1,161,1,"CONDITIONING"],[255,3,0,160,0,"CONDITIONING"],[256,6,0,160,1,"CONDITIONING"],[257,15,0,160,2,"CONTROL_NET"],[258,17,0,160,3,"IMAGE"],[259,134,0,160,8,"FLOAT"],[260,135,0,160,9,"FLOAT"],[261,136,0,160,10,"FLOAT"],[262,159,0,162,0,"IMAGE"],[263,162,0,160,4,"MASK"],[264,162,0,161,4,"MASK"],[265,164,0,163,0,"IMAGE"],[266,159,0,164,0,"IMAGE"],[267,13,0,42,0,"IMAGE"],[269,76,0,77,0,"MODEL"],[274,14,0,51,0,"MODEL"],[275,51,0,76,0,"MODEL"],[276,126,0,33,0,"*"],[277,76,1,56,0,"*"]],"groups":[{"title":"Connect These to Bypass Color Matching of images.","bounding":[6968,318,570,107],"color":"#3f789e","font_size":24,"locked":false},{"title":"Input Masks Directory","bounding":[1263,-914,980,411],"color":"#1566b3","font_size":24,"locked":false}],"config":{},"extra":{"groupNodes":{"AD":{"nodes":[{"type":"ADE_AnimateDiffUniformContextOptions","pos":[1772,1146],"size":{"0":315,"1":154},"flags":{"collapsed":false},"order":12,"mode":0,"outputs":[{"name":"CONTEXT_OPTIONS","type":"CONTEXT_OPTIONS","links":[],"shape":3}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[32,1,4,"uniform",true],"index":0},{"type":"ADE_AnimateDiffLoaderWithContext","pos":[2134,857],"size":{"0":407.929931640625,"1":190},"flags":{"collapsed":false},"order":25,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null},{"name":"context_options","type":"CONTEXT_OPTIONS","link":null,"slot_index":1},{"name":"motion_lora","type":"MOTION_LORA","link":null},{"name":"motion_model_settings","type":"MOTION_MODEL_SETTINGS","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["temporaldiff-v1-animatediff.safetensors","sqrt_linear (AnimateDiff)",1,false],"index":1}],"links":[[null,0,1,0,2,"MODEL"],[0,0,1,1,8,"CONTEXT_OPTIONS"]],"external":[[1,0,"MODEL"]]},"Dimensions":{"nodes":[{"type":"ShowText|pysssss","pos":[5744,226],"size":[210,76.0000228881836],"flags":{},"order":36,"mode":0,"inputs":[{"name":"text","type":"STRING","link":null,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Refine Width Input Check","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["627"],"index":0},{"type":"ShowText|pysssss","pos":[5750,94],"size":[210,76.00001525878906],"flags":{"collapsed":false},"order":37,"mode":0,"inputs":[{"name":"text","type":"STRING","link":null,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Refine Height Input Check","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["1131"],"index":1}],"links":[[null,0,0,0,43,"STRING"],[null,0,1,0,40,"STRING"]],"external":[]}}},"version":0.4}