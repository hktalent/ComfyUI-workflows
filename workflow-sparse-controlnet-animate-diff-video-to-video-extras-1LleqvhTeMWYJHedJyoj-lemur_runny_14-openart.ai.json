{"last_node_id":1640,"last_link_id":3550,"nodes":[{"id":291,"type":"ToBinaryMask","pos":[3549.0972497258163,800.6410082369341],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":488,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":633}],"outputs":[{"name":"MASK","type":"MASK","links":[634],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBinaryMask"},"widgets_values":[1]},{"id":292,"type":"MaskToImage","pos":[3549.0972497258163,840.6410082369333],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":489,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":634}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[630],"shape":3,"slot_index":0}],"title":"Mask to Image","properties":{"Node name for S&R":"MaskToImage"}},{"id":290,"type":"Image To Mask","pos":[3388.7010641605657,803.2164773373472],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":487,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":632}],"outputs":[{"name":"MASK","type":"MASK","links":[633],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":320,"type":"Image Bounds","pos":[-5241.920549059198,1415.272594409428],"size":{"0":229.20001220703125,"1":26},"flags":{"collapsed":true},"order":176,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2117,"slot_index":0}],"outputs":[{"name":"IMAGE_BOUNDS","type":"IMAGE_BOUNDS","links":[692],"shape":3}],"properties":{"Node name for S&R":"Image Bounds"}},{"id":318,"type":"Bounded Image Crop","pos":[-5271.354250250417,1380.001459164966],"size":{"0":229.20001220703125,"1":46},"flags":{"collapsed":true},"order":221,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2116},{"name":"image_bounds","type":"IMAGE_BOUNDS","link":691,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2135],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Bounded Image Crop"}},{"id":58,"type":"KSamplerAdvanced","pos":[-2859.471847801756,2060.299402082246],"size":{"0":320,"1":550},"flags":{},"order":308,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2774,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":106,"slot_index":1},{"name":"negative","type":"CONDITIONING","link":107,"slot_index":2},{"name":"latent_image","type":"LATENT","link":105,"slot_index":3},{"name":"noise_seed","type":"INT","link":735,"widget":{"name":"noise_seed"},"slot_index":4}],"outputs":[{"name":"LATENT","type":"LATENT","links":[109],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446124199,"fixed",6,2.2,"lcm","sgm_uniform",0,10000,"disable"]},{"id":288,"type":"ImageScale","pos":[3559.05316491797,879.8397948832256],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":490,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":630},{"name":"width","type":"INT","link":2212,"widget":{"name":"width"}},{"name":"height","type":"INT","link":2213,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[670],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":289,"type":"Image Select Color","pos":[3329.053164917962,1119.8397948832362],"size":{"0":210,"1":130},"flags":{},"order":484,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1136}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[632],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Select Color"},"widgets_values":[220,20,60,10]},{"id":498,"type":"AIO_Preprocessor","pos":[3319.053164917962,989.8397948832257],"size":{"0":210,"1":82},"flags":{},"order":481,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2215}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1136],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["OneFormer-COCO-SemSegPreprocessor",320]},{"id":1000,"type":"ImageScaleBy","pos":[3319.053164917962,859.8397948832267],"size":{"0":210,"1":82},"flags":{},"order":479,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2214}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2215],"shape":3,"slot_index":0}],"title":"Downscale","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.5]},{"id":307,"type":"Mask Morphology","pos":[3549.05316491797,919.8397948832256],"size":{"0":210,"1":82},"flags":{},"order":491,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":670}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[672],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[2,"dilate"]},{"id":309,"type":"Blur","pos":[3549.05316491797,1039.8397948832283],"size":{"0":210,"1":82},"flags":{},"order":492,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":672}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1366],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Blur"},"widgets_values":[4,1]},{"id":156,"type":"DiffControlNetLoaderAdvanced","pos":[-2201.606970427533,513.1840639076074],"size":{"0":420,"1":80},"flags":{},"order":285,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2555},{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":1}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2075,2080,2311],"shape":3,"slot_index":0}],"title":"Load Advanced ControlNet Model","properties":{"Node name for S&R":"DiffControlNetLoaderAdvanced"},"widgets_values":["diff_control_sd15_temporalnet_fp16.safetensors"],"color":"#233","bgcolor":"#355"},{"id":963,"type":"Reroute","pos":[4504.290345053869,561.9930743979779],"size":[75,26],"flags":{},"order":116,"mode":0,"inputs":[{"name":"","type":"*","link":2081}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2218],"label":"Tile","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":964,"type":"Reroute","pos":[4624.290345053867,561.9930743979779],"size":[75,26],"flags":{},"order":113,"mode":0,"inputs":[{"name":"","type":"*","link":2082}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2219],"label":"Pix2Pix","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":962,"type":"Reroute","pos":[4744.290345053867,561.9930743979779],"size":[75,26],"flags":{},"order":312,"mode":0,"inputs":[{"name":"","type":"*","link":2080}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2220,2221],"label":"Temporal","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":158,"type":"ACN_AdvancedControlNetApply","pos":[4944.2903450538615,641.9930743979766],"size":{"0":230,"1":250},"flags":{},"order":508,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1442},{"name":"negative","type":"CONDITIONING","link":1443},{"name":"control_net","type":"CONTROL_NET","link":2220,"slot_index":2},{"name":"image","type":"IMAGE","link":1343},{"name":"mask_optional","type":"MASK","link":2228},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[427],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[428],"shape":3,"slot_index":1}],"title":"Temporal BG","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,1]},{"id":262,"type":"EmptyLatentImage","pos":[4634.290345053867,501.9930743979792],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[{"name":"width","type":"INT","link":null,"widget":{"name":"width"}},{"name":"height","type":"INT","link":null,"widget":{"name":"height"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1255],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":569,"type":"Reroute","pos":[5344.290345053856,531.9930743979777],"size":[75,26],"flags":{},"order":112,"mode":0,"inputs":[{"name":"","type":"*","link":1255}],"outputs":[{"name":"","type":"LATENT","links":[],"label":"Empty","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":661,"type":"Image To Mask","pos":[4494.290345053869,551.9930743979778],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":498,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1421}],"outputs":[{"name":"MASK","type":"MASK","links":[1422,2226],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":662,"type":"InvertMask","pos":[4664.290345053867,551.9930743979778],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":501,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1422}],"outputs":[{"name":"MASK","type":"MASK","links":[2227],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InvertMask"}},{"id":1004,"type":"Reroute","pos":[5014.2903450538615,581.9930743979784],"size":[75,26],"flags":{},"order":505,"mode":0,"inputs":[{"name":"","type":"*","link":2227}],"outputs":[{"name":"","type":"MASK","links":[2228],"label":"BG","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1003,"type":"Reroute","pos":[5264.290345053854,581.9930743979784],"size":[75,26],"flags":{},"order":502,"mode":0,"inputs":[{"name":"","type":"*","link":2226}],"outputs":[{"name":"","type":"MASK","links":[2229],"label":"Subject","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":502,"type":"ImageScaleBy","pos":[2658.628679912008,1870.1383200210882],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":471,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1662},{"name":"scale_by","type":"FLOAT","link":2235,"widget":{"name":"scale_by"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1664],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",1.5]},{"id":753,"type":"Get Image Size","pos":[2843.0870376020157,1871.8996051532401],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":472,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1664}],"outputs":[{"name":"INT","type":"INT","links":[1665],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[1666],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":752,"type":"ImageSelector","pos":[2656.6684642351665,1914.685909963331],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":466,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2240}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1662],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageSelector"},"widgets_values":["1"]},{"id":869,"type":"CLIPTextEncode","pos":[5204.7221830674325,2608.627811129493],"size":{"0":390,"1":100},"flags":{},"order":321,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2296}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1889],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#332922","bgcolor":"#593930"},{"id":503,"type":"ControlNetLoaderAdvanced","pos":[-2193.249972578718,716.0494043436663],"size":{"0":420,"1":60},"flags":{},"order":1,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2082,2254],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["controlnet11Models_pix2pix.safetensors"],"color":"#233","bgcolor":"#355"},{"id":184,"type":"ControlNetLoaderAdvanced","pos":[-2201.606970427533,623.1840639076058],"size":{"0":420,"1":60},"flags":{},"order":2,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":0}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2079,2081,2255,2310,3006],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1e_sd15_tile_fp16.safetensors"],"color":"#233","bgcolor":"#355"},{"id":3,"type":"CheckpointLoaderSimple","pos":[-1673.0960276637068,457.0741618779028],"size":{"0":315,"1":98},"flags":{"pinned":true},"order":3,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[1588,2713],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[70,2715],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":null,"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["0001semirealistic_v54.safetensors"],"color":"#323","bgcolor":"#535"},{"id":43,"type":"CLIPSetLastLayer","pos":[-1673.0960276637068,457.0741618779028],"size":{"0":240,"1":60},"flags":{"pinned":true},"order":121,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":70}],"outputs":[{"name":"CLIP","type":"CLIP","links":[1587],"shape":3,"slot_index":0}],"title":"Model 1","properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2],"color":"#432","bgcolor":"#653"},{"id":254,"type":"CheckpointLoaderSimple","pos":[-153.46148542390844,699.996706892836],"size":{"0":315,"1":98},"flags":{"pinned":true},"order":4,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[2489,2506],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[545,2490,2507],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":null,"shape":3}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["0001softrealistic_v154xxx.safetensors"],"color":"#323","bgcolor":"#535"},{"id":1031,"type":"Reroute","pos":[4462.985616180967,2604.779846756741],"size":[75,26],"flags":{},"order":287,"mode":0,"inputs":[{"name":"","type":"*","link":3317}],"outputs":[{"name":"","type":"MODEL","links":[3297],"slot_index":0,"label":"Model"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":631,"type":"Reroute","pos":[5344.290345053856,501.9930743979792],"size":[75,26],"flags":{},"order":460,"mode":0,"inputs":[{"name":"","type":"*","link":2217}],"outputs":[{"name":"","type":"LATENT","links":[],"slot_index":0,"label":"latents"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":570,"type":"Reroute","pos":[5344.290345053856,471.9930743979797],"size":[75,26],"flags":{},"order":485,"mode":0,"inputs":[{"name":"","type":"*","link":1256}],"outputs":[{"name":"","type":"LATENT","links":[2325],"label":"Images","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":61,"type":"CLIPTextEncode","pos":[-2519.4718478017553,2660.299402082246],"size":{"0":260,"1":130},"flags":{},"order":281,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":1605}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[107,112],"shape":3}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, blur, bokeh, photo frame, billboards, frame"],"color":"#332922","bgcolor":"#593930"},{"id":841,"type":"ImageScaleBy","pos":[4534.7221830674325,2748.6278111294923],"size":{"0":210,"1":82},"flags":{},"order":529,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2058}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1821],"shape":3,"slot_index":0}],"title":"Downscale","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.3]},{"id":926,"type":"SegsToCombinedMask","pos":[4772.985616180967,2764.779846756741],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":537,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":1994}],"outputs":[{"name":"MASK","type":"MASK","links":[1995],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"}},{"id":860,"type":"Mask Morphology","pos":[4792.985616180967,2894.7798467567413],"size":{"0":210,"1":82},"flags":{"collapsed":true},"order":539,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2371}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1866],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"close"]},{"id":861,"type":"Mask Morphology","pos":[4792.985616180967,2934.7798467567413],"size":{"0":210,"1":82},"flags":{"collapsed":true},"order":541,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1866}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2372],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[4,"open"]},{"id":867,"type":"ACN_AdvancedControlNetApply","pos":[4762.985616180967,3344.77984675674],"size":{"0":230,"1":250},"flags":{},"order":554,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1888,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":1889,"slot_index":1},{"name":"control_net","type":"CONTROL_NET","link":2312,"slot_index":2},{"name":"image","type":"IMAGE","link":2382},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1878],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1879],"shape":3,"slot_index":1}],"title":"Tile","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,1]},{"id":874,"type":"Get Image Size","pos":[5012.985616180967,2944.7798467567413],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":546,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1896}],"outputs":[{"name":"INT","type":"INT","links":[1897,1908],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[1898,1909],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":865,"type":"VAEEncode","pos":[5092.985616180967,3144.779846756741],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":553,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":2381},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1936],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":887,"type":"Image To Mask","pos":[5032.985616180967,3094.779846756742],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":552,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2378}],"outputs":[{"name":"MASK","type":"MASK","links":[1935],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":831,"type":"UltralyticsDetectorProvider","pos":[4534.7221830674325,2868.627811129493],"size":{"0":210,"1":80},"flags":{},"order":5,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[1806],"shape":3,"slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[2394],"shape":3,"slot_index":1}],"title":"DetectorProvider","properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["segm/face_yolov8n_v2-seg.pt"]},{"id":830,"type":"ImpactSimpleDetectorSEGS","pos":[4532.985616180967,2984.7798467567413],"size":{"0":210,"1":310},"flags":{},"order":532,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":1806,"slot_index":0},{"name":"image","type":"IMAGE","link":1821},{"name":"sam_model_opt","type":"SAM_MODEL","link":2396,"slot_index":2},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":2394}],"outputs":[{"name":"SEGS","type":"SEGS","links":[2395],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS"},"widgets_values":[0.32,0,2,10,0.5,0,0,0.7,0]},{"id":1084,"type":"Cut By Mask","pos":[5012.985616180967,2884.7798467567413],"size":{"0":230,"1":122},"flags":{"collapsed":true},"order":545,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2366},{"name":"mask","type":"IMAGE","link":2367},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":2399}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2377],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Cut By Mask"},"widgets_values":[0,0]},{"id":1056,"type":"Reroute","pos":[4842.985616180967,3624.7798467567413],"size":[75,26],"flags":{},"order":118,"mode":0,"inputs":[{"name":"","type":"*","link":2310}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2312],"label":"Tile","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":866,"type":"ACN_AdvancedControlNetApply","pos":[5032.985616180967,3344.77984675674],"size":{"0":230,"1":250},"flags":{},"order":557,"mode":4,"inputs":[{"name":"positive","type":"CONDITIONING","link":1878,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":1879},{"name":"control_net","type":"CONTROL_NET","link":2313,"slot_index":2},{"name":"image","type":"IMAGE","link":3542},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1890],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1891],"shape":3,"slot_index":1}],"title":"Temporal","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0.2,0.7000000000000001]},{"id":1057,"type":"Reroute","pos":[5122.985616180967,3624.7798467567413],"size":[75,26],"flags":{},"order":313,"mode":0,"inputs":[{"name":"","type":"*","link":2311}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2313],"label":"Temporal","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":1105,"type":"Image To Mask","pos":[5432.985616180967,2824.7798467567413],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":555,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2406}],"outputs":[{"name":"MASK","type":"MASK","links":[2410],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":1106,"type":"InvertMask","pos":[5442.985616180967,2864.7798467567413],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":558,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2410}],"outputs":[{"name":"MASK","type":"MASK","links":[2411],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InvertMask"}},{"id":1104,"type":"AlphaChanelAddByMask","pos":[5562.985616180967,2984.7798467567413],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":562,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3148},{"name":"mask","type":"MASK","link":2411}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2408],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"AlphaChanelAddByMask"},"widgets_values":["default"]},{"id":893,"type":"Change Channel Count","pos":[5942.985616180967,2874.7798467567413],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":564,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1949}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1950],"shape":3,"slot_index":0}],"title":"RGB","properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":875,"type":"ImageScale","pos":[5482.985616180967,3184.77984675674],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":561,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2401},{"name":"width","type":"INT","link":1897,"widget":{"name":"width"}},{"name":"height","type":"INT","link":1898,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3148],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":878,"type":"ImageScale","pos":[5032.985616180967,3044.7798467567413],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":549,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2377},{"name":"width","type":"INT","link":1908,"widget":{"name":"width"}},{"name":"height","type":"INT","link":1909,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1918,2378],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":858,"type":"Mask To Region","pos":[4772.985616180967,3084.779846756742],"size":{"0":210,"1":202},"flags":{},"order":543,"mode":0,"inputs":[{"name":"mask","type":"IMAGE","link":1940}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1855,1922,2367],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask To Region"},"widgets_values":[10,"keep_ratio",64,64,0,0,"match_ratio"]},{"id":255,"type":"CLIPSetLastLayer","pos":[-146.90648832815864,701.2864803613179],"size":{"0":210,"1":60},"flags":{"pinned":true},"order":123,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":545}],"outputs":[{"name":"CLIP","type":"CLIP","links":[],"shape":3,"slot_index":0}],"title":"Model 2","properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2],"color":"#432","bgcolor":"#653"},{"id":970,"type":"LoraLoader","pos":[1013.0935116718429,1251.2864803613177],"size":{"0":210,"1":130},"flags":{},"order":259,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2502},{"name":"clip","type":"CLIP","link":2459}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2519],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2276],"shape":3,"slot_index":1}],"title":"LCM Lora","properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["lcm\\SD1.5\\pytorch_lora_weights.safetensors",0.6,1]},{"id":1136,"type":"RescaleCFG","pos":[773.0935116718426,1421.2864803613177],"size":{"0":210,"1":60},"flags":{},"order":239,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2501}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2502],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RescaleCFG"},"widgets_values":[0.5],"color":"#232","bgcolor":"#353"},{"id":914,"type":"SelfAttentionGuidance","pos":[1013.0935116718429,1421.2864803613177],"size":{"0":210,"1":82},"flags":{},"order":282,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2519}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2520],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.5,2],"color":"#232","bgcolor":"#353"},{"id":1122,"type":"Unwrap Frame Set [DVB]","pos":[-3471.5379467811663,2302.775759638936],"size":{"0":210,"1":200},"flags":{},"order":400,"mode":4,"inputs":[{"name":"frames","type":"FRAME_SET","link":2527}],"outputs":[{"name":"images","type":"IMAGE","links":[2464,2515],"shape":3,"slot_index":0},{"name":"framerate_float","type":"FLOAT","links":null,"shape":3},{"name":"framerate_rounded","type":"INT","links":null,"shape":3},{"name":"framerate_base","type":"INT","links":null,"shape":3},{"name":"framerate_divisor","type":"INT","links":null,"shape":3},{"name":"first_index","type":"INT","links":null,"shape":3},{"name":"indexed_length","type":"INT","links":null,"shape":3},{"name":"frame_count","type":"INT","links":null,"shape":3}],"properties":{"Node name for S&R":"Unwrap Frame Set [DVB]"},"widgets_values":["BLEND"]},{"id":1123,"type":"VHS_VideoCombine","pos":[-3241.5379467811626,2312.775759638936],"size":[280,270],"flags":{},"order":411,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2464},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":false,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"AnimateDiff_00075.mp4","subfolder":"","type":"temp","format":"video/h264-mp4"}}}},{"id":1121,"type":"Linear Camera Zoom [DVB]","pos":[-3709.2015899136445,2510.2727505963253],"size":{"0":210,"1":100},"flags":{},"order":391,"mode":4,"inputs":[{"name":"frames","type":"FRAME_SET","link":2462},{"name":"output_width","type":"INT","link":3257,"widget":{"name":"output_width"}},{"name":"output_height","type":"INT","link":3258,"widget":{"name":"output_height"}}],"outputs":[{"name":"frames","type":"FRAME_SET","links":[2527],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Linear Camera Zoom [DVB]"},"widgets_values":[512,512,"out"]},{"id":1142,"type":"Sine Camera Zoom [DVB]","pos":[-3709.2015899136445,2650.2727505963253],"size":{"0":210,"1":122},"flags":{},"order":392,"mode":4,"inputs":[{"name":"frames","type":"FRAME_SET","link":2522},{"name":"output_width","type":"INT","link":null,"widget":{"name":"output_width"}},{"name":"output_height","type":"INT","link":null,"widget":{"name":"output_height"}}],"outputs":[{"name":"frames","type":"FRAME_SET","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Sine Camera Zoom [DVB]"},"widgets_values":[512,512,2,0]},{"id":1147,"type":"Linear Camera Pan [DVB]","pos":[-3469.2015899136427,2560.2727505963253],"size":{"0":210,"1":150},"flags":{},"order":224,"mode":4,"inputs":[{"name":"frames","type":"FRAME_SET","link":null},{"name":"output_width","type":"INT","link":3255,"widget":{"name":"output_width"}},{"name":"output_height","type":"INT","link":3256,"widget":{"name":"output_height"}}],"outputs":[{"name":"frames","type":"FRAME_SET","links":null,"shape":3}],"properties":{"Node name for S&R":"Linear Camera Pan [DVB]"},"widgets_values":[512,512,1,-1,"edge to edge"]},{"id":745,"type":"Anything Everywhere3","pos":[-509.05651039547206,696.9485593747706],"size":{"0":170,"1":70},"flags":{"collapsed":false},"order":305,"mode":0,"inputs":[{"name":"MODEL","type":"*","link":2487,"color_on":"#B39DDB"},{"name":"CLIP","type":"*","link":2488,"slot_index":1,"color_on":"#FFD500"},{"name":"VAE","type":"*","link":1653,"color_on":"#FF6E6E"}],"properties":{"group_restricted":false,"color_restricted":false,"Node name for S&R":"Anything Everywhere3"},"color":"#232"},{"id":1032,"type":"Reroute","pos":[1363.0935116718429,1361.2864803613177],"size":[75,26],"flags":{},"order":309,"mode":0,"inputs":[{"name":"","type":"*","link":2520}],"outputs":[{"name":"","type":"MODEL","links":[],"label":"Diff 2","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1033,"type":"Reroute","pos":[1363.0935116718429,1391.2864803613177],"size":[75,26],"flags":{},"order":283,"mode":0,"inputs":[{"name":"","type":"*","link":2276}],"outputs":[{"name":"","type":"CLIP","links":[],"label":"Diff 2","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":870,"type":"VAEDecode","pos":[5322.985616180967,3184.77984675674],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":560,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":1894},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2401],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":872,"type":"Paste By Mask","pos":[5792.985616180967,2934.7798467567413],"size":{"0":230,"1":120},"flags":{"collapsed":false},"order":563,"mode":0,"inputs":[{"name":"image_base","type":"IMAGE","link":2202},{"name":"image_to_paste","type":"IMAGE","link":2408},{"name":"mask","type":"IMAGE","link":1922},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":2387}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1949],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Paste By Mask"},"widgets_values":["resize"]},{"id":1146,"type":"VHS_GetImageCount","pos":[-5295.796704292974,1455.9569016430419],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":151,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2534}],"outputs":[{"name":"count","type":"INT","links":[2535],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":235,"type":"Image To Mask","pos":[-3322.581680656422,181.27963130330812],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":300,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":504}],"outputs":[{"name":"MASK","type":"MASK","links":[505],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":236,"type":"ToBinaryMask","pos":[-3322.581680656422,221.27963130330812],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":325,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":505}],"outputs":[{"name":"MASK","type":"MASK","links":[506],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBinaryMask"},"widgets_values":[1]},{"id":237,"type":"MaskToImage","pos":[-3372.581680656422,261.2796313033081],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":337,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":506}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[578],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":310,"type":"Reroute","pos":[-1440.4867680484167,1806.012919709778],"size":[75,26],"flags":{},"order":413,"mode":0,"inputs":[{"name":"","type":"*","link":3245}],"outputs":[{"name":"","type":"IMAGE","links":[677],"slot_index":0,"label":"Masks"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":6,"type":"EmptyLatentImage","pos":[-220.48676804841816,1936.012919709778],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":178,"mode":0,"inputs":[{"name":"width","type":"INT","link":81,"widget":{"name":"width"}},{"name":"height","type":"INT","link":82,"widget":{"name":"height"}},{"name":"batch_size","type":"INT","link":1181,"widget":{"name":"batch_size"},"slot_index":2}],"outputs":[{"name":"LATENT","type":"LATENT","links":[8,1308],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,32]},{"id":7,"type":"VAEDecode","pos":[-30.48676804841819,1936.012919709778],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":434,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":1179},{"name":"vae","type":"VAE","link":null,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1178],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":509,"type":"EmptyLatentImage","pos":[1051.7577354157424,1980.740543561203],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":447,"mode":0,"inputs":[{"name":"width","type":"INT","link":1099,"widget":{"name":"width"}},{"name":"height","type":"INT","link":1100,"widget":{"name":"height"}},{"name":"batch_size","type":"INT","link":1121,"widget":{"name":"batch_size"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1102],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,32]},{"id":510,"type":"Get Image Size","pos":[1051.7577354157424,1930.740543561203],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":444,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1096}],"outputs":[{"name":"INT","type":"INT","links":[1099],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[1100],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":259,"type":"VAEEncode","pos":[1061.7577354157427,2030.740543561203],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":448,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":2331},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2335],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":153,"type":"VAEDecode","pos":[1431.7577354157434,1890.740543561203],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":456,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":335},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[710,2538],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":911,"type":"ImageScaleBy","pos":[2775.3768330827293,-2544.251998540666],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":214,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2694}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1973,2006,2009],"shape":3,"slot_index":0}],"title":"Downscale","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.4]},{"id":912,"type":"AIO_Preprocessor","pos":[2775.3768330827293,-2424.251998540665],"size":{"0":210,"1":80},"flags":{},"order":276,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":1973},{"name":"resolution","type":"INT","link":2011,"widget":{"name":"resolution"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2022],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["OneFormer-COCO-SemSegPreprocessor",320]},{"id":932,"type":"PixelPerfectResolution","pos":[2996.5882704900055,-2581.670518425666],"size":{"0":280,"1":100},"flags":{"collapsed":true},"order":253,"mode":4,"inputs":[{"name":"original_image","type":"IMAGE","link":2009},{"name":"image_gen_width","type":"INT","link":2007,"widget":{"name":"image_gen_width"}},{"name":"image_gen_height","type":"INT","link":2010,"widget":{"name":"image_gen_height"}}],"outputs":[{"name":"RESOLUTION (INT)","type":"INT","links":[2011],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PixelPerfectResolution"},"widgets_values":[512,512,"Just Resize"]},{"id":935,"type":"Image Select Color","pos":[2775.3768330827293,-2314.2519985406648],"size":{"0":210,"1":130},"flags":{},"order":304,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2022}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2016],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Select Color"},"widgets_values":[220,20,60,10]},{"id":936,"type":"Image To Mask","pos":[3005.376833082734,-2514.2519985406657],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":329,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2016}],"outputs":[{"name":"MASK","type":"MASK","links":[2017],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":937,"type":"ToBinaryMask","pos":[3015.376833082734,-2474.251998540665],"size":{"0":315,"1":58},"flags":{"collapsed":true},"order":341,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":2017}],"outputs":[{"name":"MASK","type":"MASK","links":[2018],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBinaryMask"},"widgets_values":[1]},{"id":938,"type":"MaskToImage","pos":[3005.376833082734,-2434.251998540665],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":354,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":2018}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2037],"shape":3,"slot_index":0}],"title":"Mask to Image","properties":{"Node name for S&R":"MaskToImage"}},{"id":939,"type":"Mask Morphology","pos":[3005.376833082734,-2394.251998540665],"size":{"0":210,"1":82},"flags":{},"order":363,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2037}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2020],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[2,"dilate"]},{"id":940,"type":"Blur","pos":[3005.376833082734,-2274.2519985406648],"size":{"0":210,"1":82},"flags":{},"order":375,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2020}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2021],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Blur"},"widgets_values":[4,1]},{"id":703,"type":"Get Image Size","pos":[4506.585378600661,1503.6346029222088],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":384,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3418}],"outputs":[{"name":"INT","type":"INT","links":[1513,1569,2047],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[1514,1570,2048],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":945,"type":"SetLatentNoiseMask","pos":[4896.585378600661,1513.634602922209],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":510,"mode":4,"inputs":[{"name":"samples","type":"LATENT","link":2038},{"name":"mask","type":"MASK","link":2043}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2039],"shape":3,"slot_index":0}],"title":"InPaint","properties":{"Node name for S&R":"SetLatentNoiseMask"},"color":"#232","bgcolor":"#353"},{"id":700,"type":"EmptyLatentImage","pos":[4696.585378600661,1513.634602922209],"size":{"0":210,"1":74},"flags":{"collapsed":true},"order":395,"mode":0,"inputs":[{"name":"width","type":"INT","link":1513,"widget":{"name":"width"}},{"name":"height","type":"INT","link":1514,"widget":{"name":"height"}},{"name":"batch_size","type":"INT","link":1515,"widget":{"name":"batch_size"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,2]},{"id":708,"type":"Reroute","pos":[5518.166035134258,1523.6346010148604],"size":[75,26],"flags":{},"order":499,"mode":0,"inputs":[{"name":"","type":"*","link":2700}],"outputs":[{"name":"","type":"IMAGE","links":[1529],"label":"Masks"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1242,"type":"MaskToImage","pos":[1871.7433212890385,-2350.5960442009655],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":232,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":2703}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2705],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1248,"type":"Reroute","pos":[-2912.345342289975,1797.031988622595],"size":[75,26],"flags":{},"order":120,"mode":0,"inputs":[{"name":"","type":"*","link":2713}],"outputs":[{"name":"","type":"MODEL","links":[2714],"slot_index":0,"label":"Model"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1249,"type":"Reroute","pos":[-2912.345342289975,1827.031988622596],"size":[75,26],"flags":{},"order":122,"mode":0,"inputs":[{"name":"","type":"*","link":2715}],"outputs":[{"name":"","type":"CLIP","links":[2716],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":205,"type":"Reroute","pos":[-1852.3453422899759,1837.031988622596],"size":[75,26],"flags":{},"order":389,"mode":0,"inputs":[{"name":"","type":"*","link":2189}],"outputs":[{"name":"","type":"IMAGE","links":[2178],"slot_index":0,"label":"Line"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":711,"type":"Blur","pos":[5508.166035134258,1593.634601014861],"size":{"0":210,"1":82},"flags":{},"order":503,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1529}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2736],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Blur"},"widgets_values":[6,1]},{"id":1272,"type":"Change Channel Count","pos":[5518.166035134258,1713.6346010148607],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":506,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2736}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2737],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":929,"type":"RebatchImages","pos":[3446.3372918655255,86.82836776107202],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":230,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1998}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1999],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":906,"type":"Change Channel Count","pos":[3446.3372918655255,46.828367761071746],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":209,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1966}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1998],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1275,"type":"Get Image Size","pos":[1921.8399700859281,-2582.4004834012408],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":213,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2740}],"outputs":[{"name":"INT","type":"INT","links":[2741],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[2742],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":1282,"type":"Reroute","pos":[711.7577354157439,1850.740543561203],"size":[75,26],"flags":{},"order":435,"mode":0,"inputs":[{"name":"","type":"*","link":2959}],"outputs":[{"name":"","type":"LATENT","links":[2762],"slot_index":0,"label":"Latents"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1283,"type":"Reroute","pos":[711.7577354157439,1890.740543561203],"size":[75,26],"flags":{},"order":441,"mode":0,"inputs":[{"name":"","type":"*","link":2958}],"outputs":[{"name":"","type":"IMAGE","links":[2763],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":139,"type":"ImageScaleBy","pos":[801.757735415744,2010.740543561203],"size":{"0":210,"1":82},"flags":{},"order":442,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2763}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[310,1096,1120,2328],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",2]},{"id":28,"type":"LatentUpscaleBy","pos":[801.757735415744,1890.740543561203],"size":{"0":210,"1":82},"flags":{},"order":437,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":2762}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2112],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LatentUpscaleBy"},"widgets_values":["area",2]},{"id":1112,"type":"PreviewImage","pos":[7003.908610566165,2447.45689634886],"size":{"0":340,"1":250},"flags":{},"order":576,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2428}],"title":"Face Base","properties":{"Node name for S&R":"PreviewImage"}},{"id":828,"type":"Reroute","pos":[6156.031146298638,1349.539370685225],"size":[75,26],"flags":{},"order":533,"mode":0,"inputs":[{"name":"","type":"*","link":1804}],"outputs":[{"name":"","type":"IMAGE","links":[2074],"label":"Batch","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1286,"type":"Reroute","pos":[7343.908610566165,1807.456896348861],"size":[75,26],"flags":{},"order":586,"mode":0,"inputs":[{"name":"","type":"*","link":2769}],"outputs":[{"name":"","type":"IMAGE","links":[2770],"label":"Swapped","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":63,"type":"LatentUpscaleBy","pos":[-2616.0226844741114,2019.9254011449111],"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":333,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":109}],"outputs":[{"name":"LATENT","type":"LATENT","links":[115],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LatentUpscaleBy"},"widgets_values":["nearest-exact",2.5]},{"id":64,"type":"KSamplerAdvanced","pos":[-2526.0226844741114,2059.925401144911],"size":{"0":320,"1":550},"flags":{},"order":344,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2775,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":111,"slot_index":1},{"name":"negative","type":"CONDITIONING","link":112,"slot_index":2},{"name":"latent_image","type":"LATENT","link":115,"slot_index":3},{"name":"noise_seed","type":"INT","link":736,"widget":{"name":"noise_seed"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[116],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446124199,"fixed",12,2.2,"lcm","sgm_uniform",6,10000,"disable"]},{"id":62,"type":"VAEDecode","pos":[-2346.0226844741123,2019.9254011449111],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":357,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":116},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1129,2067,2466],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":1284,"type":"Note","pos":[5722.985616180967,2654.779846756741],"size":{"0":360,"1":120},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["When one face is being replaced, you can change paste by masks to \"source size\", from default \"resize\" for a slightly clearer face as it won't double process it. \n\nTodo\n- Find out why I can't rescale odd numbered batches when frames change the number of faces displayed."],"color":"#432","bgcolor":"#653"},{"id":1244,"type":"Mask Morphology","pos":[1877.7876484150704,-2260.5093712174535],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":252,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2705}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2706],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"open"]},{"id":8,"type":"VAELoader","pos":[-1673.0960276637068,587.0741618779015],"size":{"0":320,"1":60},"flags":{},"order":7,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[1653],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.ckpt"],"color":"#322","bgcolor":"#533"},{"id":1243,"type":"PreviewImage","pos":[2097.78764841507,-2540.5093712174544],"size":{"0":230,"1":250},"flags":{},"order":362,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3289}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1287,"type":"Reroute","pos":[7522.836695333145,1806.2904519611918],"size":[75,26],"flags":{},"order":587,"mode":0,"inputs":[{"name":"","type":"*","link":2770}],"outputs":[{"name":"","type":"IMAGE","links":[2771,2783],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1307,"type":"LoadImage","pos":[-6909.452997669547,1562.0613290358122],"size":{"0":320,"1":310},"flags":{},"order":8,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2784],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_08_26__09_17_57_0.png","image"]},{"id":1309,"type":"LoadImage","pos":[-6219.452997669547,1562.0613290358122],"size":{"0":320,"1":310},"flags":{},"order":9,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2786],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_08_26__09_17_57_2.png","image"]},{"id":1312,"type":"LoadImage","pos":[-6219.452997669547,1912.0613290358106],"size":{"0":320,"1":310},"flags":{},"order":10,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2789],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2021_04_04__14_15_31_1.png","image"]},{"id":1330,"type":"ImageScale","pos":[-5294.142217440573,2118.164877508305],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":199,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2816,"slot_index":0},{"name":"width","type":"INT","link":2811,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2812,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2818],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1331,"type":"ImageScale","pos":[-5294.142217440573,2158.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":195,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2817,"slot_index":0},{"name":"width","type":"INT","link":2814,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2815,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2819],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1341,"type":"ImageScale","pos":[-5294.142217440573,2198.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":197,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2868,"slot_index":0},{"name":"width","type":"INT","link":2860,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2861,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2871],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1343,"type":"ImageScale","pos":[-5294.142217440573,2278.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":196,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2870,"slot_index":0},{"name":"width","type":"INT","link":2866,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2867,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2873],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1354,"type":"Reroute","pos":[-5780.629503055472,2798.503837346433],"size":[75,26],"flags":{},"order":132,"mode":4,"inputs":[{"name":"","type":"*","link":2884}],"outputs":[{"name":"","type":"IMAGE","links":null,"label":"11"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1355,"type":"Reroute","pos":[-5780.629503055472,2848.503837346433],"size":[75,26],"flags":{},"order":133,"mode":4,"inputs":[{"name":"","type":"*","link":2885}],"outputs":[{"name":"","type":"IMAGE","links":null,"label":"12"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1344,"type":"LoadImage","pos":[-6901.374423211043,2292.0613290358124],"size":{"0":320,"1":310},"flags":{},"order":11,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2880],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2021_05_19__17_35_14_3.png","image"]},{"id":1345,"type":"LoadImage","pos":[-6561.374423211043,2292.0613290358124],"size":{"0":320,"1":310},"flags":{},"order":12,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2881],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2021_05_19__17_35_14_2.png","image"]},{"id":1346,"type":"LoadImage","pos":[-6211.374423211043,2292.0613290358124],"size":{"0":320,"1":310},"flags":{},"order":13,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2882],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2021_04_04__14_15_31_0.png","image"]},{"id":1348,"type":"LoadImage","pos":[-6561.374423211043,2652.0613290358124],"size":{"0":320,"1":310},"flags":{},"order":14,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2884],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_06_09__12_11_50_1.png","image"]},{"id":1349,"type":"LoadImage","pos":[-6211.374423211043,2652.0613290358124],"size":{"0":320,"1":310},"flags":{},"order":15,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2885],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2021_01_29__02_15_26.png","image"]},{"id":1359,"type":"Reroute","pos":[-5504.142217440573,2408.1648775083045],"size":[75,26],"flags":{},"order":16,"mode":4,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[2905],"label":"10","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1360,"type":"Reroute","pos":[-5504.142217440573,2448.1648775083045],"size":[75,26],"flags":{},"order":17,"mode":4,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[2906],"label":"11","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1361,"type":"Reroute","pos":[-5504.142217440573,2488.1648775083045],"size":[75,26],"flags":{},"order":18,"mode":4,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[2907],"label":"12","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1325,"type":"ImageScale","pos":[-5294.142217440573,2078.1648775083054],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":194,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2800,"slot_index":0},{"name":"width","type":"INT","link":2801,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2802,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2912],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1362,"type":"ImageScale","pos":[-5294.142217440573,2318.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":143,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2902,"slot_index":0},{"name":"width","type":"INT","link":2890,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2891,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2908],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1363,"type":"ImageScale","pos":[-5294.142217440573,2358.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":142,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2903,"slot_index":0},{"name":"width","type":"INT","link":2892,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2893,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2909],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1364,"type":"ImageScale","pos":[-5294.142217440573,2398.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":141,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2904,"slot_index":0},{"name":"width","type":"INT","link":2894,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2895,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2914],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1365,"type":"ImageScale","pos":[-5294.142217440573,2438.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":138,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2905,"slot_index":0},{"name":"width","type":"INT","link":2896,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2897,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2915],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1366,"type":"ImageScale","pos":[-5294.142217440573,2478.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":139,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2906,"slot_index":0},{"name":"width","type":"INT","link":2898,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2899,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2916],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1367,"type":"ImageScale","pos":[-5294.142217440573,2518.1648775083045],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":140,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2907,"slot_index":0},{"name":"width","type":"INT","link":2900,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2901,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2917],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1308,"type":"LoadImage","pos":[-6569.452997669547,1562.0613290358122],"size":{"0":320,"1":310},"flags":{},"order":19,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2918],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_08_26__09_17_57_1.png","image"]},{"id":1310,"type":"LoadImage","pos":[-6909.452997669547,1912.0613290358106],"size":{"0":320,"1":310},"flags":{},"order":20,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2787,2922],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_05_01__15_07_03.png","image"]},{"id":1342,"type":"ImageScale","pos":[-5297.321551537283,2237.0542270488922],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":198,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2869,"slot_index":0},{"name":"width","type":"INT","link":2863,"widget":{"name":"width"},"slot_index":1},{"name":"height","type":"INT","link":2864,"widget":{"name":"height"},"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2872],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",280,340,"center"]},{"id":1318,"type":"Reroute","pos":[-5781.374423211043,2072.0613290358106],"size":[75,26],"flags":{},"order":128,"mode":4,"inputs":[{"name":"","type":"*","link":2789}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"6","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1311,"type":"LoadImage","pos":[-6560,1920],"size":{"0":320,"1":310},"flags":{},"order":21,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2788],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_05_02__09_26_47.png","image"]},{"id":1317,"type":"Reroute","pos":[-5781.374423211043,2022.0613290358106],"size":[75,26],"flags":{},"order":137,"mode":4,"inputs":[{"name":"","type":"*","link":2788}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"5","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1326,"type":"PrimitiveNode","pos":[-5434.142217440573,1948.1648775083052],"size":{"0":210,"1":82},"flags":{},"order":22,"mode":4,"outputs":[{"name":"INT","type":"INT","links":[2801,2811,2814,2860,2863,2866,2890,2892,2894,2896,2898,2900],"widget":{"name":"width"}}],"title":"W","properties":{"Run widget replace on values":false},"widgets_values":[280,"fixed"]},{"id":1327,"type":"PrimitiveNode","pos":[-5214.142217440573,1948.1648775083052],"size":{"0":210,"1":82},"flags":{},"order":23,"mode":4,"outputs":[{"name":"INT","type":"INT","links":[2802,2812,2815,2861,2864,2867,2891,2893,2895,2897,2899,2901],"widget":{"name":"height"}}],"title":"H","properties":{"Run widget replace on values":false},"widgets_values":[340,"fixed"]},{"id":1305,"type":"ImpactMakeImageBatch","pos":[-5127.321551537283,2067.0542270488922],"size":{"0":140,"1":270},"flags":{"collapsed":true},"order":220,"mode":4,"inputs":[{"name":"image1","type":"IMAGE","link":2912},{"name":"image2","type":"IMAGE","link":2818},{"name":"image3","type":"IMAGE","link":2819},{"name":"image4","type":"IMAGE","link":2871},{"name":"image5","type":"IMAGE","link":2872},{"name":"image6","type":"IMAGE","link":2873},{"name":"image7","type":"IMAGE","link":2908},{"name":"image8","type":"IMAGE","link":2909},{"name":"image9","type":"IMAGE","link":2914},{"name":"image10","type":"IMAGE","link":2915},{"name":"image11","type":"IMAGE","link":2916},{"name":"image12","type":"IMAGE","link":2917},{"name":"image13","type":"IMAGE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2931],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactMakeImageBatch"}},{"id":1358,"type":"Reroute","pos":[-5504.142217440573,2368.1648775083045],"size":[75,26],"flags":{},"order":24,"mode":4,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[2904],"label":"9","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1357,"type":"Reroute","pos":[-5504.142217440573,2328.1648775083045],"size":[75,26],"flags":{},"order":25,"mode":4,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[2903],"label":"8","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1356,"type":"Reroute","pos":[-5504.142217440573,2288.1648775083045],"size":[75,26],"flags":{},"order":26,"mode":4,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[2902],"label":"7","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1316,"type":"Reroute","pos":[-5781.374423211043,1972.0613290358106],"size":[75,26],"flags":{},"order":135,"mode":4,"inputs":[{"name":"","type":"*","link":2787}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"4","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1335,"type":"ImagePadForOutpaint","pos":[-5130,2220],"size":{"0":230,"1":174},"flags":{},"order":264,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2930}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2837,2919],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"title":"Pad Images for Outpainting","properties":{"Node name for S&R":"ImagePadForOutpaint"},"widgets_values":[72,64,72,0,0]},{"id":1387,"type":"Reroute","pos":[529.5132319515816,1736.012919709778],"size":[75,26],"flags":{},"order":433,"mode":0,"inputs":[{"name":"","type":"*","link":2957}],"outputs":[{"name":"","type":"LATENT","links":[2959],"label":"Latents","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1350,"type":"Reroute","pos":[-5780.629503055472,2398.503837346433],"size":[75,26],"flags":{},"order":129,"mode":4,"inputs":[{"name":"","type":"*","link":2880}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"7","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1351,"type":"Reroute","pos":[-5780.629503055472,2448.503837346433],"size":[75,26],"flags":{},"order":130,"mode":4,"inputs":[{"name":"","type":"*","link":2881}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"8","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1352,"type":"Reroute","pos":[-5780.629503055472,2498.503837346433],"size":[75,26],"flags":{},"order":131,"mode":4,"inputs":[{"name":"","type":"*","link":2882}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"9","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1353,"type":"Reroute","pos":[-5780.629503055472,2748.503837346433],"size":[75,26],"flags":{},"order":152,"mode":4,"inputs":[{"name":"","type":"*","link":2883}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"10","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1375,"type":"Image Flip","pos":[-5860,2170],"size":{"0":210,"1":60},"flags":{},"order":136,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2922}],"outputs":[{"name":"images","type":"IMAGE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Flip"},"widgets_values":["horizontal"]},{"id":40,"type":"ACN_SparseCtrlLoaderAdvanced","pos":[-530.4867680484182,1796.012919709778],"size":{"0":252,"1":150},"flags":{"pinned":true},"order":146,"mode":0,"inputs":[{"name":"sparse_method","type":"SPARSE_METHOD","link":3326},{"name":"tk_optional","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[1301],"shape":3,"slot_index":0}],"title":"Scribble","properties":{"Node name for S&R":"ACN_SparseCtrlLoaderAdvanced"},"widgets_values":["v3_sd15_sparsectrl_scribble.ckpt",true,1,1]},{"id":311,"type":"Image To Mask","pos":[-1000.4867680484182,1906.012919709778],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":418,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":677}],"outputs":[{"name":"MASK","type":"MASK","links":[678],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":312,"type":"InvertMask","pos":[-980.4867680484184,1946.012919709778],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":421,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":678}],"outputs":[{"name":"MASK","type":"MASK","links":[2005],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InvertMask"}},{"id":5,"type":"CLIPTextEncode","pos":[-1450.4867680484167,1936.012919709778],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":331,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2205},{"name":"text","type":"STRING","link":2110,"widget":{"name":"text"},"slot_index":1}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[173],"shape":3,"slot_index":0}],"title":"Neg","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["embedding:bad-hands-5, text, blur, bokeh, photo frame, billboards, lace, frills"],"color":"#332922","bgcolor":"#593930"},{"id":1140,"type":"Reroute","pos":[-1450.4867680484167,2196.0129197097776],"size":[75,26],"flags":{},"order":412,"mode":0,"inputs":[{"name":"","type":"*","link":2515}],"outputs":[{"name":"","type":"IMAGE","links":[],"slot_index":0,"label":"Anim BG"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1042,"type":"VHS_VideoCombine","pos":[7592.836695333145,2906.290451961184],"size":[440,541.4375],"flags":{},"order":590,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2290},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/av1-webm","pix_fmt":"yuv420p10le","crf":23,"input_color_depth":"8bit","save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"AnimateDiff_00050.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}}},{"id":931,"type":"RIFE VFI","pos":[7628.28241730315,1841.7161649661919],"size":{"0":320,"1":222},"flags":{},"order":588,"mode":0,"inputs":[{"name":"frames","type":"IMAGE","link":2771},{"name":"optional_interpolation_states","type":"INTERPOLATION_STATES","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2290,2974],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RIFE VFI"},"widgets_values":["rife47.pth",8,2,true,true,1,true]},{"id":1303,"type":"FrameInterpolator","pos":[7652.836695333141,2726.290451961184],"size":{"0":315,"1":102},"flags":{},"order":589,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2783},{"name":"METADATA","type":"STRING","link":2780,"widget":{"name":"METADATA"}}],"outputs":[{"name":"IMAGES","type":"IMAGE","links":[],"shape":6,"slot_index":0},{"name":"METADATA","type":"STRING","links":[2782],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"FrameInterpolator"},"widgets_values":["",2]},{"id":1302,"type":"SetMetadataForSaveVideo","pos":[7632.836695333146,2136.290451961189],"size":{"0":315,"1":106},"flags":{},"order":27,"mode":0,"outputs":[{"name":"METADATA","type":"STRING","links":[2780],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SetMetadataForSaveVideo"},"widgets_values":[1,24,"manual"]},{"id":1300,"type":"SaveVideo","pos":[7632.836695333146,2296.290451961189],"size":[320,362.00003814697266],"flags":{},"order":591,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2974},{"name":"METADATA","type":"STRING","link":2782,"widget":{"name":"METADATA"},"slot_index":1}],"properties":{"Node name for S&R":"SaveVideo"},"widgets_values":["",true,false,0,null]},{"id":1391,"type":"BNK_CutoffSetRegions","pos":[-1000.4867680484182,2756.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":356,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2969},{"name":"region_text","type":"STRING","link":2980,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2981,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2970],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 2","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["blonde hair","blonde",1],"color":"#223","bgcolor":"#335"},{"id":1393,"type":"BNK_CutoffSetRegions","pos":[-750.4867680484185,2756.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":366,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2970},{"name":"region_text","type":"STRING","link":2982,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2983,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2971],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 3","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["","red",1],"color":"#223","bgcolor":"#335"},{"id":1405,"type":"PrimitiveNode","pos":[-530.4867680484182,2646.0129197097776],"size":{"0":210,"1":58},"flags":{},"order":28,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2985,2999],"widget":{"name":"target_text"}}],"title":"Target Text","properties":{"Run widget replace on values":false},"widgets_values":["red"],"color":"#223","bgcolor":"#335"},{"id":512,"type":"Reroute","pos":[1201.2763273398807,1998.8013366005582],"size":[75,26],"flags":{},"order":449,"mode":0,"inputs":[{"name":"","type":"*","link":1102}],"outputs":[{"name":"","type":"LATENT","links":[],"slot_index":0,"label":"Empty"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":513,"type":"Reroute","pos":[1201.2763273398807,2038.801336600558],"size":[75,26],"flags":{},"order":440,"mode":0,"inputs":[{"name":"","type":"*","link":2112}],"outputs":[{"name":"","type":"LATENT","links":[],"slot_index":0,"label":"Latent"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":511,"type":"Reroute","pos":[1201.2763273398807,2078.801336600557],"size":[75,26],"flags":{},"order":451,"mode":0,"inputs":[{"name":"","type":"*","link":2336}],"outputs":[{"name":"","type":"LATENT","links":[2551],"slot_index":0,"label":"Image"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":136,"type":"ACN_AdvancedControlNetApply","pos":[1061.2763273398803,2148.8013366005575],"size":{"0":230,"1":250},"flags":{},"order":443,"mode":4,"inputs":[{"name":"positive","type":"CONDITIONING","link":3005,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":2107},{"name":"control_net","type":"CONTROL_NET","link":3007,"slot_index":2},{"name":"image","type":"IMAGE","link":310,"slot_index":3},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":5},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1407],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1408],"shape":3,"slot_index":1}],"title":"Tile","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,0.5]},{"id":1416,"type":"Reroute","pos":[1081.2763273398805,2068.801336600557],"size":[75,26],"flags":{},"order":119,"mode":0,"inputs":[{"name":"","type":"*","link":3006}],"outputs":[{"name":"","type":"CONTROL_NET","links":[3007],"label":"Tile","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":971,"type":"Reroute","pos":[711.2763273398815,1938.8013366005582],"size":[75,26],"flags":{},"order":200,"mode":0,"inputs":[{"name":"","type":"*","link":2306}],"outputs":[{"name":"","type":"MODEL","links":[2521],"slot_index":0,"label":"Diff"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":656,"type":"Reroute","pos":[711.2763273398815,1988.8013366005582],"size":[75,26],"flags":{},"order":355,"mode":0,"inputs":[{"name":"","type":"*","link":2305}],"outputs":[{"name":"","type":"CLIP","links":[1979,2986],"slot_index":0,"label":"Diff"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":736,"type":"CLIPTextEncode","pos":[711.2763273398815,2178.801336600558],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":364,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":1979},{"name":"text","type":"STRING","link":2111,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[2107],"shape":3,"slot_index":0}],"title":"Neg","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["embedding:bad-hands-5, text, blur, bokeh, photo frame, billboards, lace, frills"],"color":"#332922","bgcolor":"#593930"},{"id":1376,"type":"ImageScaleBy","pos":[-5120,2100],"size":{"0":210,"1":82},"flags":{},"order":242,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2931}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2930],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.25]},{"id":543,"type":"ImageScaleBy","pos":[3425.2166092559355,-80.48835454456133],"size":{"0":210,"1":82},"flags":{},"order":185,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1192}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1966],"shape":3,"slot_index":0}],"title":"Downscale for Detect","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.5]},{"id":902,"type":"MaskToImage","pos":[3556.3372918655264,306.8283677610717],"size":{"0":210,"1":26},"flags":{"collapsed":false},"order":326,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1960}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1968],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":905,"type":"SegsToCombinedMask","pos":[3536.3372918655264,266.8283677610717],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":301,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":1963}],"outputs":[{"name":"MASK","type":"MASK","links":[1960],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"}},{"id":1156,"type":"Note","pos":[-1560.4867680484165,2286.0129197097776],"size":{"0":210,"1":110},"flags":{},"order":29,"mode":0,"properties":{"text":""},"widgets_values":["BG is static(partial animated)\nAnim BG is zoom/pan from below\n\nSparse Method should be uniform for videos\nCenter or uniform for images"],"color":"#432","bgcolor":"#653"},{"id":1047,"type":"Reroute","pos":[1599.4799919650252,1309.1657992476314],"size":[75,26],"flags":{},"order":175,"mode":0,"inputs":[{"name":"","type":"*","link":3269}],"outputs":[{"name":"","type":"MODEL","links":[2306],"slot_index":0,"label":"Model"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1048,"type":"Reroute","pos":[1599.4799919650252,1349.1657992476314],"size":[75,26],"flags":{},"order":342,"mode":0,"inputs":[{"name":"","type":"*","link":3270}],"outputs":[{"name":"","type":"CLIP","links":[2305],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":1277,"type":"Get Image Size","pos":[1182.414332012207,-2778.829847772648],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":210,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2748}],"outputs":[{"name":"INT","type":"INT","links":[2745],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[2746],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":1241,"type":"Robust Video Matting","pos":[1861.7433212890385,-2540.596044200966],"size":{"0":210,"1":150},"flags":{},"order":212,"mode":4,"inputs":[{"name":"video_frames","type":"IMAGE","link":2702}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null,"shape":3},{"name":"MASK","type":"MASK","links":[2703],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Robust Video Matting"},"widgets_values":["resnet50",false,"black",4]},{"id":1254,"type":"Mask Morphology","pos":[1132.414332012207,-2318.829847772649],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":274,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2721}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2722],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[4,"open"]},{"id":1429,"type":"Reroute","pos":[1062.414332012207,-2638.829847772648],"size":[75,26],"flags":{},"order":148,"mode":4,"inputs":[{"name":"","type":"*","link":3044}],"outputs":[{"name":"","type":"SAM_MODEL","links":null,"label":"SAM"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1324,"type":"Reroute","pos":[-5510,2250],"size":[75,26],"flags":{},"order":170,"mode":4,"inputs":[{"name":"","type":"*","link":3057}],"outputs":[{"name":"","type":"IMAGE","links":[2870],"slot_index":0,"label":"6"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1323,"type":"Reroute","pos":[-5504.142217440573,2208.1648775083045],"size":[75,26],"flags":{},"order":172,"mode":4,"inputs":[{"name":"","type":"*","link":3056}],"outputs":[{"name":"","type":"IMAGE","links":[2869],"slot_index":0,"label":"5"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1322,"type":"Reroute","pos":[-5507.321551537283,2167.0542270488922],"size":[75,26],"flags":{},"order":171,"mode":4,"inputs":[{"name":"","type":"*","link":3054}],"outputs":[{"name":"","type":"IMAGE","links":[2868],"slot_index":0,"label":"4"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1321,"type":"Reroute","pos":[-5504.142217440573,2128.1648775083045],"size":[75,26],"flags":{},"order":169,"mode":4,"inputs":[{"name":"","type":"*","link":3055}],"outputs":[{"name":"","type":"IMAGE","links":[2817],"slot_index":0,"label":"3"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1320,"type":"Reroute","pos":[-5504.142217440573,2088.164877508305],"size":[75,26],"flags":{},"order":174,"mode":4,"inputs":[{"name":"","type":"*","link":3053}],"outputs":[{"name":"","type":"IMAGE","links":[2816],"slot_index":0,"label":"2"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1319,"type":"Reroute","pos":[-5504.142217440573,2048.164877508305],"size":[75,26],"flags":{},"order":168,"mode":4,"inputs":[{"name":"","type":"*","link":3052}],"outputs":[{"name":"","type":"IMAGE","links":[2800],"slot_index":0,"label":"1"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1314,"type":"Reroute","pos":[-5761.374423211043,1672.0613290358108],"size":[75,26],"flags":{},"order":134,"mode":4,"inputs":[{"name":"","type":"*","link":2918}],"outputs":[{"name":"","type":"IMAGE","links":[3045,3053],"slot_index":0,"label":"2"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1328,"type":"PreviewImage","pos":[-4880,1920],"size":{"0":530,"1":620},"flags":{},"order":291,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2837}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1315,"type":"Reroute","pos":[-5761.374423211043,1722.0613290358106],"size":[75,26],"flags":{},"order":127,"mode":4,"inputs":[{"name":"","type":"*","link":2786}],"outputs":[{"name":"","type":"IMAGE","links":[3054,3056],"slot_index":0,"label":"3"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1313,"type":"Reroute","pos":[-5761.374423211043,1622.0613290358103],"size":[75,26],"flags":{},"order":126,"mode":4,"inputs":[{"name":"","type":"*","link":2784}],"outputs":[{"name":"","type":"IMAGE","links":[3052,3055,3057],"slot_index":0,"label":"1"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1371,"type":"Reroute","pos":[-4333.938688645164,1911.9983898120447],"size":[75,26],"flags":{},"order":292,"mode":4,"inputs":[{"name":"","type":"*","link":2919}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"Base","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":882,"type":"VHS_VideoCombine","pos":[5712.985616180967,3134.779846756741],"size":[440,696.1964285714287],"flags":{},"order":566,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1926},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"AnimateDiff_00285.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":1120,"type":"Create Frame Set [DVB]","pos":[-3709.2015899136445,2340.272750596325],"size":{"0":210,"1":130},"flags":{},"order":380,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2467}],"outputs":[{"name":"frames","type":"FRAME_SET","links":[2462,2522],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Create Frame Set [DVB]"},"widgets_values":[0,1,70,1]},{"id":969,"type":"ADE_AnimateDiffLoaderWithContext","pos":[153.09351167184144,1241.2864803613177],"size":{"0":230,"1":210},"flags":{},"order":166,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2491},{"name":"context_options","type":"CONTEXT_OPTIONS","link":2100,"slot_index":1},{"name":"motion_lora","type":"MOTION_LORA","link":null,"slot_index":2},{"name":"motion_model_settings","type":"MOTION_MODEL_SETTINGS","link":null},{"name":"sample_settings","type":"sample_settings","link":2778,"slot_index":4}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2497],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["v3_sd15_mm.ckpt","sqrt_linear (AnimateDiff)",1,true]},{"id":35,"type":"ADE_AnimateDiffLoaderWithContext","pos":[-1339.0565103954752,456.9485593747731],"size":{"0":230,"1":210},"flags":{},"order":190,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1595},{"name":"context_options","type":"CONTEXT_OPTIONS","link":56,"slot_index":1},{"name":"motion_lora","type":"MOTION_LORA","link":null},{"name":"motion_model_settings","type":"MOTION_MODEL_SETTINGS","link":null,"slot_index":3},{"name":"sample_settings","type":"sample_settings","link":2554,"slot_index":4}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3015],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["v3_sd15_mm.ckpt","sqrt_linear (AnimateDiff)",1,true]},{"id":233,"type":"ImageScale","pos":[-3324.89724335998,306.98783247131274],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":349,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":578},{"name":"width","type":"INT","link":533,"widget":{"name":"width"}},{"name":"height","type":"INT","link":534,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[584],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1413,"type":"BNK_CutoffSetRegions","pos":[-510.4867680484181,2806.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":408,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2997},{"name":"region_text","type":"STRING","link":2998,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2999,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[3004],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 4","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["red lips","red",1],"color":"#223","bgcolor":"#335"},{"id":1414,"type":"BNK_CutoffSetRegions","pos":[-750.4867680484185,2806.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":397,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":3000},{"name":"region_text","type":"STRING","link":3001,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":3002,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2997],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 3","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["","red",1],"color":"#223","bgcolor":"#335"},{"id":1412,"type":"BNK_CutoffSetRegions","pos":[-1000.4867680484182,2806.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":387,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2994},{"name":"region_text","type":"STRING","link":2995,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2996,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[3000],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 2","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["blonde hair","blonde",1],"color":"#223","bgcolor":"#335"},{"id":604,"type":"ACN_SparseCtrlLoaderAdvanced","pos":[-790.4867680484185,1796.012919709778],"size":{"0":252,"1":150},"flags":{},"order":147,"mode":0,"inputs":[{"name":"sparse_method","type":"SPARSE_METHOD","link":3328},{"name":"tk_optional","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[1300],"shape":3,"slot_index":0}],"title":"RGB","properties":{"Node name for S&R":"ACN_SparseCtrlLoaderAdvanced"},"widgets_values":["v3_sd15_sparsectrl_rgb.ckpt",true,1,1]},{"id":1131,"type":"ShowText|pysssss","pos":[-638.9326645395042,1407.1958094335014],"size":{"0":210,"1":260},"flags":{},"order":257,"mode":0,"inputs":[{"name":"text","type":"STRING","link":2475,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Lora Keywords","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":[""]},{"id":1293,"type":"Note","pos":[3011.6651680580794,1807.2719060875813],"size":{"0":210,"1":58},"flags":{},"order":30,"mode":0,"properties":{"text":""},"widgets_values":["if not upscaling bypass this upscale node in green and the model upscale"],"color":"#432","bgcolor":"#653"},{"id":1045,"type":"Reroute","pos":[1605.698639867196,825.0526169092022],"size":[75,26],"flags":{},"order":260,"mode":0,"inputs":[{"name":"","type":"*","link":2297}],"outputs":[{"name":"","type":"MODEL","links":[2299,2555,3115],"slot_index":0,"label":"Model"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":185,"type":"VAEEncode","pos":[4501.065239310648,502.4787073556543],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":482,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":410},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1256],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":1425,"type":"ImpactSimpleDetectorSEGS","pos":[1142.414332012207,-2678.829847772648],"size":{"0":210,"1":310},"flags":{},"order":211,"mode":4,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":3033,"slot_index":0},{"name":"image","type":"IMAGE","link":3412},{"name":"sam_model_opt","type":"SAM_MODEL","link":null},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":3034}],"outputs":[{"name":"SEGS","type":"SEGS","links":[3035],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS"},"widgets_values":[0.32,0,3,10,0.5,0,0,0.7,0]},{"id":901,"type":"UltralyticsDetectorProvider","pos":[3426.337291865526,136.82836776107192],"size":{"0":210,"1":80},"flags":{},"order":31,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[1959,3033,3128],"shape":3,"slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[3034,3129],"shape":3,"slot_index":1}],"title":"DetectorProvider","properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["segm/person_yolov8s-seg.pt"]},{"id":1464,"type":"Reroute","pos":[-4450.203748718917,-96.54174266855067],"size":[75,26],"flags":{},"order":157,"mode":4,"inputs":[{"name":"","type":"*","link":3131}],"outputs":[{"name":"","type":"*","links":[3138],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1469,"type":"RebatchImages","pos":[-4350.203748718918,-66.54174266855108],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":181,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3138}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3139],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":1463,"type":"Reroute","pos":[-4450.203748718917,-56.54174266855118],"size":[75,26],"flags":{},"order":149,"mode":4,"inputs":[{"name":"","type":"*","link":3127}],"outputs":[{"name":"","type":"SAM_MODEL","links":null,"slot_index":0,"label":"SAM"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1460,"type":"ImpactSimpleDetectorSEGS","pos":[-4410.203748718917,13.458257331448436],"size":{"0":210,"1":310},"flags":{},"order":206,"mode":4,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":3128,"slot_index":0},{"name":"image","type":"IMAGE","link":3139},{"name":"sam_model_opt","type":"SAM_MODEL","link":null},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":3129}],"outputs":[{"name":"SEGS","type":"SEGS","links":[3136],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS"},"widgets_values":[0.32,0,3,10,0.5,0,0,0.7,0]},{"id":1467,"type":"Mask Morphology","pos":[-4190.203748718917,93.4582573314484],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":324,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3133}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3190],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"close"]},{"id":1468,"type":"ImpactSEGSRangeFilter","pos":[-4190.203748718917,213.45825733144846],"size":{"0":210,"1":150},"flags":{},"order":227,"mode":4,"inputs":[{"name":"segs","type":"SEGS","link":3136}],"outputs":[{"name":"filtered_SEGS","type":"SEGS","links":[3137],"shape":3,"slot_index":0},{"name":"remained_SEGS","type":"SEGS","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ImpactSEGSRangeFilter"},"widgets_values":["height",true,218,67108864]},{"id":1211,"type":"Reroute","pos":[-3464.1209936527616,400.96972342203924],"size":[75,26],"flags":{},"order":156,"mode":4,"inputs":[{"name":"","type":"*","link":3130}],"outputs":[{"name":"","type":"*","links":[2647],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":852,"type":"Cut By Mask","pos":[5012.985616180967,2834.779846756742],"size":{"0":230,"1":122},"flags":{"collapsed":true},"order":544,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2059},{"name":"mask","type":"IMAGE","link":1855},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":2350}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1896,2397,3149],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Cut By Mask"},"widgets_values":[0,0]},{"id":1465,"type":"MaskToImage","pos":[-4404.244500672041,397.7181706615273],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":270,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":3135}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3134],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1461,"type":"SegsToCombinedMask","pos":[-4194.244500672041,397.7181706615273],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":247,"mode":4,"inputs":[{"name":"segs","type":"SEGS","link":3137}],"outputs":[{"name":"MASK","type":"MASK","links":[3135],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"}},{"id":756,"type":"Reroute","pos":[6101.06523931065,472.4787073556543],"size":[75,26],"flags":{},"order":520,"mode":0,"inputs":[{"name":"","type":"*","link":1669}],"outputs":[{"name":"","type":"IMAGE","links":[2318],"label":"List","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1044,"type":"Reroute","pos":[4462.985616180967,2634.779846756741],"size":[75,26],"flags":{},"order":290,"mode":0,"inputs":[{"name":"","type":"*","link":3318}],"outputs":[{"name":"","type":"CLIP","links":[2295,2296],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":264,"type":"RescaleCFG","pos":[-1039.0565103954752,696.9485593747706],"size":{"0":210,"1":60},"flags":{},"order":256,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3020}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2496],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RescaleCFG"},"widgets_values":[0.6],"color":"#232","bgcolor":"#353"},{"id":1415,"type":"BNK_CutoffRegionsToConditioning_ADV","pos":[811.2763273398816,2158.801336600558],"size":{"0":211.60000610351562,"1":154},"flags":{},"order":416,"mode":0,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":3004}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3005],"shape":3,"slot_index":0}],"title":"Regions To Conditioning","properties":{"Node name for S&R":"BNK_CutoffRegionsToConditioning_ADV"},"widgets_values":["",1,1,"none","comfy++"],"color":"#432","bgcolor":"#653"},{"id":1392,"type":"BNK_CutoffSetRegions","pos":[-510.4867680484181,2756.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":377,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2971},{"name":"region_text","type":"STRING","link":2984,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2985,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2972],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 4","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["red lips","red",1],"color":"#223","bgcolor":"#335"},{"id":1389,"type":"BNK_CutoffSetRegions","pos":[-1250.4867680484167,2756.0129197097776],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":343,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2967},{"name":"region_text","type":"STRING","link":2978,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2979,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2969],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 1","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["black bikini","black",1],"color":"#223","bgcolor":"#335"},{"id":1,"type":"KSamplerAdvanced","pos":[-230.48676804841816,1996.012919709778],"size":{"0":320,"1":550},"flags":{},"order":431,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":833,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":2954},{"name":"negative","type":"CONDITIONING","link":2955},{"name":"latent_image","type":"LATENT","link":8,"slot_index":3},{"name":"noise_seed","type":"INT","link":null,"widget":{"name":"noise_seed"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1180,2957],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446114956,"fixed",12,2.2,"lcm","sgm_uniform",0,118,"disable"]},{"id":332,"type":"PrimitiveNode","pos":[-2146.022684474114,2239.925401144911],"size":{"0":210,"1":82},"flags":{},"order":32,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[735,736],"widget":{"name":"noise_seed"},"slot_index":0}],"title":"Seed","properties":{"Run widget replace on values":false},"widgets_values":[907666446124199,"fixed"],"color":"#232","bgcolor":"#353"},{"id":36,"type":"ADE_AnimateDiffUniformContextOptions","pos":[-1339.0565103954752,706.9485593747704],"size":{"0":252,"1":154},"flags":{},"order":33,"mode":0,"outputs":[{"name":"CONTEXT_OPTIONS","type":"CONTEXT_OPTIONS","links":[56,2100],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,3,4,"uniform",false]},{"id":1404,"type":"PrimitiveNode","pos":[-530.4867680484182,2536.0129197097776],"size":{"0":210,"1":80},"flags":{},"order":34,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2984,2998],"widget":{"name":"region_text"}}],"title":"Text from Prompt","properties":{"Run widget replace on values":false},"widgets_values":["red lips"],"color":"#223","bgcolor":"#335"},{"id":505,"type":"ImageGenResolutionFromImage","pos":[-3548.6848881121377,1311.7663122385375],"size":{"0":270,"1":50},"flags":{"collapsed":true},"order":182,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2152}],"outputs":[{"name":"IMAGE_GEN_WIDTH (INT)","type":"INT","links":[1086],"shape":3,"slot_index":0},{"name":"IMAGE_GEN_HEIGHT (INT)","type":"INT","links":[1087],"shape":3,"slot_index":1}],"title":"Get Res","properties":{"Node name for S&R":"ImageGenResolutionFromImage"}},{"id":707,"type":"ImageScale","pos":[5758.166035134258,1503.6346010148602],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":521,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1524},{"name":"width","type":"INT","link":1569,"widget":{"name":"width"}},{"name":"height","type":"INT","link":1570,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1526],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1471,"type":"ImageScale","pos":[-4344.103094845398,-23.295969921137193],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":348,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3191},{"name":"width","type":"INT","link":3143,"widget":{"name":"width"}},{"name":"height","type":"INT","link":3144,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3140],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1493,"type":"Change Channel Count","pos":[-4404.103094845397,366.70403007886296],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":336,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3190}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3191],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1470,"type":"RebatchImages","pos":[-4144.103094845398,-63.295969921137264],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":358,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3140},{"name":"batch_size","type":"INT","link":3141,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3146],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":518,"type":"VHS_GetImageCount","pos":[1051.27632733988,1888.8013366005582],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":445,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1120}],"outputs":[{"name":"count","type":"INT","links":[1121,2329,3192],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":251,"type":"RebatchImages","pos":[-3575.17786835998,-34.07244096618737],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":249,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":577}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[770],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":1466,"type":"Mask Morphology","pos":[-4190.203748718917,-26.541742668551578],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":297,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3134}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3133],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"open"]},{"id":702,"type":"ImageScaleBy","pos":[4738.166035134258,1373.6346010148604],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":383,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3415},{"name":"scale_by","type":"FLOAT","link":2044,"widget":{"name":"scale_by"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1561],"shape":3,"slot_index":0}],"title":"Upscale Cutouts","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",1.2],"color":"#232","bgcolor":"#353"},{"id":699,"type":"KSamplerAdvanced","pos":[5028.166035134258,1513.6346010148604],"size":{"0":450,"1":740},"flags":{},"order":513,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3296,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":1504},{"name":"negative","type":"CONDITIONING","link":1505},{"name":"latent_image","type":"LATENT","link":2039,"slot_index":3},{"name":"noise_seed","type":"INT","link":null,"widget":{"name":"noise_seed"},"slot_index":4}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2348,2419],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446114956,"fixed",16,1.3,"lcm","sgm_uniform",8,10000,"disable"]},{"id":701,"type":"VAEEncode","pos":[4748.166035134258,1463.6346010148604],"size":{"0":140,"1":50},"flags":{"collapsed":true},"order":406,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":1564},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2038],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":1073,"type":"VAEDecodeTiled","pos":[5368.166035134258,1383.6346010148604],"size":{"0":210,"1":80},"flags":{"collapsed":false},"order":515,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":2348},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecodeTiled"},"widgets_values":[512]},{"id":1076,"type":"VAEDecode","pos":[5138.166035134258,1393.6346010148604],"size":{"0":210,"1":46},"flags":{"collapsed":false},"order":516,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":2419},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2420],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":955,"type":"Reroute","pos":[-1450.4867680484167,2156.0129197097776],"size":[75,26],"flags":{},"order":399,"mode":0,"inputs":[{"name":"","type":"*","link":2199}],"outputs":[{"name":"","type":"IMAGE","links":[3171,3201],"slot_index":0,"label":"BG"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1304,"type":"Note","pos":[7013.908610566165,3437.456896348859],"size":{"0":340,"1":180},"flags":{},"order":35,"mode":0,"properties":{"text":""},"widgets_values":["faces are 1 number off, start at 1\n\nTo-do\nChange this to a face selector and include an image combine to process multiple faces easily.\n\nI dont know if reactor needs 1 image for bases for multiple people, i think it does and if so this probably wont work on 2 or more people. it sends a batch.  i think it needs 1 image per frame with all faces in it. My other workflows have this fixed i think. I will be porting those nodes here at some point."],"color":"#432","bgcolor":"#653"},{"id":1215,"type":"RebatchImages","pos":[-3102.2292615773044,-183.07017267213158],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":335,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3084},{"name":"batch_size","type":"INT","link":2653,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2655],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":1443,"type":"ImageScale","pos":[-3272.2292615773044,-183.07017267213158],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":323,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3086},{"name":"width","type":"INT","link":3081,"widget":{"name":"width"}},{"name":"height","type":"INT","link":3082,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3084],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1444,"type":"Change Channel Count","pos":[-3482.2292615773044,-183.07017267213158],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":296,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3085}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3086],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1207,"type":"Mask Morphology","pos":[-3492.2292615773044,-333.0701726721318],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":245,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2641}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2642],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"open"]},{"id":1208,"type":"Mask Morphology","pos":[-3262.2292615773044,-333.0701726721318],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":267,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2642}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2643,3085],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"close"]},{"id":1445,"type":"ToBinaryMask","pos":[-3502.2292615773044,-483.0701726721318],"size":{"0":210,"1":60},"flags":{},"order":204,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":3087}],"outputs":[{"name":"MASK","type":"MASK","links":[3088],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBinaryMask"},"widgets_values":[15]},{"id":1203,"type":"MaskToImage","pos":[-3492.2292615773044,-373.0701726721318],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":225,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":3088}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2641],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1442,"type":"AnimeFace_SemSegPreprocessor","pos":[-3502.2292615773044,-623.0701726721312],"size":{"0":262,"1":102},"flags":{},"order":179,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3076,"slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null,"shape":3,"slot_index":0},{"name":"ABG_CHARACTER_MASK (MASK)","type":"MASK","links":[3087],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"AnimeFace_SemSegPreprocessor"},"widgets_values":[true,512]},{"id":1204,"type":"PreviewImage","pos":[-3232.2292615773044,-633.0701726721312],"size":{"0":260,"1":260},"flags":{"collapsed":false},"order":295,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2643}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1128,"type":"LoraLoaderTagsQuery","pos":[-874.3222042245,1393.0440939166879],"size":{"0":230,"1":270},"flags":{},"order":236,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":3017},{"name":"clip","type":"CLIP","link":3019},{"name":"opt_prompt","type":"STRING","link":null,"widget":{"name":"opt_prompt"}}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3020],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[3021],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":[2475],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"LoraLoaderTagsQuery"},"widgets_values":["bellydance.safetensors",0.6000000000000001,1,true,false,false,false,false,""]},{"id":1127,"type":"LoraLoader","pos":[433.0935116718415,1241.2864803613177],"size":{"0":210,"1":130},"flags":{},"order":192,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2497},{"name":"clip","type":"CLIP","link":2498}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2765],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2766],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["bellydance.safetensors",0.8,1]},{"id":256,"type":"LoraLoader","pos":[683.0935116718424,1231.2864803613177],"size":{"0":210,"1":130},"flags":{},"order":218,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2765},{"name":"clip","type":"CLIP","link":2766}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2501],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2459],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["bellydance.safetensors",0.6,1]},{"id":1138,"type":"LoraLoader","pos":[223.09351167184155,691.2864803613179],"size":{"0":210,"1":130},"flags":{},"order":125,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2506,"slot_index":0},{"name":"clip","type":"CLIP","link":2507}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2508],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2509],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["bellydance.safetensors",0.6,1]},{"id":1137,"type":"LoraLoader","pos":[463.09351167184184,691.2864803613179],"size":{"0":210,"1":130},"flags":{},"order":167,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2508,"slot_index":0},{"name":"clip","type":"CLIP","link":2509}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2512],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2511],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["bellydance.safetensors",0.6,1]},{"id":540,"type":"PrimitiveNode","pos":[-250.48676804841816,1786.012919709778],"size":{"0":210,"1":82},"flags":{},"order":36,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[1181,1182],"widget":{"name":"batch_size"},"slot_index":0}],"title":"Frames","properties":{"Run widget replace on values":false},"widgets_values":[32,"fixed"],"color":"#223","bgcolor":"#335"},{"id":538,"type":"RebatchLatents","pos":[640.5525584125998,2882.4536076460095],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":432,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":1180}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1179],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchLatents"},"widgets_values":[1],"color":"#232","bgcolor":"#353"},{"id":149,"type":"RebatchLatents","pos":[810.5525584125998,2882.4536076460095],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":454,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":1119}],"outputs":[{"name":"LATENT","type":"LATENT","links":[335],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchLatents"},"widgets_values":[1],"color":"#232","bgcolor":"#353"},{"id":1069,"type":"RebatchImages","pos":[810.5525584125998,2932.4536076460095],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":446,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2328}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2331],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1],"color":"#232","bgcolor":"#353"},{"id":326,"type":"RebatchImages","pos":[1000.5525584126009,2882.4536076460095],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":458,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":710},{"name":"batch_size","type":"INT","link":3192,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[711,2539],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[32],"color":"#232","bgcolor":"#353"},{"id":1068,"type":"RebatchLatents","pos":[1000.5525584126009,2932.4536076460095],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":450,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":2335},{"name":"batch_size","type":"INT","link":2329,"widget":{"name":"batch_size"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2336],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchLatents"},"widgets_values":[1],"color":"#232","bgcolor":"#353"},{"id":1406,"type":"BNK_CutoffBasePrompt","pos":[701.2763273398815,2218.801336600558],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":365,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2986},{"name":"text","type":"STRING","link":2987,"widget":{"name":"text"}}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[3003],"shape":3,"slot_index":0}],"title":"Postive","properties":{"Node name for S&R":"BNK_CutoffBasePrompt"},"widgets_values":["1girl, solo, long_hair, breasts, black_hair, navel, swimsuit, bikini, cowboy_shot, day, armpits, arms_up, side-tie_bikini_bottom, red_bikini, realistic"],"color":"#223","bgcolor":"#335"},{"id":987,"type":"TilePreprocessor","pos":[-530.4867680484182,2416.0129197097776],"size":{"0":210,"1":80},"flags":{},"order":427,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3181},{"name":"resolution","type":"INT","link":3183,"widget":{"name":"resolution"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3369],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"TilePreprocessor"},"widgets_values":[1,768]},{"id":1497,"type":"PreviewImage","pos":[-5280,1520],"size":{"0":640,"1":270},"flags":{},"order":346,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3205}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1020,"type":"Note","pos":[-5230,740],"size":{"0":880,"1":270},"flags":{},"order":37,"mode":0,"properties":{"text":""},"widgets_values":["Load the video here \n\nCrop and pad the video to frame the subject in where you want them, can pad for widescreen from a portrait, the background will scale to this padding.\nI find it best to just crop everything except the subject I want, to make it easier to mask, but you do not need to do that.\n\nRescale the video to the size you want to make the base at. Can be quite small.  360x360??  Anywhere around 512 on either side is a good base.\n\nDisconnect the base > Start to hold it here till you get the size and everything else correct.\n\nSelect every allows you to drop the number of input frames for processing, this works at 2,3,4 with sparse controls. 2 catches most of the motion.  As you go up, you loose fine details of the movement but keep the main parts.  This also depends on input FPS. \n\nI usually do 32 frames, aiming for 12fps output 24 with frame interpolation.\n\nI aim to have the output in this loader group to be 6 fps with \nselect every 2nd in the loader to bring it in at 12fps(from 24) \nselect every 2nd in the second to lower the frames brought in for sparse controls to 16.  Half the total frames the loader brought in\n\nSometimes I bring in every 4 here for 8 / 32 frames for sparse.  Fewer frames you bring in, the faster it processes, but you can lose fine details of the motion."],"color":"#432","bgcolor":"#653"},{"id":1132,"type":"LoraLoaderTagsQuery","pos":[-1344.3222042244997,1403.0440939166879],"size":{"0":230,"1":270},"flags":{},"order":216,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":3015},{"name":"clip","type":"CLIP","link":3016},{"name":"opt_prompt","type":"STRING","link":null,"widget":{"name":"opt_prompt"}}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3017],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[3019],"shape":3,"slot_index":1},{"name":"STRING","type":"STRING","links":[2476],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"LoraLoaderTagsQuery"},"widgets_values":["bellydance.safetensors",1,1,true,false,false,false,false,""]},{"id":909,"type":"Mask To Region","pos":[3866.3372918655214,-83.171632238928],"size":{"0":210,"1":202},"flags":{"collapsed":false},"order":338,"mode":0,"inputs":[{"name":"mask","type":"IMAGE","link":1968}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3013,3209],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask To Region"},"widgets_values":[10,"ignore",64,64,0,0,"match_size"]},{"id":1288,"type":"Note","pos":[-106.9064883281586,1201.2864803613177],"size":{"0":210,"1":90},"flags":{},"order":38,"mode":0,"properties":{"text":""},"widgets_values":["This is the v3 animate diff lora, i find it does nothing.  \n\nPerhaps i am using it wrong, perhaps it goes after the diff loader?"],"color":"#432","bgcolor":"#653"},{"id":1135,"type":"LoraLoader","pos":[-106.9064883281586,1031.2864803613177],"size":{"0":210,"1":130},"flags":{},"order":124,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2489,"slot_index":0},{"name":"clip","type":"CLIP","link":2490}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2491],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2498],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["v3_sd15_adapter.ckpt",0.8,1]},{"id":1252,"type":"PreviewImage","pos":[1372.4143320122064,-2738.829847772648],"size":{"0":230,"1":320},"flags":{"collapsed":false},"order":374,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3290}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":755,"type":"UpscaleModelLoader","pos":[2886.668464235165,2014.6859099633305],"size":{"0":315,"1":58},"flags":{},"order":39,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[1668],"shape":3}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x_NickelbackFS_72000_G.pth"]},{"id":1133,"type":"ShowText|pysssss","pos":[-1098.9326645395045,1407.1958094335014],"size":{"0":210,"1":260},"flags":{},"order":237,"mode":0,"inputs":[{"name":"text","type":"STRING","link":2476,"widget":{"name":"text"}}],"outputs":[{"name":"STRING","type":"STRING","links":null,"shape":6}],"title":"Lora Keywords","properties":{"Node name for S&R":"ShowText|pysssss"},"widgets_values":["","pregnant"]},{"id":773,"type":"RescaleCFG","pos":[-2146.022684474114,2369.925401144911],"size":{"0":210,"1":60},"flags":{},"order":217,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2772}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2777],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RescaleCFG"},"widgets_values":[0.6],"color":"#232","bgcolor":"#353"},{"id":1290,"type":"SelfAttentionGuidance","pos":[-2146.022684474114,2479.925401144911],"size":{"0":210,"1":82},"flags":{},"order":238,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2777}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2776],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.5,2],"color":"#232","bgcolor":"#353"},{"id":1224,"type":"LoraLoader","pos":[-2816.0226844741114,1819.9254011449104],"size":{"0":210,"1":130},"flags":{},"order":165,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2714},{"name":"clip","type":"CLIP","link":2716}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2669],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2670],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["Gothpunk.safetensors",1,1]},{"id":1164,"type":"LoraLoader","pos":[-2586.0226844741114,1819.9254011449104],"size":{"0":210,"1":130},"flags":{},"order":191,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":2669},{"name":"clip","type":"CLIP","link":2670}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2772],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2585],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["Gothpunk.safetensors",1,1]},{"id":730,"type":"LoraLoader","pos":[-2356.0226844741123,1819.9254011449104],"size":{"0":210,"1":130},"flags":{},"order":258,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2776,"slot_index":0},{"name":"clip","type":"CLIP","link":2585}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2774,2775],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[1604,1605],"shape":3,"slot_index":1}],"title":"LCM Lora","properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["lcm\\SD1.5\\pytorch_lora_weights.safetensors",0.6,1]},{"id":79,"type":"ImageScaleBy","pos":[-5040,1350],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":265,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2136},{"name":"scale_by","type":"FLOAT","link":193,"widget":{"name":"scale_by"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3479],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.5]},{"id":610,"type":"Reroute","pos":[-3644.6169500040096,1321.5043433925994],"size":[75,26],"flags":{},"order":159,"mode":0,"inputs":[{"name":"","type":"*","link":3219}],"outputs":[{"name":"","type":"*","links":[2152,2153,2160],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":2,"type":"LoraLoader","pos":[-759.0565103954735,666.9485593747709],"size":{"0":210,"1":130},"flags":{},"order":279,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2496,"slot_index":0},{"name":"clip","type":"CLIP","link":3021}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2487],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2488,2518,3246],"shape":3,"slot_index":1}],"title":"LCM Lora","properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["lcm\\SD1.5\\pytorch_lora_weights.safetensors",0.6,1]},{"id":997,"type":"Reroute","pos":[-1440.4867680484167,1836.012919709778],"size":[75,26],"flags":{},"order":307,"mode":0,"inputs":[{"name":"","type":"*","link":3246}],"outputs":[{"name":"","type":"CLIP","links":[2205,2966],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":1018,"type":"Reroute","pos":[-1450.4867680484167,2016.012919709778],"size":[75,26],"flags":{},"order":117,"mode":0,"inputs":[{"name":"","type":"*","link":2255}],"outputs":[{"name":"","type":"CONTROL_NET","links":[],"label":"Tile","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":608,"type":"Reroute","pos":[-2852.29625518984,1116.4037629959903],"size":[75,26],"flags":{},"order":390,"mode":0,"inputs":[{"name":"","type":"*","link":2159}],"outputs":[{"name":"","type":"IMAGE","links":[2199,3368],"slot_index":0,"label":"BG"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":59,"type":"EmptyLatentImage","pos":[-2832.967016303862,2017.9096490237075],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":223,"mode":0,"inputs":[{"name":"width","type":"INT","link":3249,"widget":{"name":"width"}},{"name":"height","type":"INT","link":3250,"widget":{"name":"height"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[105],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":579,"type":"ImageScale","pos":[-2092.9670163038636,1827.9096490237077],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":368,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2067},{"name":"width","type":"INT","link":3251,"widget":{"name":"width"}},{"name":"height","type":"INT","link":3252,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2068],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":990,"type":"ImageScale","pos":[-2092.9670163038636,1867.9096490237075],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":378,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2188},{"name":"width","type":"INT","link":3253,"widget":{"name":"width"}},{"name":"height","type":"INT","link":3254,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2189],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":521,"type":"ImageGenResolutionFromImage","pos":[-2142.9670163038636,2147.9096490237075],"size":{"0":270,"1":50},"flags":{"collapsed":true},"order":222,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3263}],"outputs":[{"name":"IMAGE_GEN_WIDTH (INT)","type":"INT","links":[1131],"shape":3,"slot_index":0},{"name":"IMAGE_GEN_HEIGHT (INT)","type":"INT","links":[1132],"shape":3,"slot_index":1}],"title":"Generation Resolution","properties":{"Node name for S&R":"ImageGenResolutionFromImage"}},{"id":520,"type":"PixelPerfectResolution","pos":[-2142.9670163038636,2187.9096490237075],"size":{"0":280,"1":100},"flags":{"collapsed":true},"order":244,"mode":0,"inputs":[{"name":"original_image","type":"IMAGE","link":3264},{"name":"image_gen_width","type":"INT","link":1131,"widget":{"name":"image_gen_width"}},{"name":"image_gen_height","type":"INT","link":1132,"widget":{"name":"image_gen_height"}}],"outputs":[{"name":"RESOLUTION (INT)","type":"INT","links":[1134],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PixelPerfectResolution"},"widgets_values":[512,512,"Just Resize"]},{"id":1516,"type":"ImageSelector","pos":[-2102.9670163038636,1987.9096490237075],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":202,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3262}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3263,3264],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageSelector"},"widgets_values":["1"]},{"id":577,"type":"Reroute","pos":[-1849.7129127066698,1803.4781095368169],"size":[75,26],"flags":{},"order":379,"mode":0,"inputs":[{"name":"","type":"*","link":2068}],"outputs":[{"name":"","type":"IMAGE","links":[2159],"slot_index":0,"label":"Tile"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1472,"type":"Reroute","pos":[-3772.4785539563645,-96.20982908987638],"size":[75,26],"flags":{},"order":370,"mode":4,"inputs":[{"name":"","type":"*","link":3146}],"outputs":[{"name":"","type":"IMAGE","links":[3198],"label":"Masks","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1144,"type":"Note","pos":[-4010,2400],"size":{"0":210,"1":350},"flags":{},"order":40,"mode":0,"properties":{"text":""},"widgets_values":["This is a test for animated backgrounds, allows scrolling, and zoom in and out.  Make background bigger for this to work more. 2.5 upscale, usually good.\n\nThis is not perfect, and should be used with soft scaled weights on the tile/pix2pix background controls 0.7-0.8\n\nThis sort of copies the movement of the background.  It does not follow exactly, but does use the movement.  \n\nUseful when you have Zoom or pan camera movement in the base video, like running at or from the camera, or running left/right.\n\nHave not tested this much, and I think adding it to the line art and allowing scrolling of the background and subject together can also work.\nNext version perhaps.\n"],"color":"#432","bgcolor":"#653"},{"id":1294,"type":"Note","pos":[-860,490],"size":{"0":260,"1":110},"flags":{},"order":41,"mode":0,"properties":{"text":""},"widgets_values":["This is new. I can't tell you much, repeated context sounds good... no idea what it does though. \n\nBatch offset sounds really NICE... no idea how to use it."],"color":"#432","bgcolor":"#653"},{"id":1462,"type":"Note","pos":[-4296.127925096707,-207.35547137331002],"size":{"0":420,"1":100},"flags":{},"order":42,"mode":4,"properties":{"text":""},"widgets_values":["Probably second best accuracy to coco, but can miss. and has an issue with cutting off edges to the people without sam use.\n\nThis is seg maps, if you want to use sam drag the sam loader (BLACK) to the detector, can filter by height/width."],"color":"#432","bgcolor":"#653"},{"id":1517,"type":"Reroute","pos":[-2717.7285551075433,139.49204119512305],"size":[75,26],"flags":{},"order":382,"mode":0,"inputs":[{"name":"","type":"*","link":3333}],"outputs":[{"name":"","type":"IMAGE","links":[3268],"slot_index":0,"label":"Masks"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1036,"type":"Reroute","pos":[1363.0935116718429,1281.2864803613177],"size":[75,26],"flags":{},"order":144,"mode":0,"inputs":[{"name":"","type":"*","link":2281}],"outputs":[{"name":"","type":"MODEL","links":[3269],"label":"Diff 1","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1041,"type":"Reroute","pos":[1363.0935116718429,1311.2864803613177],"size":[75,26],"flags":{},"order":330,"mode":0,"inputs":[{"name":"","type":"*","link":2289}],"outputs":[{"name":"","type":"CLIP","links":[3270],"label":"Diff 1","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":134,"type":"SelfAttentionGuidance","pos":[-30.48676804841819,1786.012919709778],"size":{"0":210,"1":82},"flags":{},"order":43,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[833],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.5,2],"color":"#232","bgcolor":"#353"},{"id":710,"type":"Image To Mask","pos":[5768.166035134258,1553.6346010148607],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":512,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2050}],"outputs":[{"name":"MASK","type":"MASK","links":[1527],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":949,"type":"ImageScale","pos":[5608.166035134258,1553.6346010148607],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":509,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2737},{"name":"width","type":"INT","link":2047,"widget":{"name":"width"}},{"name":"height","type":"INT","link":2048,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2050],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1079,"type":"VHS_GetImageCount","pos":[5012.985616180967,2994.7798467567413],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":547,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2397}],"outputs":[{"name":"count","type":"INT","links":[],"shape":3,"slot_index":0}],"title":"Image Count","properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":951,"type":"Reroute","pos":[4462.985616180967,2564.779846756741],"size":[75,26],"flags":{},"order":527,"mode":0,"inputs":[{"name":"","type":"*","link":2314}],"outputs":[{"name":"","type":"IMAGE","links":[2058,2059,2202],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1052,"type":"Note","pos":[-1510,100],"size":{"0":700,"1":270},"flags":{},"order":44,"mode":0,"properties":{"text":""},"widgets_values":["This loads the first model, it can be used throughout, or you can change after the first render.\n\nSometimes one model does a good setting you want.  But you want a different style.\n\n32 frames I use 16/2/4 16/3/4\n\nRescale CFG as using LCM forces a low CFG\n\nAnything everywhere is used here to pass the diff model to use later if needed and VAE to everywhere\n\n3 loras loaded, last one is LCM, if you need more put them between the 2.\n\nModels that worked well for animating (most work well on the upscale part without animate diff)\n\nsoftrealistic\nanimesh\ncuteheaven v2\nrealistic vision\n\nmilkychicken was good for first step clothing setup"],"color":"#432","bgcolor":"#653"},{"id":1299,"type":"Note","pos":[-2190,260],"size":{"0":420,"1":160},"flags":{},"order":45,"mode":0,"properties":{"text":""},"widgets_values":["Temporalnet\nPix2Pix\nTile\n\nOnly these three control nets are used and pix2pix is not mandatory \n\nPix to Pix is used as an option to tile for background, and color on full upscale pass."],"color":"#432","bgcolor":"#653"},{"id":1150,"type":"Note","pos":[-1270,1200],"size":{"0":710,"1":100},"flags":{},"order":46,"mode":0,"title":"Model Loras","properties":{"text":""},"widgets_values":["This is your main lora model loaders, it loads the loras and the keywords for use in the prompt. Some don't have them.\n\nI can never remember Lora tags, and I rarely use them, this should load keywords even when you have not connected the start. Copy wanted keywords to prompt\n"],"color":"#432","bgcolor":"#653"},{"id":1149,"type":"Note","pos":[250,1020],"size":{"0":640,"1":110},"flags":{},"order":47,"mode":0,"properties":{"text":""},"widgets_values":["2nd model \n\nAdding loras to the upscale without animate diff should only be ones you have used in the animate diff stage, new ones will destabilize things, but not including the ones you have used also can cause issues.\n\nSelf attention Guidance is recommended at most stages, it really helps LCM.  Rescale CFG and Guidances are all green"],"color":"#432","bgcolor":"#653"},{"id":1388,"type":"BNK_CutoffBasePrompt","pos":[-1450,2490],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":332,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2966},{"name":"text","type":"STRING","link":2976,"widget":{"name":"text"}}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2967],"shape":3,"slot_index":0}],"title":"Postive","properties":{"Node name for S&R":"BNK_CutoffBasePrompt"},"widgets_values":["1girl, solo, long_hair, breasts, black_hair, navel, swimsuit, bikini, cowboy_shot, day, armpits, arms_up, side-tie_bikini_bottom, red_bikini, realistic"],"color":"#223","bgcolor":"#335"},{"id":1395,"type":"Note","pos":[-1630.4867680484165,2586.0129197097776],"size":{"0":310,"1":470},"flags":{},"order":48,"mode":0,"properties":{"text":""},"widgets_values":["This is fairly untested - It worked in a few small tests but 1 it just ignored all i tried. It probably has to do with the number of video influences just conflicting.\n\nCutoff Regions.  - these can be overridden by strong loras and bother you for 2 hours before you realize the lora is forcing this to be ignored.\n\nIf not using one or all, bypass the Cuttoff Set Regions Nodes # from here 2 for each need to be disabled/enabled.  you dont need to bypass the text boxes, just the nodes below\n\nOnly integrated into the first two samplers, same prompts and cutoffs used for both can disable the second sampler separate.  \n\nHow you use this is prompt as normal, adding colors where you want.  Then add the colors to the target text of the \"cutoff set regions\". \n\nOnce you add the colors, add the text !!from your prompt!! Associated with those colors.  Target text = \"brown\" text = \"brown eyes\", meaning brown will affect the word eyes only. Should only... sometimes...\n\nIf you add \"brown hat\" to the text on a new line (and it's in the prompt) it will affect both a hat and eyes.\n\nI have 4 regions set\n\nhttps://github.com/BlenderNeko/ComfyUI_Cutoff\n\nBypass all to just normal text prompt."],"color":"#432","bgcolor":"#653"},{"id":140,"type":"VHS_VideoCombine","pos":[1671.4165863707194,1944.9229226792668],"size":[320,428.5625],"flags":{},"order":461,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":711},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"AnimateDiff_00083.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":1278,"type":"Change Channel Count","pos":[1382.4143320122064,-2118.8298477726494],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":339,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3277}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3023],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1251,"type":"MaskToImage","pos":[1152.414332012207,-2118.8298477726494],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":251,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":3037}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2721],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1255,"type":"Mask Morphology","pos":[1382.4143320122064,-2248.8298477726494],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":302,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2722}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3276],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[4,"close"]},{"id":1520,"type":"Blur","pos":[1382.4143320122064,-2368.8298477726485],"size":{"0":210,"1":82},"flags":{},"order":327,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3276}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3277],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Blur"},"widgets_values":[4,1]},{"id":1245,"type":"Mask Morphology","pos":[2097.78764841507,-2260.5093712174535],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":275,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2706}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3278],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"close"]},{"id":1279,"type":"Change Channel Count","pos":[2117.78764841507,-2130.5093712174535],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":328,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3279}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2756],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1519,"type":"Blur","pos":[2327.7876484150675,-2260.5093712174535],"size":{"0":210,"1":82},"flags":{},"order":303,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3278}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3279],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Blur"},"widgets_values":[4,1]},{"id":1428,"type":"Note","pos":[924.3541444983808,-2558.122932318095],"size":{"0":210,"1":130},"flags":{},"order":49,"mode":4,"properties":{"text":""},"widgets_values":["This is SEG maps, if you want to use SAM, drag the face detail SAM loader to this.\n\nVery fast and decent accuracy.  Not as reliable as coco, but the speed is hard to deny. Works amazing on less complex scenes."],"color":"#432","bgcolor":"#653"},{"id":1495,"type":"PreviewImage","pos":[-3956.1279250967073,-17.355471373310003],"size":{"0":210,"1":250},"flags":{},"order":381,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3198}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1403,"type":"PrimitiveNode","pos":[-760,2650],"size":{"0":210,"1":58},"flags":{},"order":50,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2983,3002],"widget":{"name":"target_text"}}],"title":"Target Text","properties":{"Run widget replace on values":false},"widgets_values":["red"],"color":"#223","bgcolor":"#335"},{"id":1402,"type":"PrimitiveNode","pos":[-770.4867680484185,2536.0129197097776],"size":{"0":210,"1":80},"flags":{},"order":51,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2982,3001],"widget":{"name":"region_text"}}],"title":"Text from Prompt","properties":{"Run widget replace on values":false},"widgets_values":[""],"color":"#223","bgcolor":"#335"},{"id":715,"type":"VHS_VideoCombine","pos":[5736.031146298638,1659.5393706852253],"size":{"0":410,"1":198},"flags":{},"order":536,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2074},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"AnimateDiff_00055.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":714,"type":"Change Channel Count","pos":[5956.031146298638,1549.539370685225],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":528,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1802}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1803,1805],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1170,"type":"PreviewImage","pos":[6953.908610566165,2839.863812181872],"size":{"0":420,"1":550},"flags":{},"order":580,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2608}],"title":"Loaded faces Numbered","properties":{"Node name for S&R":"PreviewImage"}},{"id":548,"type":"RebatchLatents","pos":[2836.4126029707027,1975.6184535609734],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":455,"mode":0,"inputs":[{"name":"latents","type":"LATENT","link":1203}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2321],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchLatents"},"widgets_values":[1]},{"id":709,"type":"AlphaChanelAddByMask","pos":[5936.031146298638,1499.539370685225],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":524,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1526},{"name":"mask","type":"MASK","link":1527}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1522],"shape":3,"slot_index":0}],"title":"Add Alpha","properties":{"Node name for S&R":"AlphaChanelAddByMask"},"widgets_values":["invert"]},{"id":713,"type":"RebatchImages","pos":[5596.031146298638,1459.539370685225],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":518,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2420},{"name":"batch_size","type":"INT","link":1567,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1524],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":881,"type":"Blur","pos":[5287.2191149834825,3000.545249321411],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":551,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1918}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2406],"shape":3,"slot_index":0}],"title":"Blur Blending","properties":{"Node name for S&R":"Blur"},"widgets_values":[6,1]},{"id":1212,"type":"Reroute","pos":[-2994.1209936527616,400.96972342203924],"size":[75,26],"flags":{},"order":269,"mode":4,"inputs":[{"name":"","type":"*","link":2648}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"Masks","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1394,"type":"BNK_CutoffRegionsToConditioning_ADV","pos":[-1310.4867680484167,2126.0129197097776],"size":{"0":211.60000610351562,"1":154},"flags":{},"order":388,"mode":0,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":2972}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[2975],"shape":3,"slot_index":0}],"title":"Regions To Conditioning","properties":{"Node name for S&R":"BNK_CutoffRegionsToConditioning_ADV"},"widgets_values":["",1,1,"none","comfy"],"color":"#432","bgcolor":"#653"},{"id":1017,"type":"Reroute","pos":[-1450.4867680484167,2056.0129197097785],"size":[75,26],"flags":{},"order":114,"mode":0,"inputs":[{"name":"","type":"*","link":2254}],"outputs":[{"name":"","type":"CONTROL_NET","links":[3288],"label":"Pix2Pix","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":973,"type":"PrimitiveNode","pos":[-1350.4867680484167,1976.012919709778],"size":{"0":270,"1":100},"flags":{},"order":52,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2110,2111,2222],"widget":{"name":"text"},"slot_index":0}],"title":"Negative","properties":{"Run widget replace on values":false},"widgets_values":["embedding:bad-hands-5, text, blur, bokeh, photo frame, billboards, lace, frills"],"color":"#332922","bgcolor":"#593930"},{"id":729,"type":"LoraLoader","pos":[-1670,680],"size":{"0":290,"1":130},"flags":{},"order":164,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":1588,"slot_index":0},{"name":"clip","type":"CLIP","link":1587}],"outputs":[{"name":"MODEL","type":"MODEL","links":[1595],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[3016],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["v3_sd15_adapter.ckpt",0.8,1]},{"id":1157,"type":"ADE_AnimateDiffSamplingSettings","pos":[-1089.0565103954752,466.94855937477314],"size":{"0":210,"1":170},"flags":{},"order":53,"mode":0,"inputs":[{"name":"noise_layers","type":"NOISE_LAYERS","link":null},{"name":"iteration_opts","type":"ITERATION_OPTS","link":null},{"name":"seed_override","type":"INT","link":null,"widget":{"name":"seed_override"}}],"outputs":[{"name":"settings","type":"SAMPLE_SETTINGS","links":[2554,2778],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffSamplingSettings"},"widgets_values":[0,"repeated_context","comfy",0,0]},{"id":904,"type":"ImpactSEGSRangeFilter","pos":[3866.3372918655214,146.82836776107192],"size":{"0":210,"1":150},"flags":{},"order":273,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":1962}],"outputs":[{"name":"filtered_SEGS","type":"SEGS","links":[1963],"shape":3,"slot_index":0},{"name":"remained_SEGS","type":"SEGS","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ImpactSEGSRangeFilter"},"widgets_values":["height",true,272,67108864]},{"id":1065,"type":"Note","pos":[821.4165863707194,1674.9229226792668],"size":{"0":970,"1":160},"flags":{},"order":54,"mode":0,"properties":{"text":""},"widgets_values":["Upscale as much as you can here... 2.0 is good. I average 7.6gb VRAM on this step, doing about 768x768++ 32 batch\n\nNot using control nets here, so uses about the same memory as the previous step at double size.\n\nThis creates the video used for the upscales, it needs to be good fluid moment with no shifting of clothing/backgrounds.  The faces can look bad, and it does not need to look great, as long as its fluid.\n\nHigher the upscale, better the video. 768+ for best results,\n4 steps with LCM.  4-8 is best here using image latent. 4-12 4-10 works, Using latent upscale here results in blurry background, use \"image\" pink latent "],"color":"#432","bgcolor":"#653"},{"id":857,"type":"ImageScale","pos":[5182.985616180967,2754.779846756741],"size":{"0":210,"1":130},"flags":{},"order":548,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3149}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2380],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":1030,"type":"Reroute","pos":[4406.585378600661,1343.634602922209],"size":[75,26],"flags":{},"order":284,"mode":0,"inputs":[{"name":"","type":"*","link":2299}],"outputs":[{"name":"","type":"MODEL","links":[3295],"slot_index":0,"label":"Model"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":886,"type":"SetLatentNoiseMask","pos":[5160.966293368561,3301.837082772108],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":556,"mode":4,"inputs":[{"name":"samples","type":"LATENT","link":1936},{"name":"mask","type":"MASK","link":1935}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1937],"shape":3,"slot_index":0}],"title":"Inpaint","properties":{"Node name for S&R":"SetLatentNoiseMask"},"color":"#232","bgcolor":"#353"},{"id":1523,"type":"SelfAttentionGuidance","pos":[5040.966293368561,3181.837082772108],"size":{"0":210,"1":82},"flags":{},"order":315,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3297}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3298],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.30000000000000004,1.5],"color":"#232","bgcolor":"#353"},{"id":1116,"type":"LoraLoader","pos":[940,700],"size":{"0":210,"1":130},"flags":{},"order":219,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2513,"slot_index":0},{"name":"clip","type":"CLIP","link":2511}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3294],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[2444],"shape":3,"slot_index":1}],"title":"LCM Lora","properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["lcm\\SD1.5\\pytorch_lora_weights.safetensors",0.6,1]},{"id":1139,"type":"RescaleCFG","pos":[700,710],"size":{"0":210,"1":60},"flags":{},"order":193,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2512}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2513],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RescaleCFG"},"widgets_values":[0.5],"color":"#232","bgcolor":"#353"},{"id":1035,"type":"SelfAttentionGuidance","pos":[1010,1120],"size":{"0":210,"1":82},"flags":{},"order":55,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2281],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.5,2],"color":"#232","bgcolor":"#353"},{"id":829,"type":"Reroute","pos":[6156.031146298638,1389.539370685225],"size":[75,26],"flags":{},"order":531,"mode":0,"inputs":[{"name":"","type":"*","link":1805}],"outputs":[{"name":"","type":"IMAGE","links":[2317],"label":"List","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1329,"type":"Image Flip","pos":[-5860,1850],"size":{"0":210,"1":60},"flags":{},"order":173,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3045}],"outputs":[{"name":"images","type":"IMAGE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Flip"},"widgets_values":["horizontal"]},{"id":1373,"type":"Note","pos":[-5420,2590],"size":{"0":570,"1":320},"flags":{},"order":56,"mode":0,"properties":{"text":""},"widgets_values":["If images are all same size you can just use the one upscale image by node above the padding and resize to your liking.\n\nIf using images with different aspects/sizes you need to use the line of upscale image nodes bypassing the ones you are not using and Set the H and W to set the width and height all of your images will work with (this is not the H and W of your video, you can pad and scale from here) This will crop the center or up/downscale if needed to the size you set.  Then it goes to the padding.  After that you can still use the upscale image node by percent to rescale the padded images.\n\nBypass the upscale nodes you are not using\n\nSet W and H to something all the image can do.  It will rescale and crop images in the center if needed to get them all aligned with same aspect.  Be careful here and look at the images as the crop sometimes cuts off arms if images are different aspects than you are asking for.\n\nCan pad the batch output to add more room on the sides or top/bottom.\n\nThis does the same thing as the videos, it cuts out the people to place in a shared background."],"color":"#432","bgcolor":"#653"},{"id":81,"type":"VHS_SelectEveryNthImage","pos":[-5081.354250250414,1230.0014591649654],"size":{"0":210,"1":80},"flags":{},"order":150,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2115}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2116,2117],"shape":3,"slot_index":0},{"name":"count","type":"INT","links":null,"shape":3}],"title":"Select Every Nth","properties":{"Node name for S&R":"VHS_SelectEveryNthImage"},"widgets_values":{"select_every_nth":2}},{"id":1515,"type":"Reroute","pos":[-2912.967016303862,1877.9096490237075],"size":[75,26],"flags":{},"order":177,"mode":0,"inputs":[{"name":"","type":"*","link":3265}],"outputs":[{"name":"","type":"*","links":[3262,3300],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":900,"type":"ImpactSimpleDetectorSEGS","pos":[3645.2166092559305,-90.48835454456133],"size":{"0":210,"1":310},"flags":{},"order":250,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":1959,"slot_index":0},{"name":"image","type":"IMAGE","link":1999},{"name":"sam_model_opt","type":"SAM_MODEL","link":null},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[1962],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS"},"widgets_values":[0.32,0,3,10,0.5,0,0,0.7,0]},{"id":1046,"type":"Reroute","pos":[1601.5283170626662,868.2277907829246],"size":[75,26],"flags":{},"order":262,"mode":0,"inputs":[{"name":"","type":"*","link":3314}],"outputs":[{"name":"","type":"CLIP","links":[2301,3112],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":1537,"type":"Reroute","pos":[1600.4961028296093,1036.7188791322321],"size":[75,26],"flags":{},"order":261,"mode":0,"inputs":[{"name":"","type":"*","link":3504}],"outputs":[{"name":"","type":"MODEL","links":[3317],"label":"Model","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1538,"type":"Reroute","pos":[1600.4961028296093,1076.7188791322326],"size":[75,26],"flags":{},"order":263,"mode":0,"inputs":[{"name":"","type":"*","link":3505}],"outputs":[{"name":"","type":"CLIP","links":[3318],"label":"Clip","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":1038,"type":"Reroute","pos":[1363.0935116718429,881.2864803613179],"size":[75,26],"flags":{},"order":145,"mode":0,"inputs":[{"name":"","type":"*","link":3293}],"outputs":[{"name":"","type":"MODEL","links":[],"label":"Model 1","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1040,"type":"Reroute","pos":[1363.0935116718429,911.2864803613179],"size":[75,26],"flags":{},"order":306,"mode":0,"inputs":[{"name":"","type":"*","link":2518}],"outputs":[{"name":"","type":"CLIP","links":[2289],"label":"Clip 1","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":1037,"type":"ADE_AnimateDiffUnload","pos":[1090,910],"size":{"0":210,"1":30},"flags":{"collapsed":true},"order":57,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3293],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffUnload"}},{"id":1126,"type":"RepeatImageBatch","pos":[-3698.2601792409923,2298.2587143972405],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":369,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2466},{"name":"amount","type":"INT","link":2535,"widget":{"name":"amount"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2467],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"RepeatImageBatch"},"widgets_values":[32]},{"id":1372,"type":"Note","pos":[-6830,1290],"size":{"0":950,"1":180},"flags":{},"order":58,"mode":0,"properties":{"text":""},"widgets_values":["Images to video - this leans heavily on animate diff to... make a lot up and its not perfect without the right image set.\n\nThis lets you load in 1-12 photos to base the video on. 1 works fine with center method and a description of your motion desired in the prompt\n\nImages are loaded left to right, the blue numbered nodes can connect to the image start area in any order you want them in.  \n\nFlip node is available and useful to use before sending to the image start area, can use 1 image, flip it, then use it again, it can work well\n\nCan do 16 or more frames from any number input, I have only tested 32 at the moment, 16 works best with image start with few images.\n\nUse Sparse Method of center or uniform, not sure whats best depends on number of images"],"color":"#432","bgcolor":"#653"},{"id":534,"type":"CLIPTextEncode","pos":[4520,2250],"size":{"0":310,"1":100},"flags":{},"order":317,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2293}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1155],"shape":3}],"title":"Negative","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["embedding:bad-hands-5"],"color":"#332922","bgcolor":"#593930"},{"id":1216,"type":"VHS_GetImageCount","pos":[-4027.2275920521674,1555.0658326726052],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":158,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3193}],"outputs":[{"name":"count","type":"INT","links":[2653,2658,3141],"shape":3,"slot_index":0}],"title":"Image Count","properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":519,"type":"AIO_Preprocessor","pos":[-2166.022684474114,2029.9254011449111],"size":{"0":300,"1":80},"flags":{},"order":367,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1129},{"name":"resolution","type":"INT","link":1134,"widget":{"name":"resolution"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2188],"shape":3,"slot_index":0}],"title":"BG Lineart","properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["HEDPreprocessor",512],"color":"#222","bgcolor":"#000"},{"id":60,"type":"CLIPTextEncode","pos":[-2859.471847801756,2660.299402082246],"size":{"0":330,"1":130},"flags":{},"order":280,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":1604}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[106,111],"shape":3}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["Exterior of a cyberpunk nightclub entrance"],"color":"#223","bgcolor":"#335"},{"id":1025,"type":"Reroute","pos":[-3120.2531556148856,1278.2539242253151],"size":[75,26],"flags":{},"order":271,"mode":0,"inputs":[{"name":"","type":"*","link":3220}],"outputs":[{"name":"","type":"IMAGE","links":[3322,3325],"slot_index":0,"label":"Line"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1023,"type":"Note","pos":[-3569.2418085085615,1789.387210854385],"size":{"0":450,"1":200},"flags":{},"order":59,"mode":0,"properties":{"text":""},"widgets_values":["Many preprocessors work.  Scribble, line art, HED, most of them really work for different results.  I like HED with canny background.  piDi net works well\n\nThis creates a line art of your new video\n\nLine art realistic works well or HED.\n\nAnime/manga to anime works well for animated to realistic\n\nScribbles work, the three different ones they work well\n\nChoosing the right preprocessor for your video is just as important as choosing the weights.  "],"color":"#432","bgcolor":"#653"},{"id":1298,"type":"Note","pos":[-1750,1960],"size":{"0":230,"1":240},"flags":{},"order":60,"mode":0,"properties":{"text":""},"widgets_values":["Tile bg Holds more to original, but can darken the subject\n\npix to pix animates better but can imagine weird things.. like a large pink umbrella on the beach that you never asked for and cant get rid of.... Pix to pix just does what it wants. much better colors with pix2pix\n\nIMO i cant tell what one is \"best\" for all uses, both can do great in the right background/video test yourself they both effect the motion slightly different.\n\nusing RGB controls can impact background animations. "],"color":"#432","bgcolor":"#653"},{"id":1540,"type":"ACN_SparseCtrlSpreadMethodNode","pos":[-1300,2330],"size":{"0":210,"1":60},"flags":{},"order":61,"mode":0,"outputs":[{"name":"SPARSE_METHOD","type":"SPARSE_METHOD","links":[3326,3328],"shape":3,"slot_index":0}],"title":"SparseCtrl Spread Method","properties":{"Node name for S&R":"ACN_SparseCtrlSpreadMethodNode"},"widgets_values":["uniform"]},{"id":1199,"type":"Robust Video Matting","pos":[-3413.6420966175256,472.93803685605326],"size":{"0":210,"1":150},"flags":{},"order":180,"mode":4,"inputs":[{"name":"video_frames","type":"IMAGE","link":2647}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null,"shape":3},{"name":"MASK","type":"MASK","links":[2632],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Robust Video Matting"},"widgets_values":["mobilenetv3",false,"black",4]},{"id":948,"type":"PrimitiveNode","pos":[4496.585378600661,1383.634602922209],"size":{"0":210,"1":82},"flags":{},"order":62,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[2044,2045],"widget":{"name":"scale_by"},"slot_index":0}],"title":"Upscale Subjects","properties":{"Run widget replace on values":false},"widgets_values":[1.2,"fixed"],"color":"#232","bgcolor":"#353"},{"id":1214,"type":"Reroute","pos":[-2982.52648775388,-711.4086846833588],"size":[75,26],"flags":{},"order":347,"mode":4,"inputs":[{"name":"","type":"*","link":2655}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"Masks","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1213,"type":"Reroute","pos":[-3551.8809739223047,-683.9825400432836],"size":[75,26],"flags":{},"order":155,"mode":4,"inputs":[{"name":"","type":"*","link":3109}],"outputs":[{"name":"","type":"*","links":[3076],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1217,"type":"Reroute","pos":[-2974.89724335998,-113.01216752868726],"size":[75,26],"flags":{},"order":371,"mode":0,"inputs":[{"name":"","type":"*","link":2657}],"outputs":[{"name":"","type":"IMAGE","links":[3333],"label":"Masks","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1518,"type":"VHS_GetImageCount","pos":[5012.966293368561,2780.837082772108],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":469,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3286}],"outputs":[{"name":"count","type":"INT","links":[3274],"shape":3,"slot_index":0}],"title":"Image Count","properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":429,"type":"ACN_AdvancedControlNetApply","pos":[4520,1660],"size":{"0":230,"1":250},"flags":{},"order":405,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1154,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":1155,"slot_index":1},{"name":"control_net","type":"CONTROL_NET","link":2083,"slot_index":2},{"name":"image","type":"IMAGE","link":1562},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[942],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[943],"shape":3,"slot_index":1}],"title":"Tile","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,1]},{"id":704,"type":"VHS_GetImageCount","pos":[4506.031146298638,1549.539370685225],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":385,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3419}],"outputs":[{"name":"count","type":"INT","links":[1515,1567],"shape":3,"slot_index":0}],"title":"Image Count","properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":725,"type":"RebatchImages","pos":[4918.031146298638,1463.539370685225],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":394,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1561}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1562,1563,1564],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":946,"type":"Image To Mask","pos":[4928.031146298638,1413.5393706852249],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":507,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2042}],"outputs":[{"name":"MASK","type":"MASK","links":[2043],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image To Mask"},"widgets_values":["intensity"]},{"id":1419,"type":"PreviewImage","pos":[3446.5278071944877,387.15210664674146],"size":{"0":620,"1":250},"flags":{},"order":350,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3013}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":637,"type":"Change Channel Count","pos":[3558.99948720439,1169.7269004697723],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":493,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1366}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1392],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1398,"type":"PrimitiveNode","pos":[-1270.4867680484167,2506.0129197097776],"size":{"0":210,"1":110},"flags":{},"order":63,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2978,2992],"widget":{"name":"region_text"}}],"title":"Text from Prompt","properties":{"Run widget replace on values":false},"widgets_values":["black bikini"],"color":"#223","bgcolor":"#335"},{"id":1399,"type":"PrimitiveNode","pos":[-1270.4867680484167,2646.0129197097776],"size":{"0":210,"1":58},"flags":{},"order":64,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2979,2993],"widget":{"name":"target_text"}}],"title":"Target Text","properties":{"Run widget replace on values":false},"widgets_values":["black"],"color":"#223","bgcolor":"#335"},{"id":1400,"type":"PrimitiveNode","pos":[-1030.4867680484176,2506.0129197097776],"size":{"0":210,"1":110},"flags":{},"order":65,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2980,2995],"widget":{"name":"region_text"}}],"title":"Text from Prompt","properties":{"Run widget replace on values":false},"widgets_values":["blonde hair"],"color":"#223","bgcolor":"#335"},{"id":1401,"type":"PrimitiveNode","pos":[-1030.4867680484176,2646.0129197097776],"size":{"0":210,"1":58},"flags":{},"order":66,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[2981,2996],"widget":{"name":"target_text"}}],"title":"Target Text","properties":{"Run widget replace on values":false},"widgets_values":["blonde"],"color":"#223","bgcolor":"#335"},{"id":933,"type":"ImageGenResolutionFromImage","pos":[2806.5882704900064,-2581.670518425666],"size":{"0":270,"1":50},"flags":{"collapsed":true},"order":233,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2006}],"outputs":[{"name":"IMAGE_GEN_WIDTH (INT)","type":"INT","links":[2007],"shape":3,"slot_index":0},{"name":"IMAGE_GEN_HEIGHT (INT)","type":"INT","links":[2010],"shape":3,"slot_index":1}],"title":"Generation Resolution","properties":{"Node name for S&R":"ImageGenResolutionFromImage"}},{"id":66,"type":"PreviewImage","pos":[-250,2600],"size":{"0":370,"1":260},"flags":{},"order":410,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3201}],"title":"Background Ref","properties":{"Node name for S&R":"PreviewImage"}},{"id":1411,"type":"BNK_CutoffSetRegions","pos":[-1250,2796],"size":{"0":210,"1":120},"flags":{"collapsed":true},"order":376,"mode":4,"inputs":[{"name":"clip_regions","type":"CLIPREGION","link":3003},{"name":"region_text","type":"STRING","link":2992,"widget":{"name":"region_text"},"slot_index":1},{"name":"target_text","type":"STRING","link":2993,"widget":{"name":"target_text"},"slot_index":2}],"outputs":[{"name":"CLIPREGION","type":"CLIPREGION","links":[2994],"shape":3,"slot_index":0}],"title":"Cutoff Set Regions 1","properties":{"Node name for S&R":"BNK_CutoffSetRegions"},"widgets_values":["black bikini","black",1],"color":"#223","bgcolor":"#335"},{"id":771,"type":"Seed Everywhere","pos":[-1023,1753],"size":{"0":210,"1":124.0000228881836},"flags":{},"order":67,"mode":0,"outputs":[{"name":"INT","type":"INT","links":null,"shape":3,"slot_index":0}],"properties":{"group_restricted":false,"color_restricted":false,"Node name for S&R":"Seed Everywhere"},"widgets_values":[907666446122497,"fixed"],"color":"#232","bgcolor":"#353"},{"id":1233,"type":"Reroute","pos":[-1444,1775],"size":[75,26],"flags":{},"order":423,"mode":0,"inputs":[{"name":"","type":"*","link":3243}],"outputs":[{"name":"","type":"IMAGE","links":[3181],"label":"RGB","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":91,"type":"Reroute","pos":[-1440.4867680484167,1746.012919709778],"size":[75,26],"flags":{},"order":425,"mode":0,"inputs":[{"name":"","type":"*","link":3367}],"outputs":[{"name":"","type":"IMAGE","links":[2952],"slot_index":0,"label":"Line"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1021,"type":"Note","pos":[-2736,1574],"size":{"0":760,"1":170},"flags":{},"order":68,"mode":0,"properties":{"text":""},"widgets_values":["This is the background creation.  \n\nText to image, anything you want as the background.\n\nIf it has other people, it may animate them too.. or it will just remove them... who knows. \n\nHas its own seed to change the background without changing the seed for the movement.  The movement seeds can carry across different backgrounds. \n\nThis uses AIO preprocessor to get a line art of your background to mix with the movement.  As far as I can tell you can use any lineart, canny, HED, scribble, and more here.  It does not need to match the preprocessor you used for the movement. I found canny best.\n\n"],"color":"#432","bgcolor":"#653"},{"id":594,"type":"Reroute","pos":[-2852.29625518984,1186.4037629959905],"size":[75,26],"flags":{},"order":398,"mode":0,"inputs":[{"name":"","type":"*","link":2178}],"outputs":[{"name":"","type":"IMAGE","links":[2151],"slot_index":0,"label":"BGLine"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1505,"type":"Reroute","pos":[-2852.29625518984,1156.4037629959905],"size":[75,26],"flags":{},"order":298,"mode":0,"inputs":[{"name":"","type":"*","link":3322}],"outputs":[{"name":"","type":"IMAGE","links":[3356],"label":"Line","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1218,"type":"Reroute","pos":[-2852.29625518984,1086.4037629959905],"size":[75,26],"flags":{},"order":153,"mode":0,"inputs":[{"name":"","type":"*","link":2675}],"outputs":[{"name":"","type":"*","links":[3265,3361],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1219,"type":"Reroute","pos":[-2852.29625518984,1236.4037629959907],"size":[75,26],"flags":{},"order":393,"mode":0,"inputs":[{"name":"","type":"*","link":3268}],"outputs":[{"name":"","type":"IMAGE","links":[3232,3235,3244,3357,3362],"slot_index":0,"label":"Masks"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1234,"type":"Reroute","pos":[-2248.038270264725,1115.7940790436123],"size":[75,26],"flags":{},"order":419,"mode":0,"inputs":[{"name":"","type":"*","link":3180}],"outputs":[{"name":"","type":"IMAGE","links":[3240,3243],"label":"RGB","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1559,"type":"Combine Masks","pos":[-2683.038270264725,1114.7940790436123],"size":{"0":210,"1":130},"flags":{"collapsed":true},"order":404,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":3361},{"name":"image2","type":"IMAGE","link":3362}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3364],"shape":3,"slot_index":0}],"title":"Cut person","properties":{"Node name for S&R":"Combine Masks"},"widgets_values":["intersection (min)","no","no"]},{"id":983,"type":"Combine Masks","pos":[-2703.038270264725,1165.7940790436123],"size":{"0":210,"1":130},"flags":{"collapsed":true},"order":401,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":3368},{"name":"image2","type":"IMAGE","link":3232}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3350],"shape":3,"slot_index":0}],"title":"Mask Person In BG","properties":{"Node name for S&R":"Combine Masks"},"widgets_values":["difference","no","no"]},{"id":982,"type":"Combine Masks","pos":[-2517.038270264725,1135.7940790436123],"size":{"0":210,"1":130},"flags":{"collapsed":true},"order":414,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":3364},{"name":"image2","type":"IMAGE","link":3350}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3180],"shape":3,"slot_index":0}],"title":"Add Person to BG","properties":{"Node name for S&R":"Combine Masks"},"widgets_values":["union (max)","yes","no"]},{"id":1556,"type":"Combine Masks","pos":[-2666.038270264725,1261.7940790436123],"size":{"0":210,"1":130},"flags":{"collapsed":true},"order":403,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":3356},{"name":"image2","type":"IMAGE","link":3357}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3359],"shape":3,"slot_index":0}],"title":"Cut person","properties":{"Node name for S&R":"Combine Masks"},"widgets_values":["intersection (min)","no","no"]},{"id":72,"type":"Combine Masks","pos":[-2690.038270264725,1307.7940790436123],"size":{"0":210,"1":130},"flags":{"collapsed":true},"order":409,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":2151},{"name":"image2","type":"IMAGE","link":3235}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[143],"shape":3,"slot_index":0}],"title":"Mask Person In BG","properties":{"Node name for S&R":"Combine Masks"},"widgets_values":["difference","no","no"]},{"id":73,"type":"Combine Masks","pos":[-2510.038270264725,1276.7940790436123],"size":{"0":210,"1":130},"flags":{"collapsed":true},"order":417,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":3359},{"name":"image2","type":"IMAGE","link":143}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3241],"shape":3,"slot_index":0}],"title":"Add Person to BG","properties":{"Node name for S&R":"Combine Masks"},"widgets_values":["union (max)","no","no"]},{"id":74,"type":"ACN_AdvancedControlNetApply","pos":[-509,1989],"size":{"0":230,"1":250},"flags":{},"order":430,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1298,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":1299},{"name":"control_net","type":"CONTROL_NET","link":1301,"slot_index":2},{"name":"image","type":"IMAGE","link":2952,"slot_index":3},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":5},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":154,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[2954],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[2955],"shape":3,"slot_index":1}],"title":"Scribble 1","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,1]},{"id":627,"type":"ScaledSoftControlNetWeights","pos":[-1052,2288],"size":{"0":240,"1":102},"flags":{},"order":69,"mode":0,"outputs":[{"name":"CN_WEIGHTS","type":"CONTROL_NET_WEIGHTS","links":[1336],"shape":3},{"name":"TK_SHORTCUT","type":"TIMESTEP_KEYFRAME","links":null,"shape":3}],"properties":{"Node name for S&R":"ScaledSoftControlNetWeights"},"widgets_values":[0.8250000000000001,false]},{"id":593,"type":"VHS_VideoCombine","pos":[-2041,972],"size":[210,198],"flags":{},"order":422,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3240},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"title":"RGB","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":6,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":true,"paused":false,"params":{"filename":"AnimateDiff_00080.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":915,"type":"VHS_VideoCombine","pos":[-2041,1227],"size":[210,198],"flags":{},"order":424,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3239},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Lineart","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":6,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":true,"paused":false,"params":{"filename":"AnimateDiff_00081.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":1151,"type":"Note","pos":[-2042,1469],"size":{"0":210,"1":60},"flags":{},"order":70,"mode":0,"properties":{"text":""},"widgets_values":["right click view preview to see the lineart and tile\n"],"color":"#432","bgcolor":"#653"},{"id":1289,"type":"Note","pos":[-1623,868],"size":{"0":210,"1":90},"flags":{},"order":71,"mode":0,"properties":{"text":""},"widgets_values":["This is the v3 animate diff lora, i find it does nothing.  Perhaps i am using it wrong."],"color":"#432","bgcolor":"#653"},{"id":1022,"type":"Note","pos":[-2765,722],"size":{"0":480,"1":310},"flags":{},"order":72,"mode":0,"properties":{"text":""},"widgets_values":["This removes the background from the video and prepares it to combine with your background \n\nIf you want to keep the background or the masks just cant pull it off, you can bypass the masks and then bypass this group\n\nThen just disable the pix2pix/tile controlnet, it will just use the line art of the original video.  -- NOTE keep background generation active even if not using, or it will error.\n\nIt will still change the background to your prompt even if you bypass this, it will just use the lines of the video to shape your prompt.\n\nBoth sparse controls will work without changing background\n\nIf you can't get a mask for a video because quality is bad or low res, you can do a run of the first 2 samplers with no background removal.  This should clean things up enough to send back to the load video and retry the masks, bonus is you can change the subjects in the first run.\n\n\nPix2pix control can just straight up replace things without this step\nBackground needs to be described in prompt to keep original."],"color":"#432","bgcolor":"#653"},{"id":1200,"type":"MaskToImage","pos":[-3402.6420966175256,656.9380368560533],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":205,"mode":4,"inputs":[{"name":"mask","type":"MASK","link":2632}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2639],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1206,"type":"Mask Morphology","pos":[-3415.6420966175256,695.9380368560533],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":226,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2639}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2644],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"open"]},{"id":1201,"type":"PreviewImage","pos":[-3190.6420966175256,470.93803685605326],"size":{"0":216.60919189453125,"1":197.96580505371094},"flags":{},"order":268,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":2645}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1209,"type":"Mask Morphology","pos":[-3190.6420966175256,720.9380368560533],"size":{"0":210,"1":82},"flags":{"collapsed":false},"order":246,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2644}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2645,2648],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mask Morphology"},"widgets_values":[6,"close"]},{"id":1222,"type":"Note","pos":[-3782,-495],"size":{"0":220,"1":100},"flags":{},"order":73,"mode":0,"properties":{"text":""},"widgets_values":["Anime segs, works when the input in is cartoon/anime somtimes.\n\nAllows you to bring in cartoon/anime and make it realistic."],"color":"#432","bgcolor":"#653"},{"id":1235,"type":"Note","pos":[-3517,-941],"size":{"0":590,"1":200},"flags":{},"order":74,"mode":0,"properties":{"text":""},"widgets_values":["Mask choices because coco is slow.\nBypass the node groups you dont want to use\n\nConnect Masks to the Background removal mask node of the choice you want to use. \n\ncan use mask Open/close to \nopen - removes white spots\nclose - removes black spots\n\nYou can delete the entire group if you dont have the nodes and/or dont want to use them\n\nThese masks dont need to be perfect.  What you want here is to cut out the entire person, having extra beside them is ok, just not random areas masked everywhere."],"color":"#432","bgcolor":"#653"},{"id":606,"type":"ACN_SparseCtrlRGBPreprocessor","pos":[-766,2450],"size":{"0":220,"1":70},"flags":{"collapsed":true},"order":428,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3369},{"name":"vae","type":"VAE","link":null},{"name":"latent_size","type":"LATENT","link":1308}],"outputs":[{"name":"proc_IMAGE","type":"IMAGE","links":[3108],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ACN_SparseCtrlRGBPreprocessor"}},{"id":1019,"type":"Note","pos":[-1194,2884],"size":{"0":819.4666137695312,"1":458.5825500488281},"flags":{},"order":75,"mode":0,"properties":{"text":""},"widgets_values":["Text to video prompt is used in almost all steps.\n\nRGB does not work well on its own unless you are copying everything, clothing, hair, everything.  It works well as a helper for the lineart.  Lowering its scaled weights and start and end times.  Works similar to depth with openpose.\n\nThis is using sparse controls, both RGB and scribble can be used, together or separate\nThis is using tile or pix2pix for background. Strength 0.4–1.0. Soft weights on this allow animated backgrounds\nThis really should not work, I'm sending half or less the masks needed to the control net...  It seems to still work this way and do a decent job copying the background in with the motion.\n\nI am finding the line art like open pose, and the rgb like depth.  If just line art does not work properly, add rgb for 0.35 steps 0.825 weights to help depth control.\n\nMain settings to get the changes from prompt to work with motion are\n\nSoft Weights. - 0.5-0.95 depending on how much you want changed. 8.25 is good for most line art down for more change, up for sticking to the original.\nLine art model you choose, they all mostly work. Different results for each.\nPrompt - Be Specific, put clothing in brackets (clothing item and color:1.2)\nRGB works with linearts if you want to mix them at lower weights.\n\nEnd percent can be .5 to 1. .5 gives more room for change, but less copied fine movement.\n\nSeed Everywhere is used everywhere except the background.\n\nSteps here can be 4-12.  12 offers very consistent background and subject most times, but 4 works on some models.  I average 6-8, but do 12 when the model is not behaving with animate diff.\nIf clothes morph, more steps and perhaps less weights. \nLess steps you do here, more the next step can \"fix\" things. If you do 12, next step wont really try to finish anything, just enhance it. Even the bad parts.\n\nI don't usually go above 515x512 on this step. And upscale 2x next step for 4 more steps.\n\nScaled weights on the background allow background animation.\n\nYou can take movement from the front and make it from the back or opposite with prompting."],"color":"#432","bgcolor":"#653"},{"id":1223,"type":"Note","pos":[-3744,512],"size":{"0":280,"1":100},"flags":{},"order":76,"mode":0,"properties":{"text":""},"widgets_values":["Matting maps - fast but can miss\n\nThis can sometimes be faster and more usable than seg/sam.  its blocky, but thats ok on this step."],"color":"#432","bgcolor":"#653"},{"id":439,"type":"Reroute","pos":[3395.2166092559355,-140.48835454456122],"size":[75,26],"flags":{},"order":162,"mode":0,"inputs":[{"name":"","type":"*","link":3426}],"outputs":[{"name":"","type":"*","links":[1192,3378,3379,3380],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1426,"type":"SegsToCombinedMask","pos":[1142,-2729],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":231,"mode":4,"inputs":[{"name":"segs","type":"SEGS","link":3035}],"outputs":[{"name":"MASK","type":"MASK","links":[3037],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SegsToCombinedMask"}},{"id":1257,"type":"Reroute","pos":[1601.9384638928066,-2807.3177054495704],"size":[75,26],"flags":{},"order":361,"mode":4,"inputs":[{"name":"","type":"*","link":3027}],"outputs":[{"name":"","type":"IMAGE","links":[3290],"label":"Full M","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1238,"type":"Reroute","pos":[2728,-2614],"size":[75,26],"flags":{},"order":188,"mode":4,"inputs":[{"name":"","type":"*","link":3380}],"outputs":[{"name":"","type":"*","links":[2694],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1246,"type":"Reroute","pos":[1821.7433212890382,-2610.5960442009664],"size":[75,26],"flags":{},"order":187,"mode":4,"inputs":[{"name":"","type":"*","link":3379}],"outputs":[{"name":"","type":"*","links":[2702,2740],"label":"Fames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1247,"type":"Reroute","pos":[2517.7876484150675,-2610.509371217455],"size":[75,26],"flags":{},"order":353,"mode":4,"inputs":[{"name":"","type":"*","link":2743}],"outputs":[{"name":"","type":"IMAGE","links":[3289],"label":"Full M","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1274,"type":"ImageScale","pos":[2112,-2583],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":340,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2756},{"name":"width","type":"INT","link":2741,"widget":{"name":"width"}},{"name":"height","type":"INT","link":2742,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2743],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":1276,"type":"ImageScale","pos":[1372,-2780],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":352,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3023},{"name":"width","type":"INT","link":2745,"widget":{"name":"width"}},{"name":"height","type":"INT","link":2746,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3027],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"]},{"id":941,"type":"Change Channel Count","pos":[3025,-2144],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":386,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":2021}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2696],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1239,"type":"Reroute","pos":[3370,-2220],"size":[75,26],"flags":{},"order":396,"mode":4,"inputs":[{"name":"","type":"*","link":2696}],"outputs":[{"name":"","type":"IMAGE","links":[3370],"label":"Full M","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1561,"type":"PreviewImage","pos":[3206,-2560],"size":{"0":210,"1":26},"flags":{},"order":407,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":3370}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1418,"type":"VHS_GetImageCount","pos":[2662.4126029707027,2032.6184535609734],"size":{"0":210,"1":26},"flags":{"collapsed":false},"order":467,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3011}],"outputs":[{"name":"count","type":"INT","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":1417,"type":"Note","pos":[2341,-2419],"size":{"0":220,"1":90},"flags":{},"order":77,"mode":4,"properties":{"text":""},"widgets_values":["Best to check the maps to make sure they are decent, unlike the original maps these should be good."],"color":"#432","bgcolor":"#653"},{"id":1256,"type":"Reroute","pos":[1075.0593988423275,-2810.720963771131],"size":[75,26],"flags":{},"order":186,"mode":4,"inputs":[{"name":"","type":"*","link":3378}],"outputs":[{"name":"","type":"*","links":[2748,3412],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":416,"type":"ACN_AdvancedControlNetApply","pos":[4760,1660],"size":{"0":230,"1":250},"flags":{},"order":415,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":942,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":943},{"name":"control_net","type":"CONTROL_NET","link":2084,"slot_index":2},{"name":"image","type":"IMAGE","link":1563},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1504],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1505],"shape":3,"slot_index":1}],"title":"Temporal","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,0.9]},{"id":1522,"type":"SelfAttentionGuidance","pos":[4782,1972],"size":{"0":210,"1":82},"flags":{},"order":310,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3295}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3296],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.7000000000000001,2.5],"color":"#232","bgcolor":"#353"},{"id":908,"type":"Cut By Mask","pos":[4505,1597],"size":{"0":230,"1":122},"flags":{"collapsed":true},"order":373,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3416},{"name":"mask","type":"IMAGE","link":3413},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3415,3418,3419],"shape":3,"slot_index":0}],"title":"Make Cutouts","properties":{"Node name for S&R":"Cut By Mask"},"widgets_values":[0,0]},{"id":1545,"type":"Cut By Mask","pos":[4655,1597],"size":{"0":230,"1":122},"flags":{"collapsed":true},"order":500,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3422},{"name":"mask","type":"IMAGE","link":3423},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3425],"shape":3,"slot_index":0}],"title":"Cut Masks","properties":{"Node name for S&R":"Cut By Mask"},"widgets_values":[0,0]},{"id":947,"type":"ImageScaleBy","pos":[4736,1420],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":504,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3425},{"name":"scale_by","type":"FLOAT","link":2045,"widget":{"name":"scale_by"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2042],"shape":3,"slot_index":0}],"title":"Upscale Masks","properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",1.2],"color":"#232","bgcolor":"#353"},{"id":1499,"type":"Reroute","pos":[4061.3842711883653,-144.27882715788627],"size":[75,26],"flags":{},"order":351,"mode":0,"inputs":[{"name":"","type":"*","link":3209}],"outputs":[{"name":"","type":"IMAGE","links":[3210],"label":"Boxes","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":959,"type":"Reroute","pos":[4411,1761],"size":[75,26],"flags":{},"order":311,"mode":0,"inputs":[{"name":"","type":"*","link":2075}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2084],"label":"Temporal","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":960,"type":"Reroute","pos":[4410,1722],"size":[75,26],"flags":{},"order":115,"mode":0,"inputs":[{"name":"","type":"*","link":2079}],"outputs":[{"name":"","type":"CONTROL_NET","links":[2083],"label":"Tile","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#233","bgcolor":"#355"},{"id":1043,"type":"Reroute","pos":[4406,1375],"size":[75,26],"flags":{},"order":288,"mode":0,"inputs":[{"name":"","type":"*","link":2301}],"outputs":[{"name":"","type":"CLIP","links":[2292,2293],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":1236,"type":"Reroute","pos":[4406,1417],"size":[75,26],"flags":{},"order":161,"mode":0,"inputs":[{"name":"","type":"*","link":3409}],"outputs":[{"name":"","type":"*","links":[3211,3416],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1240,"type":"Reroute","pos":[4408,1447],"size":[75,26],"flags":{},"order":496,"mode":0,"inputs":[{"name":"","type":"*","link":3421}],"outputs":[{"name":"","type":"IMAGE","links":[2700,3422],"slot_index":0,"label":"Full M"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1500,"type":"Reroute","pos":[4409,1479],"size":[75,26],"flags":{},"order":360,"mode":0,"inputs":[{"name":"","type":"*","link":3210}],"outputs":[{"name":"","type":"IMAGE","links":[3212,3413,3423],"label":"boxes","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":1261,"type":"Note","pos":[3082,-27],"size":{"0":279.75421142578125,"1":396.4662170410156},"flags":{},"order":78,"mode":0,"properties":{"text":""},"widgets_values":["Bbox segs, this is used to limit what is detected and allowed to be worked on.  \n\nIf you downscale make sure you take that into account for the height requirements .5 downscale means your image is half size so half hight. \n\nThis is important to have the boxes in the preview below be proper.  Using the threshold and the filter you need to have the boxes where your characters are.  Sometimes it will detect background things, filter them out.  Somtimes it will detect something odd or not enough change the threshold.\n\nUse Height or Width to determine the MIN size of the detections that are allowed. \n\nChange Bbox threshold lower if nothing is detected (it will error i think)\n\nChange the box model to what you like person or any\n\nIf it erros here check the height/width and the threshold to make sure you have detections. in the box preview"],"color":"#432","bgcolor":"#653"},{"id":1029,"type":"Reroute","pos":[4392.086075371997,467.12078037307793],"size":[75,26],"flags":{},"order":286,"mode":0,"inputs":[{"name":"","type":"*","link":3115}],"outputs":[{"name":"","type":"MODEL","links":[3429],"slot_index":0,"label":"Model"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":1001,"type":"Reroute","pos":[4394.086075371997,527.1207803730781],"size":[75,26],"flags":{},"order":457,"mode":0,"inputs":[{"name":"","type":"*","link":2321}],"outputs":[{"name":"","type":"LATENT","links":[2217],"label":"Latents","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":660,"type":"Reroute","pos":[4396.086075371997,591.1207803730781],"size":[75,26],"flags":{},"order":495,"mode":0,"inputs":[{"name":"","type":"*","link":3373}],"outputs":[{"name":"","type":"IMAGE","links":[1421],"slot_index":0,"label":"Full M"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1507,"type":"Reroute","pos":[-2249,1081],"size":[75,26],"flags":{},"order":420,"mode":0,"inputs":[{"name":"","type":"*","link":3241}],"outputs":[{"name":"","type":"IMAGE","links":[3239,3367],"slot_index":0,"label":"Line"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#222","bgcolor":"#000"},{"id":506,"type":"PixelPerfectResolution","pos":[-3430.2418085085615,1312.387210854385],"size":{"0":280,"1":100},"flags":{"collapsed":true},"order":207,"mode":0,"inputs":[{"name":"original_image","type":"IMAGE","link":2153},{"name":"image_gen_width","type":"INT","link":1086,"widget":{"name":"image_gen_width"}},{"name":"image_gen_height","type":"INT","link":1087,"widget":{"name":"image_gen_height"}}],"outputs":[{"name":"RESOLUTION (INT)","type":"INT","links":[1111,3183],"shape":3,"slot_index":0}],"title":"Pixel Perfect","properties":{"Node name for S&R":"PixelPerfectResolution"},"widgets_values":[512,512,"Just Resize"]},{"id":48,"type":"ImageScale","pos":[-3287.2418085085615,1311.387210854385],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":248,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2143},{"name":"width","type":"INT","link":77,"widget":{"name":"width"}},{"name":"height","type":"INT","link":78,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3220],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1539,"type":"VHS_VideoCombine","pos":[-3456.2418085085615,1484.387210854385],"size":[210,198],"flags":{},"order":299,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3325},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Lineart","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":6,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":true,"paused":false,"params":{"filename":"AnimateDiff_00077.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":1576,"type":"PreviewImage","pos":[3781.1177624219354,844],"size":{"0":284.763671875,"1":404.209228515625},"flags":{},"order":497,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3428}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":648,"type":"Reroute","pos":[4062.1177624219354,758],"size":[75,26],"flags":{},"order":494,"mode":0,"inputs":[{"name":"","type":"*","link":1392}],"outputs":[{"name":"","type":"IMAGE","links":[3373,3421,3428],"label":"Full M","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":202,"type":"LatentUpscaleBy","pos":[2850.0477704805526,1913.3271531637367],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":453,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":1080},{"name":"scale_by","type":"FLOAT","link":2236,"widget":{"name":"scale_by"}}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1203],"shape":3,"slot_index":0}],"title":"Upscale Latent","properties":{"Node name for S&R":"LatentUpscaleBy"},"widgets_values":["bislerp",1.5]},{"id":13,"type":"KSamplerAdvanced","pos":[1311.2763273398807,1948.8013366005582],"size":{"0":320,"1":550},"flags":{},"order":452,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2521,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":1407},{"name":"negative","type":"CONDITIONING","link":1408},{"name":"latent_image","type":"LATENT","link":2551,"slot_index":3},{"name":"noise_seed","type":"INT","link":null,"widget":{"name":"noise_seed"},"slot_index":4}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1080,1119],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446114956,"fixed",8,2.2,"lcm","sgm_uniform",4,10000,"disable"]},{"id":1295,"type":"Note","pos":[661,2662],"size":{"0":480,"1":110},"flags":{},"order":79,"mode":0,"properties":{"text":""},"widgets_values":["Can bypass all 6 of these rebatch nodes if you have plenty of Vram.  This just allows the vae decode to do one frame at a time instead of batched.  Saves a ton of vram when decoding, but it's slower, I think.\n\nmy 12gb is fine, but large videos take 10+GB to decode when these are not enabled. 5.8 when they are."],"color":"#432","bgcolor":"#653"},{"id":47,"type":"Get Image Size","pos":[-4020,1601],"size":{"0":140,"1":50},"flags":{"collapsed":true},"order":154,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2711}],"outputs":[{"name":"INT","type":"INT","links":[77,81,533,3081,3143],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[78,82,534,3082,3144],"shape":3,"slot_index":1}],"title":"Image Size","properties":{"Node name for S&R":"Get Image Size"}},{"id":1152,"type":"Note","pos":[-4086,1658],"size":{"0":230,"1":170},"flags":{},"order":80,"mode":0,"properties":{"text":""},"widgets_values":["By default this is disconnected, its best to have this disconnected until you have either the video frames or the images ready to be processed.  Cropped and resized to you desired size.\n\nDisconnect this to hold the workflow here to get the video correct before processing, it may error, but just ignore it and prepare images."],"color":"#432","bgcolor":"#653"},{"id":844,"type":"SAMLoader","pos":[4542,3520],"size":{"0":210,"1":82},"flags":{},"order":81,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[2396,3044,3127],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","Prefer GPU"]},{"id":647,"type":"Reroute","pos":[3279.327467614833,756.9590288170225],"size":[75,26],"flags":{},"order":476,"mode":0,"inputs":[{"name":"","type":"*","link":3431}],"outputs":[{"name":"","type":"IMAGE","links":[2211,2214],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1109,"type":"ReActorFaceSwap","pos":[7010.380446743718,1867.7272065050138],"size":{"0":315,"1":338},"flags":{},"order":585,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":2768},{"name":"source_image","type":"IMAGE","link":2425},{"name":"face_model","type":"FACE_MODEL","link":null,"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2769],"shape":3,"slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","GFPGANv1.4.pth",1,0.5,"no","no","1","1",1]},{"id":999,"type":"Get Image Size","pos":[3559,1210],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":478,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2211}],"outputs":[{"name":"INT","type":"INT","links":[2212],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[2213],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":533,"type":"CLIPTextEncode","pos":[4520,2100],"size":{"0":440,"1":120},"flags":{},"order":316,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2292}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1154],"shape":3}],"title":"Positive","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["wet skin"],"color":"#223","bgcolor":"#335"},{"id":39,"type":"VHS_VideoCombine","pos":[181,1983],"size":[280,397.3125],"flags":{},"order":438,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1196},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":true,"params":{"filename":"AnimateDiff_00082.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":539,"type":"RebatchImages","pos":[645,2932],"size":{"0":320,"1":60},"flags":{"collapsed":true},"order":436,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1178},{"name":"batch_size","type":"INT","link":1182,"widget":{"name":"batch_size"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1196,2956],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[32],"color":"#232","bgcolor":"#353"},{"id":267,"type":"RebatchImages","pos":[-3357,-34],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":359,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":584},{"name":"batch_size","type":"INT","link":2658,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2657,2666],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[16]},{"id":1260,"type":"Note","pos":[3472,-534],"size":{"0":593.3681030273438,"1":329.97686767578125},"flags":{},"order":82,"mode":0,"properties":{"text":""},"widgets_values":["Combined Masking solution\n\n3 masking choices again - this area needs good masks for body upscale, I prefer coco here just because playing with all these masking settings to get detections proper is not fun.  Coco .. just works nearly every time, even if its slow as dirt.\n\nI put other mask groups out of the way, i don't really recommend them and can be deleted, might be removed in next version\n\nnew version makes one mask for each frame for use in both full upscale and body upscale.  This still has the Height and width filters on the bboxes\n\nConnect the mask chosen to both full/body, and connect boxes to the body.\n\nOther\ncan use mask Open/close to \nopen - removes white spots\nclose - removes black spots\n\nYou can delete the entire group if you dont have the nodes and/or dont want to use them\n\nBypass both these masking areas if not doing full or body enhance or it will do them anyway."],"color":"#432","bgcolor":"#653"},{"id":1007,"type":"Note","pos":[4734,164],"size":{"0":990,"1":280},"flags":{},"order":83,"mode":0,"properties":{"text":""},"widgets_values":["Working better now that it uses same masking as the body, i now think this is better than the body enhance with these controls.\n\nWorks best when the subject(s) are full screen in the images or you want more detailed BG.  This has issues with changing small details in backgrounds.  Like a castle you can barely see, but it makes a new castle every frame because I upscaled it enough for it to imagine one there and fit it in with the new size.  Best used on tight shots where there are not any far distance objects\n\n3 Controlnets - 4 controls - 2 masks\n\nControl 1 - Tile - starts at 0.4 ends at 1.0 strength of 1.\nControl 2 - Pix2Pix starts at 0.0 ends at 0.8 strength of 0.6-0.9  for color\nControl 3 - TemporalNet BG - full strength full steps / masked only to the background\nControl 4 - TemporalNet Subject = starts at 0.0 ends at 0.7 / masked only to the subject\n\nYou can play with the settings... i have done 1000s of runs at this step and this is the best i got.  Temporal net is amazing but in its strategy to solve consistency it burns/contrast shifts the output video. Lowering its strength makes the consistency just not work. Only option is to limit it then let the model and tile try to fix the contrast. \n\nSteps 4-8 with image latent"],"color":"#432","bgcolor":"#653"},{"id":1514,"type":"Get Image Size","pos":[-2090,1913],"size":{"0":140,"1":50},"flags":{"collapsed":true},"order":203,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3300}],"outputs":[{"name":"INT","type":"INT","links":[3249,3251,3253,3255,3257],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[3250,3252,3254,3256,3258],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":516,"type":"AIO_Preprocessor","pos":[-3527.2418085085615,1358.387210854385],"size":{"0":350,"1":80},"flags":{},"order":228,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2160},{"name":"resolution","type":"INT","link":1111,"widget":{"name":"resolution"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2143],"shape":3,"slot_index":0}],"title":"Motion Lineart","properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["PiDiNetPreprocessor",512],"color":"#222","bgcolor":"#000"},{"id":603,"type":"ACN_AdvancedControlNetApply","pos":[-780,1990],"size":{"0":230,"1":250},"flags":{},"order":429,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1296,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":1297},{"name":"control_net","type":"CONTROL_NET","link":1300,"slot_index":2},{"name":"image","type":"IMAGE","link":3108,"slot_index":3},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":5},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":1303,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1298],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1299],"shape":3,"slot_index":1}],"title":"Sparse RGB","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,0.8]},{"id":605,"type":"ScaledSoftControlNetWeights","pos":[-789,2286],"size":{"0":240,"1":102},"flags":{},"order":84,"mode":0,"outputs":[{"name":"CN_WEIGHTS","type":"CONTROL_NET_WEIGHTS","links":[1303],"shape":3,"slot_index":0},{"name":"TK_SHORTCUT","type":"TIMESTEP_KEYFRAME","links":null,"shape":3}],"properties":{"Node name for S&R":"ScaledSoftControlNetWeights"},"widgets_values":[0.5,false]},{"id":45,"type":"ScaledSoftControlNetWeights","pos":[-520.4867680484182,2276.0129197097776],"size":{"0":240,"1":102},"flags":{},"order":85,"mode":0,"outputs":[{"name":"CN_WEIGHTS","type":"CONTROL_NET_WEIGHTS","links":[154],"shape":3,"slot_index":0},{"name":"TK_SHORTCUT","type":"TIMESTEP_KEYFRAME","links":null,"shape":3}],"properties":{"Node name for S&R":"ScaledSoftControlNetWeights"},"widgets_values":[0.9,false]},{"id":1386,"type":"Reroute","pos":[529,1772],"size":[75,26],"flags":{},"order":439,"mode":0,"inputs":[{"name":"","type":"*","link":2956}],"outputs":[{"name":"","type":"IMAGE","links":[2958],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1588,"type":"Inset Image Bounds","pos":[2306.649111730371,2185.4970683962933],"size":[211.60000610351562,130],"flags":{},"order":189,"mode":0,"inputs":[{"name":"image_bounds","type":"IMAGE_BOUNDS","link":3452,"slot_index":0}],"outputs":[{"name":"IMAGE_BOUNDS","type":"IMAGE_BOUNDS","links":[3451],"shape":3}],"title":"Crop","properties":{"Node name for S&R":"Inset Image Bounds"},"widgets_values":[0,0,0,0]},{"id":1285,"type":"Reroute","pos":[6905.443736667853,1812.1130392733899],"size":[75,26],"flags":{},"order":584,"mode":0,"inputs":[{"name":"","type":"*","link":3467}],"outputs":[{"name":"","type":"IMAGE","links":[2768],"slot_index":0,"label":"Swap"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1148,"type":"Note","pos":[7007,1393],"size":{"0":360,"1":300},"flags":{},"order":86,"mode":0,"properties":{"text":""},"widgets_values":["Reactor stabilizes the face, if you can use it.  Sometimes you dont need it.\n\nCan select more than one face with the selector\n\nDefault 1 can do 1,2, 1,7 4,16 etc any faces from the video can be brought in here.\n\nPreview Image here shows all faces with numbers\n\n\nIf you change something here and then requeue.. it can take 20-30 seconds before it figures out where you changed things and start.  It needs to run through the entire flow to see what has changed.  it has hung here on me.  Not sure if that is a comfy issue or me.\n\nWith proper settings, the frame interpolation works to stabilize without this sometimes."],"color":"#432","bgcolor":"#653"},{"id":1051,"type":"Note","pos":[7579,1464],"size":{"0":420,"1":250},"flags":{},"order":87,"mode":0,"properties":{"text":""},"widgets_values":["Frame interpolation.\n\nUse this to get 24+ fps or more from the video.\n\nCan use the save video node to save if you want, or use the preview node.  The second frame interpolator is quite fast and decent.\n\nFf saving from rife with save video, change the fps to 24 or whatever your final fps is. and connect the metadata to the save.\n\nIf using the frame interpolator node you leave the fps at 12\n\nCurrently set up to use the save video node because the previewer is changing too much for me to keep up.  \n\nVideos saved to output/n-suite/vidoes\nFrames saved to output/n-suite/frames_out"],"color":"#432","bgcolor":"#653"},{"id":319,"type":"Inset Image Bounds","pos":[-4856,1117],"size":{"0":211.60000610351562,"1":130},"flags":{},"order":201,"mode":0,"inputs":[{"name":"image_bounds","type":"IMAGE_BOUNDS","link":692,"slot_index":0}],"outputs":[{"name":"IMAGE_BOUNDS","type":"IMAGE_BOUNDS","links":[691],"shape":3}],"title":"Crop","properties":{"Node name for S&R":"Inset Image Bounds"},"widgets_values":[0,0,0,0]},{"id":76,"type":"ACN_AdvancedControlNetApply","pos":[-1040,1990],"size":{"0":230,"1":250},"flags":{},"order":426,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":2975,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":173},{"name":"control_net","type":"CONTROL_NET","link":3288,"slot_index":2},{"name":"image","type":"IMAGE","link":3171,"slot_index":3},{"name":"mask_optional","type":"MASK","link":2005},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":5},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":1336,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1296],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1297],"shape":3,"slot_index":1}],"title":"Tile/Pix2pix","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0,1]},{"id":31,"type":"VHS_LoadVideoPath","pos":[-5310,1110],"size":[220,218],"flags":{},"order":88,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2115,2534],"shape":3,"slot_index":0},{"name":"frame_count","type":"INT","links":null,"shape":3},{"name":"audio","type":"VHS_AUDIO","links":[],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"VHS_LoadVideoPath"},"widgets_values":{"video":"C:\\Users\\rocky\\OneDrive\\Desktop\\poses\\New folder\\d.gif","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":32,"skip_first_frames":15,"select_every_nth":1,"videopreview":{"hidden":true,"paused":false,"params":{"frame_load_cap":32,"skip_first_frames":15,"force_rate":0,"filename":"C:\\Users\\rocky\\OneDrive\\Desktop\\poses\\New folder\\d.gif","type":"path","format":"image/gif","select_every_nth":1}}}},{"id":613,"type":"Reroute","pos":[-3652.3820712814227,-110.12044193887932],"size":[75,26],"flags":{},"order":160,"mode":0,"inputs":[{"name":"","type":"*","link":3490}],"outputs":[{"name":"","type":"*","links":[2137,3473,3474],"label":"Base","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1221,"type":"Note","pos":[-3737,454],"size":{"0":260,"1":70},"flags":{},"order":89,"mode":0,"properties":{"text":""},"widgets_values":["Coco masks, slow but accurate and reliable"],"color":"#432","bgcolor":"#653"},{"id":232,"type":"OneFormer-COCO-SemSegPreprocessor","pos":[-3605,134],"size":[210,60],"flags":{"collapsed":true},"order":229,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2138,"slot_index":0},{"name":"resolution","type":"INT","link":3477,"widget":{"name":"resolution"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[577],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"OneFormer-COCO-SemSegPreprocessor"},"widgets_values":[768]},{"id":1597,"type":"ImageGenResolutionFromImage","pos":[-3620,193],"size":[268.79998779296875,46],"flags":{"collapsed":true},"order":184,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3473}],"outputs":[{"name":"IMAGE_GEN_WIDTH (INT)","type":"INT","links":[3475],"shape":3,"slot_index":0},{"name":"IMAGE_GEN_HEIGHT (INT)","type":"INT","links":[3476],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ImageGenResolutionFromImage"}},{"id":1598,"type":"PixelPerfectResolution","pos":[-3594,247],"size":[278.79998779296875,98],"flags":{"collapsed":true},"order":208,"mode":0,"inputs":[{"name":"original_image","type":"IMAGE","link":3474},{"name":"image_gen_width","type":"INT","link":3475,"widget":{"name":"image_gen_width"}},{"name":"image_gen_height","type":"INT","link":3476,"widget":{"name":"image_gen_height"}}],"outputs":[{"name":"RESOLUTION (INT)","type":"INT","links":[3477],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PixelPerfectResolution"},"widgets_values":[512,512,"Just Resize"]},{"id":1220,"type":"PreviewImage","pos":[-3151,13],"size":{"0":210,"1":250},"flags":{},"order":372,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2666}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":234,"type":"Image Select Color","pos":[-3382.581680656422,11.279631303308129],"size":{"0":210,"1":130},"flags":{},"order":272,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":770}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[504],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Select Color"},"widgets_values":[220,20,60,10]},{"id":316,"type":"ImagePadForOutpaint","pos":[-4857,1290],"size":{"0":210,"1":174},"flags":{},"order":243,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2135}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2136],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[3482],"shape":3,"slot_index":1}],"title":"Pad Image","properties":{"Node name for S&R":"ImagePadForOutpaint"},"widgets_values":[448,0,0,0,0]},{"id":86,"type":"PrimitiveNode","pos":[-5080,1110],"size":{"0":210,"1":82},"flags":{},"order":90,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[193,3485],"widget":{"name":"scale_by"},"slot_index":0}],"title":"Upscale/downscale","properties":{"Run widget replace on values":false},"widgets_values":[0.5,"fixed"]},{"id":1600,"type":"Change Channel Count","pos":[-4618,1117],"size":[210,58],"flags":{"collapsed":true},"order":293,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3479}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3481],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":1602,"type":"MaskToImage","pos":[-4627,1240],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":266,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":3482}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3486],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1606,"type":"ImageScaleBy","pos":[-4601,1201],"size":{"0":210,"1":80},"flags":{"collapsed":true},"order":294,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3486},{"name":"scale_by","type":"FLOAT","link":3485,"widget":{"name":"scale_by"},"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3487],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.5]},{"id":1601,"type":"Mix Color By Mask","pos":[-4598,1160],"size":[210,126],"flags":{"collapsed":true},"order":322,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3481},{"name":"mask","type":"IMAGE","link":3487}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3492],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Mix Color By Mask"},"widgets_values":[0,0,0]},{"id":143,"type":"VHS_VideoCombine","pos":[-4611,1293],"size":[280,397.80078125],"flags":{},"order":345,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1705},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":6,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00079.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":396,"type":"Reroute","pos":[-4348.302270705667,1082.1193208527332],"size":[75,26],"flags":{},"order":334,"mode":0,"inputs":[{"name":"","type":"*","link":3492}],"outputs":[{"name":"","type":"IMAGE","links":[1705,3205],"slot_index":0,"label":"Base"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1347,"type":"LoadImage","pos":[-6909,2644],"size":{"0":320,"1":310},"flags":{},"order":91,"mode":4,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2883],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["2022_06_09__12_11_50_0.png","image"]},{"id":1225,"type":"Reroute","pos":[-4158,1513],"size":[75,26],"flags":{},"order":92,"mode":0,"inputs":[{"name":"","type":"*","link":null,"slot_index":0}],"outputs":[{"name":"","type":"*","links":[2675,2711,3109,3130,3131,3193,3219,3490],"label":"Start","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1061,"type":"Reroute","pos":[3426.02903487606,1801.4567312201114],"size":[75,26],"flags":{},"order":534,"mode":0,"inputs":[{"name":"","type":"*","link":2317}],"outputs":[{"name":"","type":"IMAGE","links":[],"label":"From Body","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1573,"type":"Reroute","pos":[3386.02903487606,1691.4567312201114],"size":[75,26],"flags":{},"order":475,"mode":0,"inputs":[{"name":"","type":"*","link":3500}],"outputs":[{"name":"","type":"IMAGE","links":[3431,3436],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1012,"type":"Reroute","pos":[3426.02903487606,1551.4567312201114],"size":[75,26],"flags":{},"order":523,"mode":0,"inputs":[{"name":"","type":"*","link":2318}],"outputs":[{"name":"","type":"IMAGE","links":[3437],"label":"From Full","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1059,"type":"Reroute","pos":[3673.02903487606,1945.4567312201114],"size":[75,26],"flags":{},"order":525,"mode":0,"inputs":[{"name":"","type":"*","link":3437}],"outputs":[{"name":"","type":"IMAGE","links":[2314],"slot_index":0,"label":"To Face"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1028,"type":"Reroute","pos":[3664.02903487606,1797.4567312201114],"size":[75,26],"flags":{},"order":93,"mode":0,"inputs":[{"name":"","type":"*","link":null}],"outputs":[{"name":"","type":"*","links":[3409,3426],"label":"To Body","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1060,"type":"Reroute","pos":[3666.02903487606,1541.4567312201114],"size":[75,26],"flags":{},"order":477,"mode":0,"inputs":[{"name":"","type":"*","link":3436}],"outputs":[{"name":"","type":"IMAGE","links":[2685],"slot_index":0,"label":"To Full"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1066,"type":"Note","pos":[2633,1543],"size":{"0":520,"1":100},"flags":{},"order":94,"mode":0,"properties":{"text":""},"widgets_values":["Upscale here with a model for best results but works without. or dont upscale if its big enough as it is.  the next steps work either way.\n\nModels good for video are NMKD Siax and 4x NickelbackFS_72000_G IMO"],"color":"#432","bgcolor":"#653"},{"id":1062,"type":"Note","pos":[3426,2057],"size":{"0":306.2323913574219,"1":225.24981689453125},"flags":{},"order":95,"mode":0,"properties":{"text":""},"widgets_values":["For full upscale, connect \"to full\" image\n\nFor subject upscale only, connect \"to body\" image\n\nTo do both, connect \"to full\" image\nThen \"from full\" to \"To Body\" then from body to face\n\nDefault it does full reprocess and skips body and does face.\n\nIt takes A LOT of system RAM to do both body and Full together, but it works now.\n\nVram depends on size of the frames.\n\n"],"color":"#432","bgcolor":"#653"},{"id":1589,"type":"Image Bounds","pos":[2076,2146],"size":{"0":229.20001220703125,"1":26},"flags":{"collapsed":true},"order":163,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3501}],"outputs":[{"name":"IMAGE_BOUNDS","type":"IMAGE_BOUNDS","links":[3452],"shape":3}],"properties":{"Node name for S&R":"Image Bounds"}},{"id":1577,"type":"SelfAttentionGuidance","pos":[5210.086075371997,949.1207803730781],"size":{"0":210,"1":82},"flags":{},"order":314,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3429}],"outputs":[{"name":"MODEL","type":"MODEL","links":[3430],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SelfAttentionGuidance"},"widgets_values":[0.30000000000000004,1.5],"color":"#232","bgcolor":"#353"},{"id":1586,"type":"Bounded Image Crop","pos":[2238,2144],"size":{"0":229.20001220703125,"1":46},"flags":{"collapsed":true},"order":215,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3503},{"name":"image_bounds","type":"IMAGE_BOUNDS","link":3451,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3455,3456],"shape":3,"slot_index":0}],"title":"Crop","properties":{"Node name for S&R":"Bounded Image Crop"}},{"id":864,"type":"KSamplerAdvanced","pos":[5292.985616180967,3234.7798467567395],"size":{"0":330,"1":560},"flags":{},"order":559,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3298,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":1890},{"name":"negative","type":"CONDITIONING","link":1891},{"name":"latent_image","type":"LATENT","link":1937,"slot_index":3},{"name":"noise_seed","type":"INT","link":null,"widget":{"name":"noise_seed"},"slot_index":4}],"outputs":[{"name":"LATENT","type":"LATENT","links":[1894],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446114956,"fixed",4,2.2,"lcm","sgm_uniform",2,10000,"disable"]},{"id":658,"type":"Reroute","pos":[1363.0935116718429,991.2864803613179],"size":[75,26],"flags":{},"order":240,"mode":0,"inputs":[{"name":"","type":"*","link":3294}],"outputs":[{"name":"","type":"MODEL","links":[2297,3504],"slot_index":0,"label":"Model 2"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#323","bgcolor":"#535"},{"id":657,"type":"Reroute","pos":[1363.0935116718429,1021.2864803613179],"size":[75,26],"flags":{},"order":241,"mode":0,"inputs":[{"name":"","type":"*","link":2444}],"outputs":[{"name":"","type":"CLIP","links":[3314,3505],"slot_index":0,"label":"Clip 2"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":868,"type":"CLIPTextEncode","pos":[4544.7221830674325,2608.627811129493],"size":{"0":660,"1":100},"flags":{},"order":320,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2295}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[1888],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["close up face photo, embedding:vmpr, embedding:style-princess"],"color":"#223","bgcolor":"#335"},{"id":1055,"type":"Reroute","pos":[6152.985616180967,2584.779846756741],"size":[75,26],"flags":{},"order":567,"mode":0,"inputs":[{"name":"","type":"*","link":2308}],"outputs":[{"name":"","type":"IMAGE","links":[3463,3465,3502],"slot_index":0,"label":"Finish"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1592,"type":"Inset Image Bounds","pos":[6290,2420],"size":[211.60000610351562,130],"flags":{},"order":574,"mode":0,"inputs":[{"name":"image_bounds","type":"IMAGE_BOUNDS","link":3461,"slot_index":0}],"outputs":[{"name":"IMAGE_BOUNDS","type":"IMAGE_BOUNDS","links":[3459],"shape":3}],"title":"Crop","properties":{"Node name for S&R":"Inset Image Bounds"},"widgets_values":[0,0,0,0]},{"id":1591,"type":"Bounded Image Crop","pos":[6340,2590],"size":{"0":229.20001220703125,"1":46},"flags":{"collapsed":true},"order":578,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3463},{"name":"image_bounds","type":"IMAGE_BOUNDS","link":3459,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3515],"shape":3,"slot_index":0}],"title":"Crop","properties":{"Node name for S&R":"Bounded Image Crop"}},{"id":1595,"type":"Reroute","pos":[6245,2148],"size":[75,26],"flags":{},"order":568,"mode":0,"inputs":[{"name":"","type":"*","link":3465}],"outputs":[{"name":"","type":"IMAGE","links":[3466,3508],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1593,"type":"Image Bounds","pos":[6320,2390],"size":{"0":229.20001220703125,"1":26},"flags":{"collapsed":true},"order":570,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3466}],"outputs":[{"name":"IMAGE_BOUNDS","type":"IMAGE_BOUNDS","links":[3461],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Bounds"}},{"id":1617,"type":"ImageScaleBy","pos":[6290,2260],"size":[210,82],"flags":{},"order":575,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3509}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3510],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",1.5]},{"id":1614,"type":"UpscaleModelLoader","pos":[6510,2280],"size":[210,58],"flags":{},"order":96,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[3507],"shape":3}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x_NMKD-Siax_200k.pth"]},{"id":978,"type":"ImageScaleBy","pos":[-3603,5],"size":{"0":210,"1":82},"flags":{},"order":183,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2137}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2138],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScaleBy"},"widgets_values":["lanczos",0.5]},{"id":706,"type":"Paste By Mask","pos":[5599,1503],"size":{"0":230,"1":120},"flags":{"collapsed":true},"order":526,"mode":0,"inputs":[{"name":"image_base","type":"IMAGE","link":3211},{"name":"image_to_paste","type":"IMAGE","link":1522},{"name":"mask","type":"IMAGE","link":3212},{"name":"mask_mapping_optional","type":"MASK_MAPPING","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1802],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Paste By Mask"},"widgets_values":["source_size"]},{"id":194,"type":"ACN_AdvancedControlNetApply","pos":[5194.290345053854,641.9930743979766],"size":{"0":230,"1":250},"flags":{},"order":511,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":427},{"name":"negative","type":"CONDITIONING","link":428},{"name":"control_net","type":"CONTROL_NET","link":2221,"slot_index":2},{"name":"image","type":"IMAGE","link":721},{"name":"mask_optional","type":"MASK","link":2229},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null,"slot_index":5},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":null,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[423],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[424],"shape":3,"slot_index":1}],"title":"Temporal Subject","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0.1,0.9]},{"id":1110,"type":"ImageSelector","pos":[7060,2739],"size":{"0":210,"1":60},"flags":{},"order":572,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3516}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2425,2428],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageSelector"},"widgets_values":["1"]},{"id":1155,"type":"Note","pos":[2154,1676],"size":{"0":289.12139892578125,"1":108.27274322509766},"flags":{},"order":97,"mode":0,"properties":{"text":""},"widgets_values":["Once you are happy with the video created, connect this to your liking.\n\nDisconnect this to hold the workflow here to get the steps before correct, the only one to disconnect to hold is the frames to frames"],"color":"#432","bgcolor":"#653"},{"id":1292,"type":"Note","pos":[5230,1258],"size":{"0":270,"1":70},"flags":{},"order":98,"mode":0,"properties":{"text":""},"widgets_values":["Large Upscales may need Tiled Decode, connect it if needed. i only needed this after images were larger than 1024x1024 "],"color":"#432","bgcolor":"#653"},{"id":1618,"type":"Get Image Size","pos":[6360,2218],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":579,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3510}],"outputs":[{"name":"INT","type":"INT","links":[3512],"shape":3,"slot_index":0},{"name":"INT","type":"INT","links":[3513],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Get Image Size"}},{"id":1616,"type":"ImageSelector","pos":[6358,2177],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":571,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3508}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3509],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageSelector"},"widgets_values":["1"]},{"id":1613,"type":"ImageUpscaleWithModel","pos":[6569,2222],"size":[161.1999969482422,46],"flags":{"collapsed":true},"order":581,"mode":4,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":3507,"slot_index":0},{"name":"image","type":"IMAGE","link":3515}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3511],"shape":3,"slot_index":0}],"title":"With Model","properties":{"Node name for S&R":"ImageUpscaleWithModel"},"color":"#232","bgcolor":"#353"},{"id":1596,"type":"Note","pos":[6521,2411],"size":[226.87000931900002,167.48098276429664],"flags":{},"order":99,"mode":0,"properties":{"text":""},"widgets_values":["Sometimes you end up with a small text at the bottom, or a border... remove that here.\n\nIf It's not big enough... upscale here with or without model.\n\nMight crash frame interpolator or reactor, but you can try..."],"color":"#432","bgcolor":"#653"},{"id":1053,"type":"Note","pos":[1535,1436],"size":{"0":210,"1":90},"flags":{},"order":100,"mode":0,"properties":{"text":""},"widgets_values":["Connect the model/clip you want to use for the upscale with animate diff."],"color":"#432","bgcolor":"#653"},{"id":1054,"type":"Note","pos":[1695,916],"size":{"0":210,"1":111.48533630371094},"flags":{},"order":101,"mode":0,"properties":{"text":""},"widgets_values":["Connect the model/clip you want to use for the upscales without animate diff.\n\nBody face now separate"],"color":"#432","bgcolor":"#653"},{"id":1513,"type":"Reroute","pos":[-2249,1153],"size":[75,26],"flags":{},"order":402,"mode":0,"inputs":[{"name":"","type":"*","link":3244}],"outputs":[{"name":"","type":"IMAGE","links":[3245],"label":"Masks","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":1002,"type":"Reroute","pos":[4391.086075371997,903.1207803730781],"size":[75,26],"flags":{},"order":289,"mode":0,"inputs":[{"name":"","type":"*","link":3112}],"outputs":[{"name":"","type":"CLIP","links":[2224,2225],"slot_index":0,"label":"Clip"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":257,"type":"CLIPTextEncode","pos":[4494.086075371997,933.1207803730781],"size":{"0":400,"1":200},"flags":{"collapsed":true},"order":319,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2225},{"name":"text","type":"STRING","link":2222,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[549],"shape":3,"slot_index":0}],"title":"Neg","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["embedding:bad-hands-5, text, blur, bokeh, photo frame, billboards, lace, frills"],"color":"#332922","bgcolor":"#593930"},{"id":1291,"type":"Note","pos":[4616,1226],"size":[381.8434432080694,112.59553552586794],"flags":{},"order":102,"mode":0,"properties":{"text":""},"widgets_values":["If not upscaling, the cutouts bypass these two upscale nodes.\n\nIf you did not upscale the video before this step, I recommend 1.5+ here.  \n\nIf you did upscale last step, you can choose to not do so here."],"color":"#432","bgcolor":"#653"},{"id":670,"type":"ACN_AdvancedControlNetApply","pos":[4702,641],"size":{"0":230,"1":250},"flags":{},"order":486,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":1440},{"name":"negative","type":"CONDITIONING","link":1441},{"name":"control_net","type":"CONTROL_NET","link":2219,"slot_index":2},{"name":"image","type":"IMAGE","link":1439},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":3544}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1442],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1443],"shape":3,"slot_index":1}],"title":"Pix2Pix","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.4,0,0.8]},{"id":1009,"type":"Reroute","pos":[3181.6651680580794,1697.2719060875813],"size":[75,26],"flags":{},"order":474,"mode":0,"inputs":[{"name":"","type":"*","link":2237}],"outputs":[{"name":"","type":"IMAGE","links":[3500],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":147,"type":"VAEDecode","pos":[5800,551],"size":{"0":210,"1":46},"flags":{"collapsed":true},"order":517,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":323},{"name":"vae","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[340,1669],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":1581,"type":"RebatchImages","pos":[2330,2146],"size":[210,58],"flags":{"collapsed":true},"order":234,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3455}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3445],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[1]},{"id":145,"type":"KSamplerAdvanced","pos":[5454.290345053856,511.9930743979786],"size":{"0":320,"1":550},"flags":{},"order":514,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":3430,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":423},{"name":"negative","type":"CONDITIONING","link":424},{"name":"latent_image","type":"LATENT","link":2325,"slot_index":3},{"name":"noise_seed","type":"INT","link":null,"widget":{"name":"noise_seed"},"slot_index":4}],"outputs":[{"name":"LATENT","type":"LATENT","links":[323],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",907666446114956,"fixed",8,1.6,"lcm","sgm_uniform",2,10000,"disable"]},{"id":884,"type":"RebatchImages","pos":[5897,2832],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":565,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1950},{"name":"batch_size","type":"INT","link":3274,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1926,2308],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[32]},{"id":1594,"type":"Reroute","pos":[6730,2135],"size":[75,26],"flags":{},"order":583,"mode":0,"inputs":[{"name":"","type":"*","link":3514}],"outputs":[{"name":"","type":"IMAGE","links":[3467],"label":"Frames","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1619,"type":"ImageScale","pos":[6557,2179],"size":[315,130],"flags":{"collapsed":true},"order":582,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":3511},{"name":"width","type":"INT","link":3512,"widget":{"name":"width"}},{"name":"height","type":"INT","link":3513,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3514],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"],"color":"#232","bgcolor":"#353"},{"id":1168,"type":"GetKeyFrames","pos":[7084,2401],"size":{"0":262,"1":102},"flags":{"collapsed":true},"order":577,"mode":0,"inputs":[{"name":"frames","type":"IMAGE","link":null,"slot_index":0},{"name":"num_keyframes","type":"INT","link":2605,"widget":{"name":"num_keyframes"}}],"outputs":[{"name":"Keyframes","type":"IMAGE","links":[],"shape":3,"slot_index":0},{"name":"Labeled Keyframes","type":"IMAGE","links":[2608],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GetKeyFrames"},"widgets_values":[12,true,true]},{"id":1169,"type":"VHS_GetImageCount","pos":[7047,2350],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":573,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3517}],"outputs":[{"name":"count","type":"INT","links":[2605],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":1114,"type":"Change Channel Count","pos":[7056,2301],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":569,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3502}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3516,3517],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":193,"type":"Reroute","pos":[4395,558],"size":[75,26],"flags":{},"order":480,"mode":0,"inputs":[{"name":"","type":"*","link":2685,"slot_index":0}],"outputs":[{"name":"","type":"IMAGE","links":[410,721,1072,1343,1439],"slot_index":0,"label":"Frames"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":832,"type":"ImpactSEGSRangeFilter","pos":[4540,3326],"size":{"0":210,"1":150},"flags":{},"order":535,"mode":0,"inputs":[{"name":"segs","type":"SEGS","link":2395}],"outputs":[{"name":"filtered_SEGS","type":"SEGS","links":[1994],"shape":3,"slot_index":0},{"name":"remained_SEGS","type":"SEGS","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ImpactSEGSRangeFilter"},"widgets_values":["height",true,50,67108864]},{"id":751,"type":"ImageUpscaleWithModel","pos":[3025,1914],"size":{"0":241.79998779296875,"1":46},"flags":{"collapsed":true},"order":465,"mode":0,"inputs":[{"name":"upscale_model","type":"UPSCALE_MODEL","link":1668,"slot_index":0},{"name":"image","type":"IMAGE","link":2242}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1667],"shape":3,"slot_index":0}],"title":"Upscale Using Model","properties":{"Node name for S&R":"ImageUpscaleWithModel"},"color":"#232","bgcolor":"#353"},{"id":1049,"type":"Note","pos":[3953,1528],"size":{"0":418.4222717285156,"1":759.3577270507812},"flags":{},"order":103,"mode":0,"properties":{"text":""},"widgets_values":["if 2 subjects and/or the person is full screen in the video, just skip this step and do a full video process below.  It saves memory, not needing to cut/paste when it's not needed. If you are having trouble with the full scale, you can use this.\n\nThis is the subject upscale, it cuts out people and pastes them back in. I did not include the separation of people in this version, it makes 1 mask and cuts out any people that are taller than the limits set below with the SEGS Filter HEIGHT\n\nThis uses tile and temporalnet to hold the body and clothing and upscale and enhance them.\n\nTile is 100% all the way\nTemporal net is 0.1-0.2 start and 0.7 or 0.8 end to prevent video/image burn\n\nsteps 6-12 8-16, can slide up/down slightly on both ends\n\nYou can in paint if you want, It's not really needed. and can be messed up by bad masking.  Bypass that node to enable/disable  recommended off.\n\nPutting a prompt here can destabilize the video.  You can try, but CFG is low, and it's hard to change things here without messing up consistency.\nBut reinforcing colors and items in the video can help, be brief and specific\n\n\nUpscale is to upscale the subjects for processing, then downscale to put it back in the video.  Can help get more details\n\nThis can take a video from... good... to wow or boo... the consistency is the différance.\ncan use a tiled decode... can change this but i ran into memory problems with very large upscales.\n\nTip:\nIf small things are changing, like a button on a shirt, or a buckle, or lace, you can describe that particular thing in the prompt to sometimes stabilize it.  Use a negative and try to remove it at this or previous steps.  Some things wont animate well.  Buttons, earrings, bracelets, etc all are bad at flickering due to the multitude of ways the AI can draw those things.  \nFlicker is usually caused by either describing something in your prompt too well, or not well enough.  If an earring is flickering, either negative out earrings at the previous steps or describe the earring exactly as you want it.  \n\nTeportal net start and end is fluid per video, some videos dont burn at full others do. \n\nIf using a different model here, it may change quite a bit.  Some models can't copy things directly from another.  It will have to interoperate it, using the same model throughout is most consistent but less fun.  For example, I got great glowing eyes from a model in the first 2 steps to be instantly removed here because the model i used had no idea why the eyes were glowing red.  Even with red glowing eyes in prompt, it tried to give them bloodshot eyes...  Know the models you are using.  Realistic has trouble imitating non reality things.\n\nHigh self attention here can help get detail and help burn."],"color":"#432","bgcolor":"#653"},{"id":889,"type":"Separate Mask Components","pos":[4772.985616180967,2984.7798467567413],"size":{"0":216.59999084472656,"1":46},"flags":{},"order":542,"mode":0,"inputs":[{"name":"mask","type":"IMAGE","link":2372}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1940],"shape":3,"slot_index":0},{"name":"MASK_MAPPING","type":"MASK_MAPPING","links":[2350,2387,2399],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"Separate Mask Components"},"color":"#323","bgcolor":"#535"},{"id":148,"type":"VHS_VideoCombine","pos":[5817,601],"size":[280,503.3392857142857],"flags":{},"order":522,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3123},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"GIF","type":"GIF","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":12,"loop_count":0,"filename_prefix":"AnimateDiff","format":"image/webp","pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00284.webp","subfolder":"","type":"temp","format":"image/webp"}}}},{"id":1010,"type":"Reroute","pos":[2606.0477704805526,1748.3271531637367],"size":[75,26],"flags":{},"order":464,"mode":0,"inputs":[{"name":"","type":"*","link":3550}],"outputs":[{"name":"","type":"IMAGE","links":[2240,3011,3285,3286,3541],"slot_index":0,"label":"Batch"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1624,"type":"VHS_GetImageCount","pos":[5804,508],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":470,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3541}],"outputs":[{"name":"count","type":"INT","links":[3527],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":1521,"type":"VHS_GetImageCount","pos":[5784,1604],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":468,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3285}],"outputs":[{"name":"count","type":"INT","links":[3283],"shape":3,"slot_index":0}],"title":"Image Count","properties":{"Node name for S&R":"VHS_GetImageCount"},"widgets_values":{}},{"id":712,"type":"RebatchImages","pos":[5979,1600],"size":{"0":260,"1":60},"flags":{"collapsed":true},"order":530,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1803},{"name":"batch_size","type":"INT","link":3283,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1804],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[32]},{"id":155,"type":"RebatchImages","pos":[5942,554],"size":[210,60],"flags":{"collapsed":true},"order":519,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":340},{"name":"batch_size","type":"INT","link":3527,"widget":{"name":"batch_size"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3123],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"RebatchImages"},"widgets_values":[32]},{"id":1091,"type":"Change Channel Count","pos":[5203,2925],"size":{"0":210,"1":60},"flags":{"collapsed":true},"order":550,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2380}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2381,2382,3542],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Change Channel Count"},"widgets_values":["RGB"]},{"id":151,"type":"ACN_AdvancedControlNetApply","pos":[4461.065239310647,642.4787073556516],"size":{"0":230,"1":250},"flags":{},"order":483,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":3538,"slot_index":0},{"name":"negative","type":"CONDITIONING","link":549},{"name":"control_net","type":"CONTROL_NET","link":2218,"slot_index":2},{"name":"image","type":"IMAGE","link":1072},{"name":"mask_optional","type":"MASK","link":null},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":null},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":3543,"slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[1440],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[1441],"shape":3,"slot_index":1}],"title":"Tile","properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0.4,1]},{"id":203,"type":"CLIPTextEncode","pos":[4584,934],"size":{"0":210,"1":54},"flags":{"collapsed":true},"order":318,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":2224},{"name":"text","type":"STRING","link":1177,"widget":{"name":"text"}}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[3538],"shape":3,"slot_index":0}],"title":"Original","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["1girl, solo, long_hair, breasts, black_hair, navel, swimsuit, bikini, cowboy_shot, day, armpits, arms_up, side-tie_bikini_bottom, red_bikini, realistic"],"color":"#223","bgcolor":"#335"},{"id":1636,"type":"ScaledSoftControlNetWeights","pos":[4453,995],"size":[235.1999969482422,102],"flags":{},"order":104,"mode":0,"outputs":[{"name":"CN_WEIGHTS","type":"CONTROL_NET_WEIGHTS","links":[3543,3544],"shape":3,"slot_index":0},{"name":"TK_SHORTCUT","type":"TIMESTEP_KEYFRAME","links":null,"shape":3}],"properties":{"Node name for S&R":"ScaledSoftControlNetWeights"},"widgets_values":[0.9500000000000001,false]},{"id":1580,"type":"VHS_LoadVideoPath","pos":[2074.803836757342,2188.3824417078613],"size":[218.39999389648438,448.21877720167186],"flags":{},"order":105,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3501,3503],"shape":3,"slot_index":0},{"name":"frame_count","type":"INT","links":null,"shape":3},{"name":"audio","type":"VHS_AUDIO","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_LoadVideoPath"},"widgets_values":{"video":"C:\\Users\\rocky\\OneDrive\\Desktop\\poses\\New folder\\600full.gif","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":1,"videopreview":{"hidden":false,"paused":false,"params":{"frame_load_cap":0,"skip_first_frames":0,"force_rate":0,"filename":"C:\\Users\\rocky\\OneDrive\\Desktop\\poses\\New folder\\600full.gif","type":"path","format":"image/gif","select_every_nth":1}}}},{"id":1582,"type":"Reroute","pos":[2498.649111730371,2113.4970683962933],"size":[75,26],"flags":{},"order":235,"mode":0,"inputs":[{"name":"","type":"*","link":3456}],"outputs":[{"name":"","type":"IMAGE","links":[3545],"label":"Batch","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1011,"type":"Reroute","pos":[2606.6684642351665,1714.6859099633307],"size":[75,26],"flags":{},"order":463,"mode":0,"inputs":[{"name":"","type":"*","link":3549}],"outputs":[{"name":"","type":"IMAGE","links":[2242],"slot_index":0,"label":"Images"}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":537,"type":"PrimitiveNode","pos":[2226,1410],"size":{"0":310,"1":170},"flags":{},"order":106,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[1177,2976,2987],"widget":{"name":"text"},"slot_index":0}],"title":"Positive","properties":{"Run widget replace on values":false},"widgets_values":["1girl, solo, long_hair, breasts, black_hair, navel, swimsuit, bikini, cowboy_shot, day, armpits, arms_up, side-tie_bikini_bottom, red_bikini, realistic"],"color":"#223","bgcolor":"#335"},{"id":1008,"type":"PrimitiveNode","pos":[2701.6651680580794,1747.2719060875813],"size":{"0":210,"1":82},"flags":{},"order":107,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[2235,2236],"widget":{"name":"scale_by"},"slot_index":0}],"title":"Upscale","properties":{"Run widget replace on values":false},"widgets_values":[1.5,"fixed"]},{"id":1583,"type":"Reroute","pos":[2495.649111730371,2082.4970683962933],"size":[75,26],"flags":{},"order":254,"mode":0,"inputs":[{"name":"","type":"*","link":3445}],"outputs":[{"name":"","type":"IMAGE","links":[3497],"label":"Images","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":754,"type":"ImageScale","pos":[3040,1964],"size":{"0":210,"1":122},"flags":{"collapsed":true},"order":473,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1667},{"name":"width","type":"INT","link":1665,"widget":{"name":"width"}},{"name":"height","type":"INT","link":1666,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2237],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,512,"disabled"],"color":"#232","bgcolor":"#353"},{"id":1611,"type":"PreviewImage","pos":[2306,2357],"size":[221.796244499772,426.4764616474081],"flags":{},"order":277,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3497}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1640,"type":"Note","pos":[4703,994],"size":[218.03719287987042,98.40089803553883],"flags":{},"order":108,"mode":0,"properties":{"text":""},"widgets_values":["Can use scaled weights at .95+ if you want to give it more room. Useful when upscaling original videos due to most originals having compression artifacts that are copied at full strength"],"color":"#432","bgcolor":"#653"},{"id":1638,"type":"WD14Tagger|pysssss","pos":[2862,2348],"size":[210,337.4504584711335],"flags":{},"order":278,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":3546}],"outputs":[{"name":"STRING","type":"STRING","links":[],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"WD14Tagger|pysssss"},"widgets_values":["wd-v1-4-vit-tagger-v2",0.35,0.85,"","1girl, solo, long_hair, breasts, black_hair, navel, swimsuit, bikini, cowboy_shot, day, armpits, arms_up, side-tie_bikini_bottom, red_bikini, realistic","1girl, solo, long_hair, breasts, black_hair, navel, jewelry, swimsuit, bikini, cowboy_shot, armpits, necklace, arms_up, side-tie_bikini_bottom, red_bikini, realistic","1girl, solo, long_hair, black_hair, navel, swimsuit, bikini, indoors, armpits, arms_up, side-tie_bikini_bottom, red_bikini, realistic, stretching, photo_background"]},{"id":1153,"type":"Reroute","pos":[1971.276327339881,1838.8013366005582],"size":[75,26],"flags":{},"order":459,"mode":0,"inputs":[{"name":"","type":"*","link":2538}],"outputs":[{"name":"","type":"IMAGE","links":[3549],"label":"Images","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1154,"type":"Reroute","pos":[1971.276327339881,1868.8013366005582],"size":[75,26],"flags":{},"order":462,"mode":0,"inputs":[{"name":"","type":"*","link":2539}],"outputs":[{"name":"","type":"IMAGE","links":[3550],"label":"Batch","slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#223","bgcolor":"#335"},{"id":1584,"type":"Note","pos":[2568,2183],"size":[250.0693804116454,645.754737781052],"flags":{},"order":109,"mode":0,"properties":{"text":""},"widgets_values":["Replace first steps images/batch with these and disconnect the start node to start here.\n\nCan save videos from the left and load them later here.  I will sometimes run a few off runs of a video and pick a good one to load here.\n\nAnd if anything happens and the workflow crashes or freezes, you can save any videos to the left and reload them here.\n\nDisconnect the start at the beginning of the flow to start here.\n\nConnect images/batch to their counterparts and select the video to load in.  You don't need to disable anything before this.\n\nCan just load an original video here and try upscaling it... I have not tested this, it might be quite good.  \n\nThis processes everything unbatched so should be able to load in more frames than the original loader it will take a lot of time to make masks\n\nSuccessfully processed a 95 original frame video from here upscaled 2x, and it worked really well.. better than i thought it would.\n\nCould try changing things, but it will probably destabilize.  If you want to change things, the first samplers are for that.  It will always change the face to the model's style.\n\nYou want to use 1 prompt to try to change something, use the prompt from the first ksampler with sparse control nets describe the video there, you can move the prompt to the area you want.\n\nTagger to the right can help you prompt for your video, image selector brings in whatever frames you want described. Can use some, all or none of that. bypass the group to not use.  This helps when you did not create the video in the first steps and are bringing in an original."],"color":"#432","bgcolor":"#653"},{"id":1637,"type":"ImageSelector","pos":[2862,2252],"size":[210,58],"flags":{},"order":255,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3545}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[3546],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageSelector"},"widgets_values":["1,10"]},{"id":833,"type":"MaskToImage","pos":[4773,2813],"size":{"0":210,"1":26},"flags":{"collapsed":true},"order":538,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1995}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2366,2371,3539],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1050,"type":"Note","pos":[4945,3828],"size":{"0":640,"1":270},"flags":{},"order":110,"mode":0,"properties":{"text":""},"widgets_values":["Face upscaling  -downscale is for masks, can do .5 or about that to save memory.\n\nYou can separate faces, (recommended when more than one person) Unbypass the separate masks' node in pink this batches the faces from each frame together\n\nUses only tile to hold the face.  Can add temporal net but not needed\n\nCan use prompt here to color eyes, lips etc. \nCan in paint, can help, I don't see much of a différance.\nUses Sam for face mask\n\nSteps 2-6, \ncan go 1-8 etc.. the more you do the more you can introduce problems. \ncan start at 4 and go to 12... few options here.\n\nupscale to 515x512 or up to 1024x1024.  Bigger will sometimes distort \n512 is usually good enough unless you're doing a face animation."],"color":"#432","bgcolor":"#653"},{"id":1634,"type":"PreviewImage","pos":[4528,3700],"size":[410.20030213449536,279.76223715541346],"flags":{},"order":540,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":3539}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1067,"type":"Note","pos":[-6212,421],"size":[734.1207640790963,706.6728827568913],"flags":{},"order":111,"mode":0,"properties":{"text":""},"widgets_values":["Beta 3 - extended\nreplaced the color of the padding to black to stop coco from detecting nothing.\nAdded cropping to end \nadded load video group to just before the upscaling to allow the reloading of previous videos or anything this skips\n\n\n\nBeta 3\nFixed a lot with the first masking and proper background removal skip, it really frustrated me as nothing I rendered was nearly as good as when I first started.  Now it's back to proper clarity.\nMasking combined for upscales\nfew other small fixes.\n\nBeta 2 - Minor fixes, RGB should work properly now, batching errors should be fixed, batching limit should be fixed.\nim sure I introduced new ones.\n\nAdded\n-3 mask options, coco is great but slow. Can use any of the three mask options at all steps they are needed. Not sure if they help with memory.  Bypass masking groups you are not needing.\nIf you're smart and know a better masking solution, you can insert your own group to mask off things\n-added anime/cartoon mask creation option\n-added face numbered preview to the reactor area to find your needed images\n-Added lora groups to all model areas\n-Added second save option\n-Added Cutoff nodes.  - allows better color control stability in general.\n-Many more notes - too many notes... I talk too much.\n\nSparse control 101 - video combine is changing daily, mp4 or gif, or I don't know anymore.  If it errors on a preview, change the type to webp or gif\n\nTBH this all can be done with regular line art/controlnets, but it's very nice saving some memory.\n\nThis workflow takes an input video and replaces both the subject and background to whatever you want.\n\nAuto subject/face detailing. Full upscale options. \n\nUses a lot of system memory to get to the end doing all options, 28gb is what I fill when doing everything.\n\nThis workflow is very modular. Most groups have an input and output that can be copied to other workflows you use.  I tend to place any useful groups like these into Node templates then just drop them in when I need something, like a mask, or an upscaler.\n\nTo do\n-background and subject scrolling and zoom\n-add image selector and reactor combine nodes.\n-add hand fixing.\n-daisy chain the body/face fix\n\n\n-combine upscale masking into 1 (done)\n-optional photo start instead of video. (done)\n-add cutoff nodes for prompts to stop color blending. (done)"],"color":"#432","bgcolor":"#653"}],"links":[[8,6,0,1,3,"LATENT"],[56,36,0,35,1,"CONTEXT_OPTIONS"],[70,3,1,43,0,"CLIP"],[77,47,0,48,1,"INT"],[78,47,1,48,2,"INT"],[81,47,0,6,0,"INT"],[82,47,1,6,1,"INT"],[105,59,0,58,3,"LATENT"],[106,60,0,58,1,"CONDITIONING"],[107,61,0,58,2,"CONDITIONING"],[109,58,0,63,0,"LATENT"],[111,60,0,64,1,"CONDITIONING"],[112,61,0,64,2,"CONDITIONING"],[115,63,0,64,3,"LATENT"],[116,64,0,62,0,"LATENT"],[143,72,0,73,1,"IMAGE"],[154,45,0,74,7,"CONTROL_NET_WEIGHTS"],[173,5,0,76,1,"CONDITIONING"],[193,86,0,79,1,"FLOAT"],[310,139,0,136,3,"IMAGE"],[323,145,0,147,0,"LATENT"],[335,149,0,153,0,"LATENT"],[340,147,0,155,0,"IMAGE"],[410,193,0,185,0,"IMAGE"],[423,194,0,145,1,"CONDITIONING"],[424,194,1,145,2,"CONDITIONING"],[427,158,0,194,0,"CONDITIONING"],[428,158,1,194,1,"CONDITIONING"],[504,234,0,235,0,"IMAGE"],[505,235,0,236,0,"MASK"],[506,236,0,237,0,"MASK"],[533,47,0,233,1,"INT"],[534,47,1,233,2,"INT"],[545,254,1,255,0,"CLIP"],[549,257,0,151,1,"CONDITIONING"],[577,232,0,251,0,"IMAGE"],[578,237,0,233,0,"IMAGE"],[584,233,0,267,0,"IMAGE"],[630,292,0,288,0,"IMAGE"],[632,289,0,290,0,"IMAGE"],[633,290,0,291,0,"MASK"],[634,291,0,292,0,"MASK"],[670,288,0,307,0,"IMAGE"],[672,307,0,309,0,"IMAGE"],[677,310,0,311,0,"IMAGE"],[678,311,0,312,0,"MASK"],[691,319,0,318,1,"IMAGE_BOUNDS"],[692,320,0,319,0,"IMAGE_BOUNDS"],[710,153,0,326,0,"IMAGE"],[711,326,0,140,0,"IMAGE"],[721,193,0,194,3,"IMAGE"],[735,332,0,58,4,"INT"],[736,332,0,64,4,"INT"],[770,251,0,234,0,"IMAGE"],[833,134,0,1,0,"MODEL"],[942,429,0,416,0,"CONDITIONING"],[943,429,1,416,1,"CONDITIONING"],[1072,193,0,151,3,"IMAGE"],[1080,13,0,202,0,"LATENT"],[1086,505,0,506,1,"INT"],[1087,505,1,506,2,"INT"],[1096,139,0,510,0,"IMAGE"],[1099,510,0,509,0,"INT"],[1100,510,1,509,1,"INT"],[1102,509,0,512,0,"*"],[1111,506,0,516,1,"INT"],[1119,13,0,149,0,"LATENT"],[1120,139,0,518,0,"IMAGE"],[1121,518,0,509,2,"INT"],[1129,62,0,519,0,"IMAGE"],[1131,521,0,520,1,"INT"],[1132,521,1,520,2,"INT"],[1134,520,0,519,1,"INT"],[1136,498,0,289,0,"IMAGE"],[1154,533,0,429,0,"CONDITIONING"],[1155,534,0,429,1,"CONDITIONING"],[1177,537,0,203,1,"STRING"],[1178,7,0,539,0,"IMAGE"],[1179,538,0,7,0,"LATENT"],[1180,1,0,538,0,"LATENT"],[1181,540,0,6,2,"INT"],[1182,540,0,539,1,"INT"],[1192,439,0,543,0,"IMAGE"],[1196,539,0,39,0,"IMAGE"],[1203,202,0,548,0,"LATENT"],[1255,262,0,569,0,"*"],[1256,185,0,570,0,"*"],[1296,76,0,603,0,"CONDITIONING"],[1297,76,1,603,1,"CONDITIONING"],[1298,603,0,74,0,"CONDITIONING"],[1299,603,1,74,1,"CONDITIONING"],[1300,604,0,603,2,"CONTROL_NET"],[1301,40,0,74,2,"CONTROL_NET"],[1303,605,0,603,7,"CONTROL_NET_WEIGHTS"],[1308,6,0,606,2,"LATENT"],[1336,627,0,76,7,"CONTROL_NET_WEIGHTS"],[1343,193,0,158,3,"IMAGE"],[1366,309,0,637,0,"IMAGE"],[1392,637,0,648,0,"*"],[1407,136,0,13,1,"CONDITIONING"],[1408,136,1,13,2,"CONDITIONING"],[1421,660,0,661,0,"IMAGE"],[1422,661,0,662,0,"MASK"],[1439,193,0,670,3,"IMAGE"],[1440,151,0,670,0,"CONDITIONING"],[1441,151,1,670,1,"CONDITIONING"],[1442,670,0,158,0,"CONDITIONING"],[1443,670,1,158,1,"CONDITIONING"],[1504,416,0,699,1,"CONDITIONING"],[1505,416,1,699,2,"CONDITIONING"],[1513,703,0,700,0,"INT"],[1514,703,1,700,1,"INT"],[1515,704,0,700,2,"INT"],[1522,709,0,706,1,"IMAGE"],[1524,713,0,707,0,"IMAGE"],[1526,707,0,709,0,"IMAGE"],[1527,710,0,709,1,"MASK"],[1529,708,0,711,0,"IMAGE"],[1561,702,0,725,0,"IMAGE"],[1562,725,0,429,3,"IMAGE"],[1563,725,0,416,3,"IMAGE"],[1564,725,0,701,0,"IMAGE"],[1567,704,0,713,1,"INT"],[1569,703,0,707,1,"INT"],[1570,703,1,707,2,"INT"],[1587,43,0,729,1,"CLIP"],[1588,3,0,729,0,"MODEL"],[1595,729,0,35,0,"MODEL"],[1604,730,1,60,0,"CLIP"],[1605,730,1,61,0,"CLIP"],[1653,8,0,745,2,"*"],[1662,752,0,502,0,"IMAGE"],[1664,502,0,753,0,"IMAGE"],[1665,753,0,754,1,"INT"],[1666,753,1,754,2,"INT"],[1667,751,0,754,0,"IMAGE"],[1668,755,0,751,0,"UPSCALE_MODEL"],[1669,147,0,756,0,"*"],[1705,396,0,143,0,"IMAGE"],[1802,706,0,714,0,"IMAGE"],[1803,714,0,712,0,"IMAGE"],[1804,712,0,828,0,"*"],[1805,714,0,829,0,"*"],[1806,831,0,830,0,"BBOX_DETECTOR"],[1821,841,0,830,1,"IMAGE"],[1855,858,0,852,1,"IMAGE"],[1866,860,0,861,0,"IMAGE"],[1878,867,0,866,0,"CONDITIONING"],[1879,867,1,866,1,"CONDITIONING"],[1888,868,0,867,0,"CONDITIONING"],[1889,869,0,867,1,"CONDITIONING"],[1890,866,0,864,1,"CONDITIONING"],[1891,866,1,864,2,"CONDITIONING"],[1894,864,0,870,0,"LATENT"],[1896,852,0,874,0,"IMAGE"],[1897,874,0,875,1,"INT"],[1898,874,1,875,2,"INT"],[1908,874,0,878,1,"INT"],[1909,874,1,878,2,"INT"],[1918,878,0,881,0,"IMAGE"],[1922,858,0,872,2,"IMAGE"],[1926,884,0,882,0,"IMAGE"],[1935,887,0,886,1,"MASK"],[1936,865,0,886,0,"LATENT"],[1937,886,0,864,3,"LATENT"],[1940,889,0,858,0,"IMAGE"],[1949,872,0,893,0,"IMAGE"],[1950,893,0,884,0,"IMAGE"],[1959,901,0,900,0,"BBOX_DETECTOR"],[1960,905,0,902,0,"MASK"],[1962,900,0,904,0,"SEGS"],[1963,904,0,905,0,"SEGS"],[1966,543,0,906,0,"IMAGE"],[1968,902,0,909,0,"IMAGE"],[1973,911,0,912,0,"IMAGE"],[1979,656,0,736,0,"CLIP"],[1994,832,0,926,0,"SEGS"],[1995,926,0,833,0,"MASK"],[1998,906,0,929,0,"IMAGE"],[1999,929,0,900,1,"IMAGE"],[2005,312,0,76,4,"MASK"],[2006,911,0,933,0,"IMAGE"],[2007,933,0,932,1,"INT"],[2009,911,0,932,0,"IMAGE"],[2010,933,1,932,2,"INT"],[2011,932,0,912,1,"INT"],[2016,935,0,936,0,"IMAGE"],[2017,936,0,937,0,"MASK"],[2018,937,0,938,0,"MASK"],[2020,939,0,940,0,"IMAGE"],[2021,940,0,941,0,"IMAGE"],[2022,912,0,935,0,"IMAGE"],[2037,938,0,939,0,"IMAGE"],[2038,701,0,945,0,"LATENT"],[2039,945,0,699,3,"LATENT"],[2042,947,0,946,0,"IMAGE"],[2043,946,0,945,1,"MASK"],[2044,948,0,702,1,"FLOAT"],[2045,948,0,947,1,"FLOAT"],[2047,703,0,949,1,"INT"],[2048,703,1,949,2,"INT"],[2050,949,0,710,0,"IMAGE"],[2058,951,0,841,0,"IMAGE"],[2059,951,0,852,0,"IMAGE"],[2067,62,0,579,0,"IMAGE"],[2068,579,0,577,0,"*"],[2074,828,0,715,0,"IMAGE"],[2075,156,0,959,0,"*"],[2079,184,0,960,0,"*"],[2080,156,0,962,0,"*"],[2081,184,0,963,0,"*"],[2082,503,0,964,0,"*"],[2083,960,0,429,2,"CONTROL_NET"],[2084,959,0,416,2,"CONTROL_NET"],[2100,36,0,969,1,"CONTEXT_OPTIONS"],[2107,736,0,136,1,"CONDITIONING"],[2110,973,0,5,1,"STRING"],[2111,973,0,736,1,"STRING"],[2112,28,0,513,0,"*"],[2115,31,0,81,0,"IMAGE"],[2116,81,0,318,0,"IMAGE"],[2117,81,0,320,0,"IMAGE"],[2135,318,0,316,0,"IMAGE"],[2136,316,0,79,0,"IMAGE"],[2137,613,0,978,0,"IMAGE"],[2138,978,0,232,0,"IMAGE"],[2143,516,0,48,0,"IMAGE"],[2151,594,0,72,0,"IMAGE"],[2152,610,0,505,0,"IMAGE"],[2153,610,0,506,0,"IMAGE"],[2159,577,0,608,0,"*"],[2160,610,0,516,0,"IMAGE"],[2178,205,0,594,0,"*"],[2188,519,0,990,0,"IMAGE"],[2189,990,0,205,0,"*"],[2199,608,0,955,0,"*"],[2202,951,0,872,0,"IMAGE"],[2205,997,0,5,0,"CLIP"],[2211,647,0,999,0,"IMAGE"],[2212,999,0,288,1,"INT"],[2213,999,1,288,2,"INT"],[2214,647,0,1000,0,"IMAGE"],[2215,1000,0,498,0,"IMAGE"],[2217,1001,0,631,0,"*"],[2218,963,0,151,2,"CONTROL_NET"],[2219,964,0,670,2,"CONTROL_NET"],[2220,962,0,158,2,"CONTROL_NET"],[2221,962,0,194,2,"CONTROL_NET"],[2222,973,0,257,1,"STRING"],[2224,1002,0,203,0,"CLIP"],[2225,1002,0,257,0,"CLIP"],[2226,661,0,1003,0,"*"],[2227,662,0,1004,0,"*"],[2228,1004,0,158,4,"MASK"],[2229,1003,0,194,4,"MASK"],[2235,1008,0,502,1,"FLOAT"],[2236,1008,0,202,1,"FLOAT"],[2237,754,0,1009,0,"*"],[2240,1010,0,752,0,"IMAGE"],[2242,1011,0,751,1,"IMAGE"],[2254,503,0,1017,0,"*"],[2255,184,0,1018,0,"*"],[2276,970,1,1033,0,"*"],[2281,1035,0,1036,0,"*"],[2289,1040,0,1041,0,"*"],[2290,931,0,1042,0,"IMAGE"],[2292,1043,0,533,0,"CLIP"],[2293,1043,0,534,0,"CLIP"],[2295,1044,0,868,0,"CLIP"],[2296,1044,0,869,0,"CLIP"],[2297,658,0,1045,0,"*"],[2299,1045,0,1030,0,"*"],[2301,1046,0,1043,0,"*"],[2305,1048,0,656,0,"*"],[2306,1047,0,971,0,"*"],[2308,884,0,1055,0,"*"],[2310,184,0,1056,0,"*"],[2311,156,0,1057,0,"*"],[2312,1056,0,867,2,"CONTROL_NET"],[2313,1057,0,866,2,"CONTROL_NET"],[2314,1059,0,951,0,"*"],[2317,829,0,1061,0,"*"],[2318,756,0,1012,0,"*"],[2321,548,0,1001,0,"*"],[2325,570,0,145,3,"LATENT"],[2328,139,0,1069,0,"IMAGE"],[2329,518,0,1068,1,"INT"],[2331,1069,0,259,0,"IMAGE"],[2335,259,0,1068,0,"LATENT"],[2336,1068,0,511,0,"*"],[2348,699,0,1073,0,"LATENT"],[2350,889,1,852,2,"MASK_MAPPING"],[2366,833,0,1084,0,"IMAGE"],[2367,858,0,1084,1,"IMAGE"],[2371,833,0,860,0,"IMAGE"],[2372,861,0,889,0,"IMAGE"],[2377,1084,0,878,0,"IMAGE"],[2378,878,0,887,0,"IMAGE"],[2380,857,0,1091,0,"IMAGE"],[2381,1091,0,865,0,"IMAGE"],[2382,1091,0,867,3,"IMAGE"],[2387,889,1,872,3,"MASK_MAPPING"],[2394,831,1,830,3,"SEGM_DETECTOR"],[2395,830,0,832,0,"SEGS"],[2396,844,0,830,2,"SAM_MODEL"],[2397,852,0,1079,0,"IMAGE"],[2399,889,1,1084,2,"MASK_MAPPING"],[2401,870,0,875,0,"IMAGE"],[2406,881,0,1105,0,"IMAGE"],[2408,1104,0,872,1,"IMAGE"],[2410,1105,0,1106,0,"MASK"],[2411,1106,0,1104,1,"MASK"],[2419,699,0,1076,0,"LATENT"],[2420,1076,0,713,0,"IMAGE"],[2425,1110,0,1109,1,"IMAGE"],[2428,1110,0,1112,0,"IMAGE"],[2444,1116,1,657,0,"*"],[2459,256,1,970,1,"CLIP"],[2462,1120,0,1121,0,"FRAME_SET"],[2464,1122,0,1123,0,"IMAGE"],[2466,62,0,1126,0,"IMAGE"],[2467,1126,0,1120,0,"IMAGE"],[2475,1128,2,1131,0,"STRING"],[2476,1132,2,1133,0,"STRING"],[2487,2,0,745,0,"*"],[2488,2,1,745,1,"*"],[2489,254,0,1135,0,"MODEL"],[2490,254,1,1135,1,"CLIP"],[2491,1135,0,969,0,"MODEL"],[2496,264,0,2,0,"MODEL"],[2497,969,0,1127,0,"MODEL"],[2498,1135,1,1127,1,"CLIP"],[2501,256,0,1136,0,"MODEL"],[2502,1136,0,970,0,"MODEL"],[2506,254,0,1138,0,"MODEL"],[2507,254,1,1138,1,"CLIP"],[2508,1138,0,1137,0,"MODEL"],[2509,1138,1,1137,1,"CLIP"],[2511,1137,1,1116,1,"CLIP"],[2512,1137,0,1139,0,"MODEL"],[2513,1139,0,1116,0,"MODEL"],[2515,1122,0,1140,0,"*"],[2518,2,1,1040,0,"*"],[2519,970,0,914,0,"MODEL"],[2520,914,0,1032,0,"*"],[2521,971,0,13,0,"MODEL"],[2522,1120,0,1142,0,"FRAME_SET"],[2527,1121,0,1122,0,"FRAME_SET"],[2534,31,0,1146,0,"IMAGE"],[2535,1146,0,1126,1,"INT"],[2538,153,0,1153,0,"*"],[2539,326,0,1154,0,"*"],[2551,511,0,13,3,"LATENT"],[2554,1157,0,35,4,"sample_settings"],[2555,1045,0,156,0,"MODEL"],[2585,1164,1,730,1,"CLIP"],[2605,1169,0,1168,1,"INT"],[2608,1168,1,1170,0,"IMAGE"],[2632,1199,1,1200,0,"MASK"],[2639,1200,0,1206,0,"IMAGE"],[2641,1203,0,1207,0,"IMAGE"],[2642,1207,0,1208,0,"IMAGE"],[2643,1208,0,1204,0,"IMAGE"],[2644,1206,0,1209,0,"IMAGE"],[2645,1209,0,1201,0,"IMAGE"],[2647,1211,0,1199,0,"IMAGE"],[2648,1209,0,1212,0,"*"],[2653,1216,0,1215,1,"INT"],[2655,1215,0,1214,0,"*"],[2657,267,0,1217,0,"*"],[2658,1216,0,267,1,"INT"],[2666,267,0,1220,0,"IMAGE"],[2669,1224,0,1164,0,"MODEL"],[2670,1224,1,1164,1,"CLIP"],[2675,1225,0,1218,0,"*"],[2685,1060,0,193,0,"*"],[2694,1238,0,911,0,"IMAGE"],[2696,941,0,1239,0,"*"],[2700,1240,0,708,0,"*"],[2702,1246,0,1241,0,"IMAGE"],[2703,1241,1,1242,0,"MASK"],[2705,1242,0,1244,0,"IMAGE"],[2706,1244,0,1245,0,"IMAGE"],[2711,1225,0,47,0,"IMAGE"],[2713,3,0,1248,0,"*"],[2714,1248,0,1224,0,"MODEL"],[2715,3,1,1249,0,"*"],[2716,1249,0,1224,1,"CLIP"],[2721,1251,0,1254,0,"IMAGE"],[2722,1254,0,1255,0,"IMAGE"],[2736,711,0,1272,0,"IMAGE"],[2737,1272,0,949,0,"IMAGE"],[2740,1246,0,1275,0,"IMAGE"],[2741,1275,0,1274,1,"INT"],[2742,1275,1,1274,2,"INT"],[2743,1274,0,1247,0,"*"],[2745,1277,0,1276,1,"INT"],[2746,1277,1,1276,2,"INT"],[2748,1256,0,1277,0,"IMAGE"],[2756,1279,0,1274,0,"IMAGE"],[2762,1282,0,28,0,"LATENT"],[2763,1283,0,139,0,"IMAGE"],[2765,1127,0,256,0,"MODEL"],[2766,1127,1,256,1,"CLIP"],[2768,1285,0,1109,0,"IMAGE"],[2769,1109,0,1286,0,"*"],[2770,1286,0,1287,0,"*"],[2771,1287,0,931,0,"IMAGE"],[2772,1164,0,773,0,"MODEL"],[2774,730,0,58,0,"MODEL"],[2775,730,0,64,0,"MODEL"],[2776,1290,0,730,0,"MODEL"],[2777,773,0,1290,0,"MODEL"],[2778,1157,0,969,4,"sample_settings"],[2780,1302,0,1303,1,"STRING"],[2782,1303,1,1300,1,"STRING"],[2783,1287,0,1303,0,"IMAGE"],[2784,1307,0,1313,0,"*"],[2786,1309,0,1315,0,"*"],[2787,1310,0,1316,0,"*"],[2788,1311,0,1317,0,"*"],[2789,1312,0,1318,0,"*"],[2800,1319,0,1325,0,"IMAGE"],[2801,1326,0,1325,1,"INT"],[2802,1327,0,1325,2,"INT"],[2811,1326,0,1330,1,"INT"],[2812,1327,0,1330,2,"INT"],[2814,1326,0,1331,1,"INT"],[2815,1327,0,1331,2,"INT"],[2816,1320,0,1330,0,"IMAGE"],[2817,1321,0,1331,0,"IMAGE"],[2818,1330,0,1305,1,"IMAGE"],[2819,1331,0,1305,2,"IMAGE"],[2837,1335,0,1328,0,"IMAGE"],[2860,1326,0,1341,1,"INT"],[2861,1327,0,1341,2,"INT"],[2863,1326,0,1342,1,"INT"],[2864,1327,0,1342,2,"INT"],[2866,1326,0,1343,1,"INT"],[2867,1327,0,1343,2,"INT"],[2868,1322,0,1341,0,"IMAGE"],[2869,1323,0,1342,0,"IMAGE"],[2870,1324,0,1343,0,"IMAGE"],[2871,1341,0,1305,3,"IMAGE"],[2872,1342,0,1305,4,"IMAGE"],[2873,1343,0,1305,5,"IMAGE"],[2880,1344,0,1350,0,"*"],[2881,1345,0,1351,0,"*"],[2882,1346,0,1352,0,"*"],[2883,1347,0,1353,0,"*"],[2884,1348,0,1354,0,"*"],[2885,1349,0,1355,0,"*"],[2890,1326,0,1362,1,"INT"],[2891,1327,0,1362,2,"INT"],[2892,1326,0,1363,1,"INT"],[2893,1327,0,1363,2,"INT"],[2894,1326,0,1364,1,"INT"],[2895,1327,0,1364,2,"INT"],[2896,1326,0,1365,1,"INT"],[2897,1327,0,1365,2,"INT"],[2898,1326,0,1366,1,"INT"],[2899,1327,0,1366,2,"INT"],[2900,1326,0,1367,1,"INT"],[2901,1327,0,1367,2,"INT"],[2902,1356,0,1362,0,"IMAGE"],[2903,1357,0,1363,0,"IMAGE"],[2904,1358,0,1364,0,"IMAGE"],[2905,1359,0,1365,0,"IMAGE"],[2906,1360,0,1366,0,"IMAGE"],[2907,1361,0,1367,0,"IMAGE"],[2908,1362,0,1305,6,"IMAGE"],[2909,1363,0,1305,7,"IMAGE"],[2912,1325,0,1305,0,"IMAGE"],[2914,1364,0,1305,8,"IMAGE"],[2915,1365,0,1305,9,"IMAGE"],[2916,1366,0,1305,10,"IMAGE"],[2917,1367,0,1305,11,"IMAGE"],[2918,1308,0,1314,0,"*"],[2919,1335,0,1371,0,"*"],[2922,1310,0,1375,0,"IMAGE"],[2930,1376,0,1335,0,"IMAGE"],[2931,1305,0,1376,0,"IMAGE"],[2952,91,0,74,3,"IMAGE"],[2954,74,0,1,1,"CONDITIONING"],[2955,74,1,1,2,"CONDITIONING"],[2956,539,0,1386,0,"*"],[2957,1,0,1387,0,"*"],[2958,1386,0,1283,0,"*"],[2959,1387,0,1282,0,"*"],[2966,997,0,1388,0,"CLIP"],[2967,1388,0,1389,0,"CLIPREGION"],[2969,1389,0,1391,0,"CLIPREGION"],[2970,1391,0,1393,0,"CLIPREGION"],[2971,1393,0,1392,0,"CLIPREGION"],[2972,1392,0,1394,0,"CLIPREGION"],[2974,931,0,1300,0,"IMAGE"],[2975,1394,0,76,0,"CONDITIONING"],[2976,537,0,1388,1,"STRING"],[2978,1398,0,1389,1,"STRING"],[2979,1399,0,1389,2,"STRING"],[2980,1400,0,1391,1,"STRING"],[2981,1401,0,1391,2,"STRING"],[2982,1402,0,1393,1,"STRING"],[2983,1403,0,1393,2,"STRING"],[2984,1404,0,1392,1,"STRING"],[2985,1405,0,1392,2,"STRING"],[2986,656,0,1406,0,"CLIP"],[2987,537,0,1406,1,"STRING"],[2992,1398,0,1411,1,"STRING"],[2993,1399,0,1411,2,"STRING"],[2994,1411,0,1412,0,"CLIPREGION"],[2995,1400,0,1412,1,"STRING"],[2996,1401,0,1412,2,"STRING"],[2997,1414,0,1413,0,"CLIPREGION"],[2998,1404,0,1413,1,"STRING"],[2999,1405,0,1413,2,"STRING"],[3000,1412,0,1414,0,"CLIPREGION"],[3001,1402,0,1414,1,"STRING"],[3002,1403,0,1414,2,"STRING"],[3003,1406,0,1411,0,"CLIPREGION"],[3004,1413,0,1415,0,"CLIPREGION"],[3005,1415,0,136,0,"CONDITIONING"],[3006,184,0,1416,0,"*"],[3007,1416,0,136,2,"CONTROL_NET"],[3011,1010,0,1418,0,"IMAGE"],[3013,909,0,1419,0,"IMAGE"],[3015,35,0,1132,0,"MODEL"],[3016,729,1,1132,1,"CLIP"],[3017,1132,0,1128,0,"MODEL"],[3019,1132,1,1128,1,"CLIP"],[3020,1128,0,264,0,"MODEL"],[3021,1128,1,2,1,"CLIP"],[3023,1278,0,1276,0,"IMAGE"],[3027,1276,0,1257,0,"*"],[3033,901,0,1425,0,"BBOX_DETECTOR"],[3034,901,1,1425,3,"SEGM_DETECTOR"],[3035,1425,0,1426,0,"SEGS"],[3037,1426,0,1251,0,"MASK"],[3044,844,0,1429,0,"*"],[3045,1314,0,1329,0,"IMAGE"],[3052,1313,0,1319,0,"*"],[3053,1314,0,1320,0,"*"],[3054,1315,0,1322,0,"*"],[3055,1313,0,1321,0,"*"],[3056,1315,0,1323,0,"*"],[3057,1313,0,1324,0,"*"],[3076,1213,0,1442,0,"IMAGE"],[3081,47,0,1443,1,"INT"],[3082,47,1,1443,2,"INT"],[3084,1443,0,1215,0,"IMAGE"],[3085,1208,0,1444,0,"IMAGE"],[3086,1444,0,1443,0,"IMAGE"],[3087,1442,1,1445,0,"MASK"],[3088,1445,0,1203,0,"MASK"],[3108,606,0,603,3,"IMAGE"],[3109,1225,0,1213,0,"*"],[3112,1046,0,1002,0,"*"],[3115,1045,0,1029,0,"*"],[3123,155,0,148,0,"IMAGE"],[3127,844,0,1463,0,"*"],[3128,901,0,1460,0,"BBOX_DETECTOR"],[3129,901,1,1460,3,"SEGM_DETECTOR"],[3130,1225,0,1211,0,"*"],[3131,1225,0,1464,0,"*"],[3133,1466,0,1467,0,"IMAGE"],[3134,1465,0,1466,0,"IMAGE"],[3135,1461,0,1465,0,"MASK"],[3136,1460,0,1468,0,"SEGS"],[3137,1468,0,1461,0,"SEGS"],[3138,1464,0,1469,0,"IMAGE"],[3139,1469,0,1460,1,"IMAGE"],[3140,1471,0,1470,0,"IMAGE"],[3141,1216,0,1470,1,"INT"],[3143,47,0,1471,1,"INT"],[3144,47,1,1471,2,"INT"],[3146,1470,0,1472,0,"*"],[3148,875,0,1104,0,"IMAGE"],[3149,852,0,857,0,"IMAGE"],[3171,955,0,76,3,"IMAGE"],[3180,982,0,1234,0,"*"],[3181,1233,0,987,0,"IMAGE"],[3183,506,0,987,1,"INT"],[3190,1467,0,1493,0,"IMAGE"],[3191,1493,0,1471,0,"IMAGE"],[3192,518,0,326,1,"INT"],[3193,1225,0,1216,0,"IMAGE"],[3198,1472,0,1495,0,"IMAGE"],[3201,955,0,66,0,"IMAGE"],[3205,396,0,1497,0,"IMAGE"],[3209,909,0,1499,0,"*"],[3210,1499,0,1500,0,"*"],[3211,1236,0,706,0,"IMAGE"],[3212,1500,0,706,2,"IMAGE"],[3219,1225,0,610,0,"*"],[3220,48,0,1025,0,"*"],[3232,1219,0,983,1,"IMAGE"],[3235,1219,0,72,1,"IMAGE"],[3239,1507,0,915,0,"IMAGE"],[3240,1234,0,593,0,"IMAGE"],[3241,73,0,1507,0,"*"],[3243,1234,0,1233,0,"*"],[3244,1219,0,1513,0,"*"],[3245,1513,0,310,0,"*"],[3246,2,1,997,0,"*"],[3249,1514,0,59,0,"INT"],[3250,1514,1,59,1,"INT"],[3251,1514,0,579,1,"INT"],[3252,1514,1,579,2,"INT"],[3253,1514,0,990,1,"INT"],[3254,1514,1,990,2,"INT"],[3255,1514,0,1147,1,"INT"],[3256,1514,1,1147,2,"INT"],[3257,1514,0,1121,1,"INT"],[3258,1514,1,1121,2,"INT"],[3262,1515,0,1516,0,"IMAGE"],[3263,1516,0,521,0,"IMAGE"],[3264,1516,0,520,0,"IMAGE"],[3265,1218,0,1515,0,"*"],[3268,1517,0,1219,0,"*"],[3269,1036,0,1047,0,"*"],[3270,1041,0,1048,0,"*"],[3274,1518,0,884,1,"INT"],[3276,1255,0,1520,0,"IMAGE"],[3277,1520,0,1278,0,"IMAGE"],[3278,1245,0,1519,0,"IMAGE"],[3279,1519,0,1279,0,"IMAGE"],[3283,1521,0,712,1,"INT"],[3285,1010,0,1521,0,"IMAGE"],[3286,1010,0,1518,0,"IMAGE"],[3288,1017,0,76,2,"CONTROL_NET"],[3289,1247,0,1243,0,"IMAGE"],[3290,1257,0,1252,0,"IMAGE"],[3293,1037,0,1038,0,"*"],[3294,1116,0,658,0,"*"],[3295,1030,0,1522,0,"MODEL"],[3296,1522,0,699,0,"MODEL"],[3297,1031,0,1523,0,"MODEL"],[3298,1523,0,864,0,"MODEL"],[3300,1515,0,1514,0,"IMAGE"],[3314,657,0,1046,0,"*"],[3317,1537,0,1031,0,"*"],[3318,1538,0,1044,0,"*"],[3322,1025,0,1505,0,"*"],[3325,1025,0,1539,0,"IMAGE"],[3326,1540,0,40,0,"SPARSE_METHOD"],[3328,1540,0,604,0,"SPARSE_METHOD"],[3333,1217,0,1517,0,"*"],[3350,983,0,982,1,"IMAGE"],[3356,1505,0,1556,0,"IMAGE"],[3357,1219,0,1556,1,"IMAGE"],[3359,1556,0,73,0,"IMAGE"],[3361,1218,0,1559,0,"IMAGE"],[3362,1219,0,1559,1,"IMAGE"],[3364,1559,0,982,0,"IMAGE"],[3367,1507,0,91,0,"*"],[3368,608,0,983,0,"IMAGE"],[3369,987,0,606,0,"IMAGE"],[3370,1239,0,1561,0,"IMAGE"],[3373,648,0,660,0,"*"],[3378,439,0,1256,0,"*"],[3379,439,0,1246,0,"*"],[3380,439,0,1238,0,"*"],[3409,1028,0,1236,0,"*"],[3412,1256,0,1425,1,"IMAGE"],[3413,1500,0,908,1,"IMAGE"],[3415,908,0,702,0,"IMAGE"],[3416,1236,0,908,0,"IMAGE"],[3418,908,0,703,0,"IMAGE"],[3419,908,0,704,0,"IMAGE"],[3421,648,0,1240,0,"*"],[3422,1240,0,1545,0,"IMAGE"],[3423,1500,0,1545,1,"IMAGE"],[3425,1545,0,947,0,"IMAGE"],[3426,1028,0,439,0,"*"],[3428,648,0,1576,0,"IMAGE"],[3429,1029,0,1577,0,"MODEL"],[3430,1577,0,145,0,"MODEL"],[3431,1573,0,647,0,"*"],[3436,1573,0,1060,0,"*"],[3437,1012,0,1059,0,"*"],[3445,1581,0,1583,0,"*"],[3451,1588,0,1586,1,"IMAGE_BOUNDS"],[3452,1589,0,1588,0,"IMAGE_BOUNDS"],[3455,1586,0,1581,0,"IMAGE"],[3456,1586,0,1582,0,"*"],[3459,1592,0,1591,1,"IMAGE_BOUNDS"],[3461,1593,0,1592,0,"IMAGE_BOUNDS"],[3463,1055,0,1591,0,"IMAGE"],[3465,1055,0,1595,0,"*"],[3466,1595,0,1593,0,"IMAGE"],[3467,1594,0,1285,0,"*"],[3473,613,0,1597,0,"IMAGE"],[3474,613,0,1598,0,"IMAGE"],[3475,1597,0,1598,1,"INT"],[3476,1597,1,1598,2,"INT"],[3477,1598,0,232,1,"INT"],[3479,79,0,1600,0,"IMAGE"],[3481,1600,0,1601,0,"IMAGE"],[3482,316,1,1602,0,"MASK"],[3485,86,0,1606,1,"FLOAT"],[3486,1602,0,1606,0,"IMAGE"],[3487,1606,0,1601,1,"IMAGE"],[3490,1225,0,613,0,"*"],[3492,1601,0,396,0,"*"],[3497,1583,0,1611,0,"IMAGE"],[3500,1009,0,1573,0,"*"],[3501,1580,0,1589,0,"IMAGE"],[3502,1055,0,1114,0,"IMAGE"],[3503,1580,0,1586,0,"IMAGE"],[3504,658,0,1537,0,"*"],[3505,657,0,1538,0,"*"],[3507,1614,0,1613,0,"UPSCALE_MODEL"],[3508,1595,0,1616,0,"IMAGE"],[3509,1616,0,1617,0,"IMAGE"],[3510,1617,0,1618,0,"IMAGE"],[3511,1613,0,1619,0,"IMAGE"],[3512,1618,0,1619,1,"INT"],[3513,1618,1,1619,2,"INT"],[3514,1619,0,1594,0,"*"],[3515,1591,0,1613,1,"IMAGE"],[3516,1114,0,1110,0,"IMAGE"],[3517,1114,0,1169,0,"IMAGE"],[3527,1624,0,155,1,"INT"],[3538,203,0,151,0,"CONDITIONING"],[3539,833,0,1634,0,"IMAGE"],[3541,1010,0,1624,0,"IMAGE"],[3542,1091,0,866,3,"IMAGE"],[3543,1636,0,151,7,"CONTROL_NET_WEIGHTS"],[3544,1636,0,670,7,"CONTROL_NET_WEIGHTS"],[3545,1582,0,1637,0,"IMAGE"],[3546,1637,0,1638,0,"IMAGE"],[3549,1153,0,1011,0,"*"],[3550,1154,0,1010,0,"*"]],"groups":[{"title":"Group","bounding":[-2875,1750,1064,1067],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-1685,386,1377,496],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-1411,1703,1999,1188],"color":"#3f789e","font_size":24,"locked":false},{"title":"Video Load Start","bounding":[-5316,1046,1009,781],"color":"#3f789e","font_size":24,"locked":false},{"title":"Full Upscale","bounding":[4434,427,1711,701],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-155,626,1553,888],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[760,1815,1253,747],"color":"#3f789e","font_size":24,"locked":false},{"title":"Line art Motion","bounding":[-3603,1235,521,535],"color":"#444","font_size":24,"locked":false},{"title":"Upscale.","bounding":[2644,1675,581,416],"color":"#3f789e","font_size":24,"locked":false},{"title":"Coco Masks\\","bounding":[3321,724,783,553],"color":"#3f789e","font_size":24,"locked":false},{"title":"Face Detailer.","bounding":[4499,2526,1693,1473],"color":"#3f789e","font_size":24,"locked":false},{"title":"Upscale Bodies","bounding":[4448,1303,1752,1067],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-2201,450,440,345],"color":"#3f789e","font_size":24,"locked":false},{"title":"Diff","bounding":[1551,1252,178,149],"color":"#3f789e","font_size":24,"locked":false},{"title":"Body/Full","bounding":[1556,774,170,154],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[3427,1506,295,483],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-1349,1323,944,362],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-3722,2218,793,594],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[6940,1769,458,1653],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[7556,1761,509,1762],"color":"#3f789e","font_size":24,"locked":false},{"title":"Fast","bounding":[-3430,388,476,430],"color":"#3f789e","font_size":24,"locked":false},{"title":"Anime / Cartoon Segmentation","bounding":[-3516,-715,584,548],"color":"#3f789e","font_size":24,"locked":false},{"title":"Coco Masks","bounding":[-3612,-117,690,466],"color":"#3f789e","font_size":24,"locked":false},{"title":"Background Replacement","bounding":[-2827,1047,623,281],"color":"#3f789e","font_size":24,"locked":false},{"title":"Bboxes","bounding":[3423,-176,683,844],"color":"#3f789e","font_size":24,"locked":false},{"title":"Coco Masks","bounding":[2771,-2644,656,559],"color":"#3f789e","font_size":24,"locked":false},{"title":"Fast","bounding":[1847,-2654,720,538],"color":"#3f789e","font_size":24,"locked":false},{"title":"Sam / Seg Masks","bounding":[1110,-2849,533,807],"color":"#3f789e","font_size":24,"locked":false},{"title":"Image Loading","bounding":[-6957,1474,1223,1503],"color":"#3f789e","font_size":24,"locked":false},{"title":"Image Load Start","bounding":[-5470,1866,1179,681],"color":"#3f789e","font_size":24,"locked":false},{"title":"Seg sam","bounding":[-4421,-135,700,546],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[627,2799,552,160],"color":"#3f789e","font_size":24,"locked":false},{"title":"Connect Masks","bounding":[-2809,16,272,243],"color":"#A88","font_size":24,"locked":false},{"title":"Connect to start","bounding":[-4135,1472,327,142],"color":"#3f789e","font_size":24,"locked":false},{"title":"Face","bounding":[1556,982,165,154],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[-2083,892,296,625],"color":"#3f789e","font_size":24,"locked":false},{"title":"Upscale SubLoad","bounding":[2068,2058,479,802],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[6279,2096,495,520],"color":"#3f789e","font_size":24,"locked":false},{"title":"Group","bounding":[2844,2176,251,573],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4}