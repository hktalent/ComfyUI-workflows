{"last_node_id":322,"last_link_id":561,"nodes":[{"id":273,"type":"SetNode","pos":[-3705.49696322862,-850.7757471942431],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":54,"mode":0,"inputs":[{"name":"VAE","type":"VAE","link":484}],"outputs":[{"name":"*","type":"*","links":[],"slot_index":0}],"title":"Set_Global_VAE","properties":{"previousName":"Global_VAE"},"widgets_values":["Global_VAE"]},{"id":286,"type":"SetNode","pos":[-3726.4969632286197,-901.7757471942433],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":92,"mode":0,"inputs":[{"name":"CLIP","type":"CLIP","link":506}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Global_Clip_Layer","properties":{"previousName":"Global_Clip_Layer"},"widgets_values":["Global_Clip_Layer"]},{"id":287,"type":"SetNode","pos":[-4006.4969632286175,-910.7757471942433],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":70,"mode":0,"inputs":[{"name":"INT","type":"INT","link":504}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Global_NumOfFrames","properties":{"previousName":"Global_NumOfFrames"},"widgets_values":["Global_NumOfFrames"]},{"id":225,"type":"ImageScale","pos":[657.8223331240991,-2590.081199707941],"size":{"0":210,"1":130},"flags":{},"order":52,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":520},{"name":"width","type":"INT","link":515,"widget":{"name":"width"}},{"name":"height","type":"INT","link":514,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[405],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["lanczos",512,960,"disabled"],"color":"#432","bgcolor":"#653"},{"id":224,"type":"EmptyImage","pos":[663.8223331240991,-2400.081199707942],"size":{"0":210,"1":106},"flags":{},"order":48,"mode":0,"inputs":[{"name":"batch_size","type":"INT","link":522,"widget":{"name":"batch_size"}},{"name":"width","type":"INT","link":516,"widget":{"name":"width"}},{"name":"height","type":"INT","link":513,"widget":{"name":"height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[404],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"EmptyImage"},"widgets_values":[512,960,1,0],"color":"#432","bgcolor":"#653"},{"id":296,"type":"SetNode","pos":[-3509.4969632286206,-906.7757471942433],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":87,"mode":0,"inputs":[{"name":"INT","type":"INT","link":521}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_frame_count","properties":{"previousName":"frame_count"},"widgets_values":["frame_count"]},{"id":48,"type":"LoraLoader","pos":[-3193.2850497702325,-692.249020222952],"size":{"0":412.2048034667969,"1":126},"flags":{"collapsed":false},"order":76,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":288},{"name":"clip","type":"CLIP","link":469}],"outputs":[{"name":"MODEL","type":"MODEL","links":[79],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[506],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["SD1-5\\lcm-lora-sdv1-5_lora_weights.safetensors",1,1],"color":"#233","bgcolor":"#355"},{"id":50,"type":"ModelSamplingDiscrete","pos":[-3146.2850497702334,-458.2490202229518],"size":{"0":315,"1":82},"flags":{},"order":91,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":79}],"outputs":[{"name":"MODEL","type":"MODEL","links":[507],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ModelSamplingDiscrete"},"widgets_values":["lcm",false],"color":"#233","bgcolor":"#355"},{"id":229,"type":"PreviewImage","pos":[939.8931249292708,-2844.6456597498172],"size":{"0":646.82080078125,"1":562.50927734375},"flags":{},"order":103,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":408}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":228,"type":"PreviewImage","pos":[-437.1068750707287,-2720.6456597498172],"size":{"0":596.0325927734375,"1":420.3921203613281},"flags":{},"order":74,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":407}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":297,"type":"GetNode","pos":[-204.10687507072862,-2842.6456597498172],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":0,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[522],"slot_index":0}],"title":"Get_frame_count","properties":{},"widgets_values":["frame_count"]},{"id":223,"type":"MaskBlur+","pos":[306.89312492927104,-2331.6456597498172],"size":{"0":210,"1":58},"flags":{},"order":97,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":403}],"outputs":[{"name":"MASK","type":"MASK","links":[406],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskBlur+"},"widgets_values":[0.1],"color":"#432","bgcolor":"#653"},{"id":222,"type":"GrowMask","pos":[312.89312492927104,-2488.645659749817],"size":{"0":210,"1":82},"flags":{},"order":90,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":402}],"outputs":[{"name":"MASK","type":"MASK","links":[403],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"GrowMask"},"widgets_values":[0,true],"color":"#432","bgcolor":"#653"},{"id":221,"type":"MaskFromColor+","pos":[310.89312492927104,-2687.6456597498172],"size":{"0":210,"1":130},"flags":{},"order":73,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":401}],"outputs":[{"name":"MASK","type":"MASK","links":[402],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskFromColor+"},"widgets_values":[220,20,60,1],"color":"#432","bgcolor":"#653"},{"id":293,"type":"GetNode","pos":[9.893124929271185,-2842.6456597498172],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":1,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[515,516],"slot_index":0}],"title":"Get_Video_Width","properties":{},"widgets_values":["Video_Width"]},{"id":294,"type":"GetNode","pos":[237.8931249292708,-2836.6456597498172],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":2,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[513,514],"slot_index":0}],"title":"Get_Video_Height","properties":{},"widgets_values":["Video_Height"]},{"id":226,"type":"ImageCompositeMasked","pos":[615.8223331240981,-2798.081199707942],"size":{"0":210,"1":146},"flags":{},"order":100,"mode":0,"inputs":[{"name":"destination","type":"IMAGE","link":404},{"name":"source","type":"IMAGE","link":405},{"name":"mask","type":"MASK","link":406}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[408,528],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCompositeMasked"},"widgets_values":[0,0,false],"color":"#432","bgcolor":"#653"},{"id":278,"type":"GetNode","pos":[-85.82437120686514,-288.1065137108153],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":3,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[492],"slot_index":0}],"title":"Get_SeedNumber","properties":{},"widgets_values":["SeedNumber"]},{"id":220,"type":"OneFormer-COCO-SemSegPreprocessor","pos":[-383.1068750707287,-2240.645659749817],"size":{"0":325.46533203125,"1":58},"flags":{},"order":51,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":519}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[401,407,527],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"OneFormer-COCO-SemSegPreprocessor"},"widgets_values":[512],"color":"#432","bgcolor":"#653"},{"id":97,"type":"DWPreprocessor","pos":[-1051.97543082603,-1667.2909986670659],"size":{"0":315,"1":178},"flags":{},"order":58,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":544,"slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[451,455],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"DWPreprocessor"},"widgets_values":["enable","enable","enable",512,"yolox_m.onnx","dw-ll_ucoco_384.onnx"]},{"id":53,"type":"ControlNetApplyAdvanced","pos":[-1052.97543082603,-1410.2909986670659],"size":{"0":308.47021484375,"1":166},"flags":{},"order":96,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":535},{"name":"negative","type":"CONDITIONING","link":536},{"name":"control_net","type":"CONTROL_NET","link":84,"slot_index":2},{"name":"image","type":"IMAGE","link":455}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[328],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[329],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[1,0,1]},{"id":2,"type":"ADE_AnimateDiffUniformContextOptions","pos":[261.28600862244576,-1559.527332444711],"size":{"0":315,"1":154},"flags":{},"order":4,"mode":0,"outputs":[{"name":"CONTEXT_OPTIONS","type":"CONTEXT_OPTIONS","links":[1],"shape":3}],"properties":{"Node name for S&R":"ADE_AnimateDiffUniformContextOptions"},"widgets_values":[16,1,4,"uniform",false]},{"id":260,"type":"CannyEdgePreprocessor","pos":[-321.71399137755424,-1606.527332444711],"size":{"0":315,"1":106},"flags":{},"order":59,"mode":4,"inputs":[{"name":"image","type":"IMAGE","link":545,"slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[466,467],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CannyEdgePreprocessor"},"widgets_values":[100,200,512]},{"id":167,"type":"ControlNetApplyAdvanced","pos":[-325.71399137755424,-1396.527332444711],"size":{"0":308.47021484375,"1":166},"flags":{},"order":99,"mode":4,"inputs":[{"name":"positive","type":"CONDITIONING","link":328},{"name":"negative","type":"CONDITIONING","link":329},{"name":"control_net","type":"CONTROL_NET","link":323,"slot_index":2},{"name":"image","type":"IMAGE","link":466}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[552],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[555],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.5,0,0.5]},{"id":298,"type":"GetNode","pos":[-4615.684304588023,-2960.8879698230394],"size":{"0":210,"1":58},"flags":{"collapsed":false},"order":5,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[523],"slot_index":0}],"title":"Get_Model_FromBase","properties":{},"widgets_values":["Model_FromBase"]},{"id":149,"type":"LoadImage","pos":[-2070.524688401516,-2672.861694548861],"size":{"0":440.2332763671875,"1":529.2178344726562},"flags":{},"order":6,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[318],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["example.png","image"]},{"id":317,"type":"GetNode","pos":[-2034.5246884015166,-2845.861694548861],"size":{"0":210,"1":58},"flags":{"collapsed":false},"order":7,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[558]}],"title":"Get_Model_FromBase","properties":{},"widgets_values":["Model_FromBase"]},{"id":157,"type":"IPAdapterModelLoader","pos":[-1569.5570316827698,-2863.0614822051107],"size":{"0":550.546875,"1":58},"flags":{},"order":8,"mode":2,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[309],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-faceid-plusv2_sd15.bin"]},{"id":163,"type":"CLIPVisionLoader","pos":[-1562.5570316827695,-2732.0614822051107],"size":{"0":535.9698486328125,"1":58},"flags":{},"order":9,"mode":2,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[310],"shape":3}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"]},{"id":161,"type":"InsightFaceLoader","pos":[-1543.5570316827695,-2614.0614822051107],"size":{"0":315,"1":58},"flags":{"pinned":false},"order":10,"mode":2,"outputs":[{"name":"INSIGHTFACE","type":"INSIGHTFACE","links":[311],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InsightFaceLoader"},"widgets_values":["CUDA"]},{"id":162,"type":"PrepImageForInsightFace","pos":[-1536.5570316827695,-2499.0614822051107],"size":{"0":315,"1":106},"flags":{},"order":49,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":318}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[312],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PrepImageForInsightFace"},"widgets_values":["center",0,false]},{"id":160,"type":"LoraLoaderModelOnly","pos":[-1564.5570316827695,-2328.0614822051107],"size":{"0":475.3240966796875,"1":82},"flags":{},"order":50,"mode":2,"inputs":[{"name":"model","type":"MODEL","link":558,"slot_index":0}],"outputs":[{"name":"MODEL","type":"MODEL","links":[313],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoraLoaderModelOnly"},"widgets_values":["ip-adapter-faceid-plusv2_sd15_lora.safetensors",0.8]},{"id":158,"type":"IPAdapterApplyFaceID","pos":[-991.5570316827697,-2667.0614822051107],"size":{"0":369.23284912109375,"1":332.9832458496094},"flags":{},"order":72,"mode":2,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":309},{"name":"clip_vision","type":"CLIP_VISION","link":310,"slot_index":1},{"name":"insightface","type":"INSIGHTFACE","link":311,"slot_index":2},{"name":"image","type":"IMAGE","link":312},{"name":"model","type":"MODEL","link":313},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[559],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApplyFaceID"},"widgets_values":[1,0.01,"original",0,1,true,0.1,true]},{"id":295,"type":"GetNode","pos":[-435.9791762745345,-2844],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":11,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[519,520],"slot_index":0}],"title":"Get_Img_Resize_1","properties":{},"widgets_values":["Img_Resize_1"]},{"id":304,"type":"SetNode","pos":[1293.0208237254653,-2117],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":104,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":528}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_SEG_Img_Masked","properties":{"previousName":"SEG_Img_Masked"},"widgets_values":["SEG_Img_Masked"]},{"id":303,"type":"SetNode","pos":[1029.0208237254658,-2112],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":75,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":527}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_SEG_Form_Imgs","properties":{"previousName":"SEG_Form_Imgs"},"widgets_values":["SEG_Form_Imgs"]},{"id":251,"type":"IPAdapterApplyEncoded","pos":[-2547,-2409],"size":{"0":315,"1":214},"flags":{},"order":82,"mode":2,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":438},{"name":"embeds","type":"EMBEDS","link":442},{"name":"model","type":"MODEL","link":525},{"name":"attn_mask","type":"MASK","link":443,"slot_index":3}],"outputs":[{"name":"MODEL","type":"MODEL","links":[526],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApplyEncoded"},"widgets_values":[1,"original",0,1,false]},{"id":234,"type":"CLIPVisionLoader","pos":[-2794,-2565],"size":{"0":405.2630615234375,"1":58},"flags":{},"order":12,"mode":2,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[435],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["SD1.5\\model.safetensors"]},{"id":233,"type":"IPAdapterModelLoader","pos":[-2786,-2705],"size":{"0":387.9784851074219,"1":58},"flags":{},"order":13,"mode":2,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[438],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sd15.bin"]},{"id":125,"type":"PrepImageForClipVision","pos":[-3984,-2584],"size":{"0":315,"1":106},"flags":{},"order":63,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":243}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[244],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PrepImageForClipVision"},"widgets_values":["LANCZOS","pad",0.2]},{"id":69,"type":"IPAdapterModelLoader","pos":[-4016,-2733],"size":{"0":387.9784851074219,"1":58},"flags":{},"order":14,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[138],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sd15.bin"]},{"id":70,"type":"CLIPVisionLoader","pos":[-4022,-2893],"size":{"0":405.2630615234375,"1":58},"flags":{},"order":15,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[136],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["SD1.5\\model.safetensors"]},{"id":288,"type":"GetNode","pos":[-2344.713991377554,-1802.527332444711],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":16,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[505]}],"title":"Get_Global_NumOfFrames","properties":{},"widgets_values":["Global_NumOfFrames"]},{"id":52,"type":"ControlNetLoaderAdvanced","pos":[-1121.713991377554,-1800.527332444711],"size":{"0":434.10919189453125,"1":60.835391998291016},"flags":{},"order":17,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[84],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_openpose.pth"]},{"id":281,"type":"SetNode","pos":[-3995.3544942631656,-846.2910114736687],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":98,"mode":0,"inputs":[{"name":"MODEL","type":"MODEL","link":507,"slot_index":0}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Model_FromBase","properties":{"previousName":"Model_FromBase"},"widgets_values":["Model_FromBase"]},{"id":4,"type":"VAELoader","pos":[-3645.3544942631656,-1689.2910114736687],"size":{"0":387.074462890625,"1":58},"flags":{},"order":18,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"],"color":"#323","bgcolor":"#535"},{"id":3,"type":"CheckpointLoaderSimpleWithNoiseSelect","pos":[-4105.354494263166,-1688.2910114736687],"size":{"0":424.987548828125,"1":136.2106170654297},"flags":{},"order":19,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[288],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[194],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[484],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimpleWithNoiseSelect"},"widgets_values":["SD1_5\\realisticVisionV60B1_v60B1VAE.safetensors","sqrt_linear (AnimateDiff)"],"color":"#323","bgcolor":"#535"},{"id":231,"type":"Integer","pos":[-3657.3544942631656,-1328.2910114736687],"size":{"0":315,"1":58},"flags":{},"order":20,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[511,517],"shape":3,"slot_index":0}],"title":"Width - Integer","properties":{"Node name for S&R":"Integer"},"widgets_values":[512],"color":"#323","bgcolor":"#535"},{"id":227,"type":"Note","pos":[-3545.3544942631656,-1493.2910114736687],"size":{"0":489.0738525390625,"1":93.47340393066406},"flags":{},"order":21,"mode":0,"properties":{"text":""},"widgets_values":["width/height are half the original video resolution, if larger, use 512px , 960px\n"],"color":"#432","bgcolor":"#653","shape":1},{"id":232,"type":"Integer","pos":[-3272.3544942631656,-1331.2910114736687],"size":{"0":315,"1":58},"flags":{},"order":22,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[459,512],"shape":3,"slot_index":0}],"title":"Height - Integer","properties":{"Node name for S&R":"Integer"},"widgets_values":[960],"color":"#323","bgcolor":"#535"},{"id":292,"type":"SetNode","pos":[-3312.3544942631656,-856.2910114736687],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":55,"mode":0,"inputs":[{"name":"INT","type":"INT","link":511}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Video_Width","properties":{"previousName":"Video_Width"},"widgets_values":["Video_Width"]},{"id":291,"type":"SetNode","pos":[-3132.3544942631656,-861.2910114736687],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":56,"mode":0,"inputs":[{"name":"INT","type":"INT","link":512}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Video_Height","properties":{"previousName":"Video_Height"},"widgets_values":["Video_Height"]},{"id":5,"type":"VHS_LoadVideo","pos":[-4584.354494263166,-1769.2910114736687],"size":[429.2669677734375,931.8079427083334],"flags":{},"order":69,"mode":0,"inputs":[{"name":"frame_load_cap","type":"INT","link":413,"widget":{"name":"frame_load_cap"},"slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[457],"shape":3,"slot_index":0},{"name":"frame_count","type":"INT","links":[521],"shape":3,"slot_index":1},{"name":"audio","type":"VHS_AUDIO","links":null,"shape":3}],"properties":{"Node name for S&R":"VHS_LoadVideo"},"widgets_values":{"video":"20231229-1.mp4","force_rate":0,"force_size":"Disabled","custom_width":512,"custom_height":512,"frame_load_cap":700,"skip_first_frames":0,"select_every_nth":1,"choose video to upload":"image","videopreview":{"hidden":false,"paused":true,"params":{"filename":"20231229-1.mp4","type":"input","format":"video/mp4","frame_load_cap":700,"skip_first_frames":0,"force_rate":0,"select_every_nth":1}}},"color":"#323","bgcolor":"#535"},{"id":87,"type":"SAMLoader","pos":[-736.1787436738368,395.10013235773624],"size":{"0":315,"1":82},"flags":{},"order":23,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[148],"shape":3}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","AUTO"],"color":"#332922","bgcolor":"#593930"},{"id":84,"type":"SEGSPaste","pos":[85.82125632616344,-85.8998676422642],"size":{"0":300,"1":122},"flags":{},"order":111,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":222},{"name":"segs","type":"SEGS","link":146},{"name":"ref_image_opt","type":"IMAGE","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[493,501],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SEGSPaste"},"widgets_values":[5,255],"color":"#332922","bgcolor":"#593930"},{"id":216,"type":"ToBasicPipe","pos":[-326.17874367383666,-108.89986764226414],"size":{"0":241.79998779296875,"1":106},"flags":{},"order":106,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":502,"slot_index":0},{"name":"clip","type":"CLIP","link":508,"slot_index":1},{"name":"vae","type":"VAE","link":488,"slot_index":2},{"name":"positive","type":"CONDITIONING","link":554,"slot_index":3},{"name":"negative","type":"CONDITIONING","link":557,"slot_index":4}],"outputs":[{"name":"basic_pipe","type":"BASIC_PIPE","links":[394],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ToBasicPipe"},"color":"#332922","bgcolor":"#593930"},{"id":289,"type":"GetNode","pos":[-343.17874367383666,-278.8998676422641],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":24,"mode":0,"outputs":[{"name":"CLIP","type":"CLIP","links":[508],"slot_index":0}],"title":"Get_Global_Clip_Layer","properties":{},"widgets_values":["Global_Clip_Layer"]},{"id":315,"type":"Reroute","pos":[383.28600862244576,-914.5273324447102],"size":[75,26],"flags":{},"order":101,"mode":0,"inputs":[{"name":"","type":"*","link":552}],"outputs":[{"name":"","type":"CONDITIONING","links":[553,554],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":316,"type":"Reroute","pos":[373.28600862244576,-856.5273324447102],"size":[75,26],"flags":{},"order":102,"mode":0,"inputs":[{"name":"","type":"*","link":555}],"outputs":[{"name":"","type":"CONDITIONING","links":[556,557],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false},"color":"#322","bgcolor":"#533"},{"id":90,"type":"VHS_VideoCombine","pos":[542.8212563261633,-311.8998676422639],"size":[409.265380859375,985.1225891113281],"flags":{},"order":113,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":501},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Video Save - After Detailer","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"Animate_Detail_","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Animate_Detail__00013.mp4","subfolder":"","type":"output","format":"video/h264-mp4"}}},"color":"#332922","bgcolor":"#593930"},{"id":290,"type":"GetNode","pos":[-2626.713991377554,-1798.527332444711],"size":{"0":280.44635009765625,"1":58},"flags":{"collapsed":true},"order":25,"mode":0,"outputs":[{"name":"CLIP","type":"CLIP","links":[509,510],"slot_index":0}],"title":"Get_Global_Clip_Layer","properties":{},"widgets_values":["Global_Clip_Layer"]},{"id":99,"type":"CLIPSetLastLayer","pos":[-4119.354494263167,-1467.2910114736687],"size":{"0":394.4574890136719,"1":58.90501403808594},"flags":{},"order":53,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":194}],"outputs":[{"name":"CLIP","type":"CLIP","links":[469],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2],"color":"#323","bgcolor":"#535"},{"id":11,"type":"CLIPTextEncode","pos":[-2394.713991377554,-845.5273324447102],"size":{"0":400,"1":200},"flags":{},"order":57,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":510,"slot_index":0}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[548],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["(nsfw) , (worst quality, low quality, illustration, 3d, 2d, painting, cartoons, sketch), open mouth\n"],"color":"#322","bgcolor":"#533"},{"id":14,"type":"LineArtPreprocessor","pos":[-1763.713991377554,-1668.527332444711],"size":{"0":340.2794189453125,"1":82},"flags":{},"order":66,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":530}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[277,529],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LineArtPreprocessor"},"widgets_values":["disable",512]},{"id":12,"type":"ControlNetApplyAdvanced","pos":[-1762.713991377554,-1383.527332444711],"size":{"0":308.47021484375,"1":166},"flags":{},"order":88,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":547},{"name":"negative","type":"CONDITIONING","link":548},{"name":"control_net","type":"CONTROL_NET","link":28,"slot_index":2},{"name":"image","type":"IMAGE","link":529}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[535],"shape":3,"slot_index":0},{"name":"negative","type":"CONDITIONING","links":[536],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ControlNetApplyAdvanced"},"widgets_values":[0.5,0,1]},{"id":256,"type":"Image Resize","pos":[-3135.3544942631656,-1785.2910114736687],"size":{"0":315,"1":178},"flags":{},"order":86,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":457},{"name":"resize_width","type":"INT","link":517,"widget":{"name":"resize_width"}},{"name":"resize_height","type":"INT","link":459,"widget":{"name":"resize_height"}}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[489],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Image Resize"},"widgets_values":["resize","true","nearest",2,1024,1536],"color":"#323","bgcolor":"#535"},{"id":276,"type":"SetNode","pos":[-2930.3544942631656,-863.2910114736687],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":95,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":489}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Img_Resize_1","properties":{"previousName":"Img_Resize_1"},"widgets_values":["Img_Resize_1"]},{"id":169,"type":"ControlNetLoaderAdvanced","pos":[-373.71399137755424,-1735.527332444711],"size":{"0":434.10919189453125,"1":60.835391998291016},"flags":{},"order":26,"mode":4,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[323],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11f1p_sd15_depth.pth"]},{"id":170,"type":"PreviewImage","pos":[-488.71399137755424,-1137.527332444711],"size":{"0":607.2425537109375,"1":521.8944702148438},"flags":{},"order":78,"mode":4,"inputs":[{"name":"images","type":"IMAGE","link":467}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":54,"type":"PreviewImage","pos":[-1149.713991377554,-1141.527332444711],"size":{"0":549.7514038085938,"1":480.81243896484375},"flags":{},"order":77,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":451}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1,"type":"ADE_AnimateDiffLoaderWithContext","pos":[281.28600862244576,-1327.527332444711],"size":{"0":315,"1":190},"flags":{},"order":68,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":541},{"name":"context_options","type":"CONTEXT_OPTIONS","link":1,"slot_index":1},{"name":"motion_lora","type":"MOTION_LORA","link":null,"slot_index":2},{"name":"motion_model_settings","type":"MOTION_MODEL_SETTINGS","link":null,"slot_index":3}],"outputs":[{"name":"MODEL","type":"MODEL","links":[477,551],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ADE_AnimateDiffLoaderWithContext"},"widgets_values":["v3_sd15_mm.ckpt","sqrt_linear (AnimateDiff)",1,false]},{"id":270,"type":"SetNode","pos":[355.28600862244576,-1032.527332444711],"size":{"0":288.0129699707031,"1":58},"flags":{"collapsed":true},"order":85,"mode":0,"inputs":[{"name":"MODEL","type":"MODEL","link":477,"slot_index":0}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Model_AnimateDiff_data","properties":{"previousName":"Model_AnimateDiff_data"},"widgets_values":["Model_AnimateDiff_data"]},{"id":313,"type":"GetNode","pos":[-1508.713991377554,-1822.527332444711],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":27,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[544,545,560],"slot_index":0}],"title":"Get_Img_Resize_1","properties":{},"widgets_values":["Img_Resize_1"]},{"id":274,"type":"GetNode","pos":[730.2860086224456,-1797.527332444711],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":28,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[487,496],"slot_index":0}],"title":"Get_Global_VAE","properties":{},"widgets_values":["Global_VAE"]},{"id":265,"type":"GetNode","pos":[725.2860086224456,-1727.527332444711],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":29,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[473],"slot_index":0}],"title":"Get_SeedNumber","properties":{},"widgets_values":["SeedNumber"]},{"id":18,"type":"VAEEncode","pos":[1036.286008622446,-1463.527332444711],"size":{"0":210,"1":46},"flags":{},"order":60,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":560},{"name":"vae","type":"VAE","link":487}],"outputs":[{"name":"LATENT","type":"LATENT","links":[21],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":264,"type":"SetNode","pos":[-3512.3544942631656,-843.2910114736687],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":61,"mode":0,"inputs":[{"name":"INT","type":"INT","link":472}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_SeedNumber","properties":{"previousName":"SeedNumber"},"widgets_values":["SeedNumber"]},{"id":257,"type":"CR Seed","pos":[-3673.3544942631656,-1175.2910114736687],"size":{"0":315,"1":102},"flags":{},"order":30,"mode":0,"outputs":[{"name":"seed","type":"INT","links":[472],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR Seed"},"widgets_values":[777777777775,"fixed"],"color":"#323","bgcolor":"#535"},{"id":20,"type":"VAEDecode","pos":[1029.286008622446,-970.5273324447102],"size":{"0":210,"1":46},"flags":{},"order":107,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":479,"slot_index":0},{"name":"vae","type":"VAE","link":496,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[480,498],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":282,"type":"GetNode","pos":[-2272.3242826067903,-296.2488943060682],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":31,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[497],"slot_index":0}],"title":"Get_IMG_Stage1","properties":{},"widgets_values":["IMG_Stage1"]},{"id":73,"type":"ReActorFaceSwap","pos":[-2040.3242826067922,-246.2488943060681],"size":{"0":315,"1":338},"flags":{},"order":62,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":497},{"name":"source_image","type":"IMAGE","link":126,"slot_index":1},{"name":"face_model","type":"FACE_MODEL","link":null,"slot_index":2}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[308,499],"shape":3,"slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer.pth",0.8,0.8,"no","no","0","0",1],"color":"#223","bgcolor":"#335"},{"id":77,"type":"LoadImage","pos":[-2065.324282606792,141.751105693932],"size":{"0":374.5977783203125,"1":459.8736877441406},"flags":{"collapsed":false},"order":32,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[126],"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["nancy.png","image"],"color":"#223","bgcolor":"#335"},{"id":156,"type":"VHS_VideoCombine","pos":[-1630.3242826067915,-302.24889430606817],"size":[392.1281433105469,952.9902687072754],"flags":{},"order":79,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":308},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3}],"title":"Video Save - After Detailer","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"Animate_faceswap_","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Animate_faceswap__00008.mp4","subfolder":"","type":"temp","format":"video/h264-mp4"}}},"color":"#223","bgcolor":"#335"},{"id":285,"type":"GetNode","pos":[-770.1787436738368,-282.89986764226404],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":33,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[502],"slot_index":0}],"title":"Get_Model_FromBase","properties":{},"widgets_values":["Model_FromBase"]},{"id":275,"type":"GetNode","pos":[-534.1787436738371,-279.8998676422641],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":34,"mode":0,"outputs":[{"name":"VAE","type":"VAE","links":[488],"slot_index":0}],"title":"Get_Global_VAE","properties":{},"widgets_values":["Global_VAE"]},{"id":272,"type":"SetNode","pos":[1241.286008622446,-617.5273324447102],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":109,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":480}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_IMG_Stage1","properties":{"previousName":"IMG_Stage1"},"widgets_values":["IMG_Stage1"]},{"id":86,"type":"UltralyticsDetectorProvider","pos":[-740.1787436738368,204.10013235773584],"size":{"0":315,"1":78},"flags":{},"order":35,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[147],"shape":3},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"],"color":"#332922","bgcolor":"#593930"},{"id":279,"type":"SetNode","pos":[1027.8212563261636,684.100132357735],"size":{"0":303.0345153808594,"1":58},"flags":{"collapsed":true},"order":112,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":493}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_IMG_Stage2_Detailer","properties":{"previousName":"IMG_Stage2_Detailer"},"widgets_values":["IMG_Stage2_Detailer"]},{"id":85,"type":"ImpactSimpleDetectorSEGS_for_AD","pos":[-350.17874367383666,123.1001323577357],"size":{"0":319.20001220703125,"1":334},"flags":{},"order":84,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":147,"slot_index":0},{"name":"image_frames","type":"IMAGE","link":224},{"name":"sam_model_opt","type":"SAM_MODEL","link":148,"slot_index":2},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":null}],"outputs":[{"name":"SEGS","type":"SEGS","links":[145],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImpactSimpleDetectorSEGS_for_AD"},"widgets_values":[0.35000000000000003,10,2.5,50,0.5,10,0,0.7,"Pivot SEGS","Combined mask"],"color":"#332922","bgcolor":"#593930"},{"id":318,"type":"SetNode","pos":[-846,-2113],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":89,"mode":2,"inputs":[{"name":"MODEL","type":"MODEL","link":559}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Model_IPA_FaceID","properties":{"previousName":"Model_IPA_FaceID"},"widgets_values":["Model_IPA_FaceID"]},{"id":302,"type":"SetNode","pos":[-2382,-2087],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":94,"mode":2,"inputs":[{"name":"MODEL","type":"MODEL","link":526}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Model_From_IPA2","properties":{"previousName":"Model_From_IPA2"},"widgets_values":["Model_From_IPA2"]},{"id":71,"type":"LoadImage","pos":[-4642,-2795],"size":{"0":545.5994262695312,"1":592.9102783203125},"flags":{},"order":36,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[243],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["licensed-image.jpg","image"]},{"id":299,"type":"SetNode","pos":[-3682,-2079],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":93,"mode":0,"inputs":[{"name":"MODEL","type":"MODEL","link":524}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Model_From_IPA1","properties":{"previousName":"Model_From_IPA1"},"widgets_values":["Model_From_IPA1"]},{"id":322,"type":"LoadImage","pos":[-3350,-2334],"size":[228.51583862304688,314],"flags":{},"order":37,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[561],"shape":3},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00059-1590859070.png","image"]},{"id":248,"type":"IPAdapterEncoder","pos":[-3005,-2418],"size":{"0":315,"1":258},"flags":{},"order":65,"mode":2,"inputs":[{"name":"clip_vision","type":"CLIP_VISION","link":435,"slot_index":0},{"name":"image_1","type":"IMAGE","link":444},{"name":"image_2","type":"IMAGE","link":445},{"name":"image_3","type":"IMAGE","link":561,"slot_index":3},{"name":"image_4","type":"IMAGE","link":null}],"outputs":[{"name":"EMBEDS","type":"EMBEDS","links":[442],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterEncoder"},"widgets_values":[true,0,1,1,1,1]},{"id":253,"type":"ImageToMask","pos":[-2741,-2837],"size":{"0":315,"1":58},"flags":{},"order":64,"mode":2,"inputs":[{"name":"image","type":"IMAGE","link":546}],"outputs":[{"name":"MASK","type":"MASK","links":[443],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":314,"type":"GetNode","pos":[-3015,-2970],"size":{"0":210,"1":58},"flags":{"collapsed":false},"order":38,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[546],"slot_index":0}],"title":"Get_SEG_Form_Imgs","properties":{},"widgets_values":["SEG_Form_Imgs"]},{"id":249,"type":"LoadImage","pos":[-3363,-2852],"size":[242.6113739013672,314],"flags":{},"order":39,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[444],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_ulznr_00018_.png","image"]},{"id":250,"type":"LoadImage","pos":[-3358,-2587],"size":[210,314],"flags":{},"order":40,"mode":2,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[445],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["Leonardo_Diffusion_XL_dramatic_sky_with_vibrant_colors_evoking_1.jpg","image"]},{"id":26,"type":"PreviewImage","pos":[-1836,-1144],"size":{"0":590.0970458984375,"1":503.4499206542969},"flags":{},"order":83,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":277}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":24,"type":"ControlNetLoaderAdvanced","pos":[-1760.713991377554,-1521.527332444711],"size":{"0":392.73394775390625,"1":58},"flags":{},"order":41,"mode":0,"inputs":[{"name":"timestep_keyframe","type":"TIMESTEP_KEYFRAME","link":null}],"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[28],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoaderAdvanced"},"widgets_values":["control_v11p_sd15_lineart.pth"]},{"id":305,"type":"GetNode","pos":[-1910,-1805],"size":{"0":300.6278381347656,"1":58},"flags":{"collapsed":false},"order":42,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[530],"slot_index":0}],"title":"Get_SEG_Img_Masked","properties":{},"widgets_values":["SEG_Img_Masked"]},{"id":300,"type":"GetNode","pos":[-3315,-2963],"size":{"0":210,"1":58},"flags":{"collapsed":false},"order":43,"mode":2,"outputs":[{"name":"MODEL","type":"MODEL","links":[525],"slot_index":0}],"title":"Get_Model_FromBase","properties":{},"widgets_values":["Model_FromBase"]},{"id":17,"type":"KSampler","pos":[978.2860086224456,-1325.527332444711],"size":{"0":315,"1":262},"flags":{},"order":105,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":551,"slot_index":0},{"name":"positive","type":"CONDITIONING","link":553,"slot_index":1},{"name":"negative","type":"CONDITIONING","link":556,"slot_index":2},{"name":"latent_image","type":"LATENT","link":21},{"name":"seed","type":"INT","link":473,"widget":{"name":"seed"},"slot_index":4}],"outputs":[{"name":"LATENT","type":"LATENT","links":[479],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[77777777777777,"fixed",14,1.5,"lcm","normal",0.75]},{"id":284,"type":"GetNode","pos":[-765.7514933406035,-205.98607825269383],"size":{"0":279.4400939941406,"1":58},"flags":{"collapsed":true},"order":44,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[500],"slot_index":0}],"title":"Get_IMG_Stage1_Faceswap","properties":{},"widgets_values":["IMG_Stage1_Faceswap"]},{"id":112,"type":"ImageCASharpening+","pos":[-735.1787436738368,51.10013235773582],"size":{"0":310.79998779296875,"1":58},"flags":{},"order":67,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":500}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[222,223,224],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ImageCASharpening+"},"widgets_values":[0.25],"color":"#332922","bgcolor":"#593930"},{"id":80,"type":"IPAdapterApply","pos":[-3999,-2407],"size":{"0":315,"1":258},"flags":{},"order":81,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":138},{"name":"clip_vision","type":"CLIP_VISION","link":136},{"name":"image","type":"IMAGE","link":244,"slot_index":2},{"name":"model","type":"MODEL","link":523},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[524],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApply"},"widgets_values":[1,0,"original",0,1,true]},{"id":310,"type":"GetNode","pos":[263.28600862244576,-1794.527332444711],"size":{"0":268.6518249511719,"1":58},"flags":{"collapsed":false},"order":45,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[541],"slot_index":0}],"title":"Get_Model_From_IPA1","properties":{},"widgets_values":["Model_From_IPA1"]},{"id":83,"type":"SEGSDetailerForAnimateDiff","pos":[50.8212563261634,181.10013235773576],"size":{"0":407.959716796875,"1":330},"flags":{},"order":108,"mode":0,"inputs":[{"name":"image_frames","type":"IMAGE","link":223,"slot_index":0},{"name":"segs","type":"SEGS","link":145},{"name":"basic_pipe","type":"BASIC_PIPE","link":394,"slot_index":2},{"name":"refiner_basic_pipe_opt","type":"BASIC_PIPE","link":null},{"name":"seed","type":"INT","link":492,"widget":{"name":"seed"}}],"outputs":[{"name":"segs","type":"SEGS","links":[146],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SEGSDetailerForAnimateDiff"},"widgets_values":[256,true,768,77777777777777,"fixed",4,1.5,"lcm","normal",0.15,0.5],"color":"#332922","bgcolor":"#593930"},{"id":230,"type":"Integer","pos":[-4110.354494263166,-1311.2910114736687],"size":{"0":315,"1":58},"flags":{},"order":46,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[413,504],"shape":3,"slot_index":0}],"title":"NumOfFrames - Integer","properties":{"Node name for S&R":"Integer"},"widgets_values":[800],"color":"#323","bgcolor":"#535"},{"id":64,"type":"ttN text","pos":[-2375.713991377554,-1726.527332444711],"size":{"0":400,"1":200},"flags":{},"order":47,"mode":0,"outputs":[{"name":"text","type":"STRING","links":[107],"shape":3,"slot_index":0}],"title":"Pre_text","properties":{"Node name for S&R":"ttN text","ttNnodeVersion":"1.0.0"},"widgets_values":["portrait photo , (woman dancer), (wear yellow jacket) , (Blue Pants), (cleavage:0.8), pale skin, (smile:1), cozy, natural skin, (cinematic lighting), (cinematic, film grain:1.1) , (fireworks:1.2) ,"],"color":"#232","bgcolor":"#353"},{"id":8,"type":"BatchPromptSchedule","pos":[-2388.713991377554,-1471.527332444711],"size":{"0":404.2124328613281,"1":555.6133422851562},"flags":{},"order":71,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":509,"slot_index":0},{"name":"pre_text","type":"STRING","link":107,"widget":{"name":"pre_text"},"slot_index":1},{"name":"max_frames","type":"INT","link":505,"widget":{"name":"max_frames"},"slot_index":2}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[547],"shape":3,"slot_index":0},{"name":"NEG","type":"CONDITIONING","links":null,"shape":3}],"properties":{"Node name for S&R":"BatchPromptSchedule"},"widgets_values":["\"0\" : \" (blossom drop from sky:1.2) \", \n\"15\" : \"  (spot light focus to girl) \"\n\n",700,false,"(Masterpiece, best quality:1.2), ultra realistic ,2 boxing figthers , wear cyberpunk style armor, cyberpunk style , ","0",0,0,0,0,0],"color":"#232","bgcolor":"#353"},{"id":283,"type":"SetNode","pos":[-1140,658],"size":{"0":210,"1":58},"flags":{"collapsed":true},"order":80,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":499}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_IMG_Stage1_Faceswap","properties":{"previousName":"IMG_Stage1_Faceswap"},"widgets_values":["IMG_Stage1_Faceswap"]},{"id":92,"type":"VHS_VideoCombine","pos":[1558,-1825],"size":[525.299560546875,1202.6866760253906],"flags":{},"order":110,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":498,"slot_index":0},{"name":"audio","type":"VHS_AUDIO","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null,"shape":3,"slot_index":0}],"title":"Video Save - After Faceswap","properties":{"Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":24,"loop_count":0,"filename_prefix":"Animate_normal","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":20,"save_metadata":true,"pingpong":false,"save_output":false,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"Animate_normal_00008.mp4","subfolder":"","type":"temp","format":"video/h264-mp4"}}}}],"links":[[1,2,0,1,1,"CONTEXT_OPTIONS"],[21,18,0,17,3,"LATENT"],[28,24,0,12,2,"CONTROL_NET"],[79,48,0,50,0,"MODEL"],[84,52,0,53,2,"CONTROL_NET"],[107,64,0,8,1,"STRING"],[126,77,0,73,1,"IMAGE"],[136,70,0,80,1,"CLIP_VISION"],[138,69,0,80,0,"IPADAPTER"],[145,85,0,83,1,"SEGS"],[146,83,0,84,1,"SEGS"],[147,86,0,85,0,"BBOX_DETECTOR"],[148,87,0,85,2,"SAM_MODEL"],[194,3,1,99,0,"CLIP"],[222,112,0,84,0,"IMAGE"],[223,112,0,83,0,"IMAGE"],[224,112,0,85,1,"IMAGE"],[243,71,0,125,0,"IMAGE"],[244,125,0,80,2,"IMAGE"],[277,14,0,26,0,"IMAGE"],[288,3,0,48,0,"MODEL"],[308,73,0,156,0,"IMAGE"],[309,157,0,158,0,"IPADAPTER"],[310,163,0,158,1,"CLIP_VISION"],[311,161,0,158,2,"INSIGHTFACE"],[312,162,0,158,3,"IMAGE"],[313,160,0,158,4,"MODEL"],[318,149,0,162,0,"IMAGE"],[323,169,0,167,2,"CONTROL_NET"],[328,53,0,167,0,"CONDITIONING"],[329,53,1,167,1,"CONDITIONING"],[394,216,0,83,2,"BASIC_PIPE"],[401,220,0,221,0,"IMAGE"],[402,221,0,222,0,"MASK"],[403,222,0,223,0,"MASK"],[404,224,0,226,0,"IMAGE"],[405,225,0,226,1,"IMAGE"],[406,223,0,226,2,"MASK"],[407,220,0,228,0,"IMAGE"],[408,226,0,229,0,"IMAGE"],[413,230,0,5,0,"INT"],[435,234,0,248,0,"CLIP_VISION"],[438,233,0,251,0,"IPADAPTER"],[442,248,0,251,1,"EMBEDS"],[443,253,0,251,3,"MASK"],[444,249,0,248,1,"IMAGE"],[445,250,0,248,2,"IMAGE"],[451,97,0,54,0,"IMAGE"],[455,97,0,53,3,"IMAGE"],[457,5,0,256,0,"IMAGE"],[459,232,0,256,2,"INT"],[466,260,0,167,3,"IMAGE"],[467,260,0,170,0,"IMAGE"],[469,99,0,48,1,"CLIP"],[472,257,0,264,0,"*"],[473,265,0,17,4,"INT"],[477,1,0,270,0,"*"],[479,17,0,20,0,"LATENT"],[480,20,0,272,0,"*"],[484,3,2,273,0,"VAE"],[487,274,0,18,1,"VAE"],[488,275,0,216,2,"VAE"],[489,256,0,276,0,"*"],[492,278,0,83,4,"INT"],[493,84,0,279,0,"*"],[496,274,0,20,1,"VAE"],[497,282,0,73,0,"IMAGE"],[498,20,0,92,0,"IMAGE"],[499,73,0,283,0,"*"],[500,284,0,112,0,"IMAGE"],[501,84,0,90,0,"IMAGE"],[502,285,0,216,0,"MODEL"],[504,230,0,287,0,"*"],[505,288,0,8,2,"INT"],[506,48,1,286,0,"CLIP"],[507,50,0,281,0,"MODEL"],[508,289,0,216,1,"CLIP"],[509,290,0,8,0,"CLIP"],[510,290,0,11,0,"CLIP"],[511,231,0,292,0,"*"],[512,232,0,291,0,"*"],[513,294,0,224,2,"INT"],[514,294,0,225,2,"INT"],[515,293,0,225,1,"INT"],[516,293,0,224,1,"INT"],[517,231,0,256,1,"INT"],[519,295,0,220,0,"IMAGE"],[520,295,0,225,0,"IMAGE"],[521,5,1,296,0,"*"],[522,297,0,224,0,"INT"],[523,298,0,80,3,"MODEL"],[524,80,0,299,0,"*"],[525,300,0,251,2,"MODEL"],[526,251,0,302,0,"*"],[527,220,0,303,0,"*"],[528,226,0,304,0,"*"],[529,14,0,12,3,"IMAGE"],[530,305,0,14,0,"IMAGE"],[535,12,0,53,0,"CONDITIONING"],[536,12,1,53,1,"CONDITIONING"],[541,310,0,1,0,"MODEL"],[544,313,0,97,0,"IMAGE"],[545,313,0,260,0,"IMAGE"],[546,314,0,253,0,"IMAGE"],[547,8,0,12,0,"CONDITIONING"],[548,11,0,12,1,"CONDITIONING"],[551,1,0,17,0,"MODEL"],[552,167,0,315,0,"*"],[553,315,0,17,1,"CONDITIONING"],[554,315,0,216,3,"CONDITIONING"],[555,167,1,316,0,"*"],[556,316,0,17,2,"CONDITIONING"],[557,316,0,216,4,"CONDITIONING"],[558,317,0,160,0,"MODEL"],[559,158,0,318,0,"*"],[560,313,0,18,0,"IMAGE"],[561,322,0,248,3,"IMAGE"]],"groups":[{"title":"Stage 1 Sampling","bounding":[-2660,-1900,4115,1353],"color":"#88A","font_size":24},{"title":"Loader","bounding":[-4617,-1918,1867,1094],"color":"#A88","font_size":24},{"title":"LCM (Optional)","bounding":[-3204,-801,449,472],"color":"#3f789e","font_size":24},{"title":"IPAdapter (IPA1) (Optional For Video)","bounding":[-4670,-3061,1221,1026],"color":"#8A8","font_size":24},{"title":"Faceswap (Optional)","bounding":[-2299,-396,1398,1096],"color":"#3f789e","font_size":24},{"title":"Detailer For Face","bounding":[-793,-396,2065,1115],"color":"#A88","font_size":24},{"title":"IPA - FaceID Plus V2","bounding":[-2115,-2958,1548,881],"color":"#8A8","font_size":24},{"title":"Group","bounding":[-485,-2935,2125,851],"color":"#b58b2a","font_size":24},{"title":"Multiple Imgs - IPAadpter (IPA2)","bounding":[-3394,-3066,1232,1024],"color":"#3f789e","font_size":24}],"config":{},"extra":{},"version":0.4}